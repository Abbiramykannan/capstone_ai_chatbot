2025-06-26 17:27:40,655 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:27:41,053 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:29:51,777 | INFO | Creating Qdrant collection...
2025-06-26 17:29:52,624 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:29:53,021 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:29:53,027 | INFO | Qdrant collection created.
2025-06-26 17:30:26,108 | INFO | Creating Qdrant collection...
2025-06-26 17:30:26,927 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:30:27,311 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:30:27,317 | INFO | Qdrant collection created.
2025-06-26 17:30:56,117 | INFO | Creating Qdrant collection...
2025-06-26 17:30:56,961 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:30:57,343 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:30:57,351 | INFO | Qdrant collection created.
2025-06-26 17:31:16,209 | INFO | Creating Qdrant collection...
2025-06-26 17:31:17,048 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:31:17,576 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:31:17,581 | INFO | Qdrant collection created.
2025-06-26 17:32:06,707 | INFO | Creating Qdrant collection...
2025-06-26 17:32:07,555 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:32:07,958 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:32:07,966 | INFO | Qdrant collection created.
2025-06-26 17:43:27,789 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:43:27,794 | WARNING | File already exists, skipping write.
2025-06-26 17:43:27,796 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:43:27,797 | INFO | Processing CSV...
2025-06-26 17:43:28,277 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:43:45,241 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:43:45,246 | WARNING | File already exists, skipping write.
2025-06-26 17:43:45,248 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:43:45,249 | INFO | Processing CSV...
2025-06-26 17:43:45,493 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:43:45,510 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-26 17:43:45,513 | INFO | Received query: what are the countries that are mentioned here?
2025-06-26 17:43:45,514 | INFO | Last uploaded file type: csv
2025-06-26 17:43:46,519 | INFO | Routed to: structured
2025-06-26 17:43:46,520 | INFO | Using table name: sales_data_sample
2025-06-26 17:43:47,669 | INFO | SQL Query: SELECT DISTINCT COUNTRY FROM sales_data_sample
2025-06-26 17:43:49,811 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:43:49,813 | WARNING | File already exists, skipping write.
2025-06-26 17:43:49,815 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:43:49,816 | INFO | Processing CSV...
2025-06-26 17:43:50,160 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:44:27,651 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:44:27,658 | WARNING | File already exists, skipping write.
2025-06-26 17:44:27,659 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:44:27,664 | INFO | Processing CSV...
2025-06-26 17:44:27,952 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:44:27,966 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-26 17:44:27,967 | INFO | Received query: what is this file tells ?
2025-06-26 17:44:27,970 | INFO | Last uploaded file type: csv
2025-06-26 17:44:28,484 | INFO | Routed to: unstructured
2025-06-26 17:44:30,578 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-06-26 17:44:31,117 | INFO | Similar docs:
The file is empty.
2025-06-26 17:44:33,205 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:44:33,211 | WARNING | File already exists, skipping write.
2025-06-26 17:44:33,213 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:44:33,215 | INFO | Processing CSV...
2025-06-26 17:44:33,620 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:44:56,105 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:44:56,111 | WARNING | File already exists, skipping write.
2025-06-26 17:44:56,113 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:44:56,114 | INFO | Processing CSV...
2025-06-26 17:44:56,397 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:44:56,416 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-26 17:44:56,420 | INFO | Received query: what are the countries that are mentioned here?
2025-06-26 17:44:56,422 | INFO | Last uploaded file type: csv
2025-06-26 17:44:57,055 | INFO | Routed to: unstructured
2025-06-26 17:44:58,832 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-06-26 17:44:59,463 | INFO | Similar docs:
Answer: None.
2025-06-26 17:45:01,539 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:45:01,544 | WARNING | File already exists, skipping write.
2025-06-26 17:45:01,545 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:45:01,545 | INFO | Processing CSV...
2025-06-26 17:45:01,883 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:48:31,096 | INFO | Creating Qdrant collection...
2025-06-26 17:48:31,921 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:48:32,305 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:48:32,312 | INFO | Qdrant collection created.
2025-06-26 17:48:54,684 | INFO | Creating Qdrant collection...
2025-06-26 17:48:55,488 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:48:55,892 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-26 17:48:55,899 | INFO | Qdrant collection created.
2025-06-26 17:50:22,953 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:50:22,955 | WARNING | File already exists, skipping write.
2025-06-26 17:50:22,957 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:50:22,959 | INFO | Processing CSV...
2025-06-26 17:50:23,293 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:50:45,598 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:50:45,600 | WARNING | File already exists, skipping write.
2025-06-26 17:50:45,601 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:50:45,602 | INFO | Processing CSV...
2025-06-26 17:50:45,880 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:50:45,895 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-26 17:50:45,898 | INFO | Received query: what are the countries that are mentioned here?
2025-06-26 17:50:45,900 | INFO | Last uploaded file type: csv
2025-06-26 17:50:45,904 | INFO | Routed to: structured
2025-06-26 17:50:45,905 | INFO | Using table name: sales_data_sample
2025-06-26 17:50:48,119 | INFO | SQL Query: SELECT DISTINCT COUNTRY FROM sales_data_sample;
2025-06-26 17:50:50,252 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:50:50,256 | WARNING | File already exists, skipping write.
2025-06-26 17:50:50,258 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:50:50,259 | INFO | Processing CSV...
2025-06-26 17:50:50,584 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:51:47,563 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:51:47,566 | WARNING | File already exists, skipping write.
2025-06-26 17:51:47,567 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:51:47,569 | INFO | Processing CSV...
2025-06-26 17:51:47,948 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:51:47,960 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-26 17:51:47,964 | INFO | Received query: what are the products that are mentioned here?
2025-06-26 17:51:47,966 | INFO | Last uploaded file type: csv
2025-06-26 17:51:47,970 | INFO | Routed to: structured
2025-06-26 17:51:47,974 | INFO | Using table name: sales_data_sample
2025-06-26 17:51:48,587 | INFO | SQL Query: SELECT DISTINCT PRODUCTLINE FROM sales_data_sample
2025-06-26 17:51:50,730 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:51:50,733 | WARNING | File already exists, skipping write.
2025-06-26 17:51:50,735 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:51:50,737 | INFO | Processing CSV...
2025-06-26 17:51:51,008 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:53:15,613 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:53:15,615 | WARNING | File already exists, skipping write.
2025-06-26 17:53:15,618 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:53:15,620 | INFO | Processing CSV...
2025-06-26 17:53:15,954 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-26 17:53:15,974 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-26 17:53:15,977 | INFO | Received query: total orders that are made here?
2025-06-26 17:53:15,988 | INFO | Last uploaded file type: csv
2025-06-26 17:53:15,990 | INFO | Routed to: structured
2025-06-26 17:53:15,991 | INFO | Using table name: sales_data_sample
2025-06-26 17:53:16,616 | INFO | SQL Query: SELECT COUNT(ORDERNUMBER) FROM sales_data_sample
2025-06-26 17:53:18,737 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-26 17:53:18,739 | WARNING | File already exists, skipping write.
2025-06-26 17:53:18,741 | INFO | Table name extracted: sales_data_sample
2025-06-26 17:53:18,743 | INFO | Processing CSV...
2025-06-26 17:53:19,088 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 17:15:43,294 | INFO | Creating Qdrant collection...
2025-06-27 17:15:44,146 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-27 17:15:44,543 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-27 17:15:44,543 | INFO | Qdrant collection created.
2025-06-27 17:16:56,462 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 17:16:56,470 | WARNING | File already exists, skipping write.
2025-06-27 17:16:56,472 | INFO | Table name extracted: sales_data_sample
2025-06-27 17:16:56,475 | INFO | Processing CSV...
2025-06-27 17:16:57,263 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 17:17:33,663 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 17:17:33,670 | WARNING | File already exists, skipping write.
2025-06-27 17:17:33,670 | INFO | Table name extracted: sales_data_sample
2025-06-27 17:17:33,670 | INFO | Processing CSV...
2025-06-27 17:17:34,157 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 17:17:42,660 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 17:17:42,667 | WARNING | File already exists, skipping write.
2025-06-27 17:17:42,669 | INFO | Table name extracted: sales_data_sample
2025-06-27 17:17:42,674 | INFO | Processing CSV...
2025-06-27 17:17:43,270 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 17:18:01,645 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 17:18:01,645 | WARNING | File already exists, skipping write.
2025-06-27 17:18:01,645 | INFO | Table name extracted: sales_data_sample
2025-06-27 17:18:01,645 | INFO | Processing CSV...
2025-06-27 17:18:02,013 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 17:18:02,050 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-27 17:18:02,053 | INFO | Received query: what are the countries that are mentioned here?
2025-06-27 17:18:02,055 | INFO | Last uploaded file type: csv
2025-06-27 17:18:02,055 | INFO | Routed to: structured
2025-06-27 17:18:02,061 | INFO | Using table name: sales_data_sample
2025-06-27 17:18:04,391 | INFO | SQL Query: SELECT DISTINCT COUNTRY FROM sales_data_sample;
2025-06-27 17:18:06,856 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 17:18:06,856 | WARNING | File already exists, skipping write.
2025-06-27 17:18:06,860 | INFO | Table name extracted: sales_data_sample
2025-06-27 17:18:06,861 | INFO | Processing CSV...
2025-06-27 17:18:07,431 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 17:20:54,654 | INFO | Starting upload for file: Abbiramy Resume (1).pdf
2025-06-27 17:20:54,657 | WARNING | File already exists, skipping write.
2025-06-27 17:20:54,657 | INFO | Extracting PDF...
2025-06-27 17:20:55,321 | INFO | Indexing PDF text...
2025-06-27 17:21:06,407 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-06-27 17:21:06,505 | INFO | PDF uploaded and indexed.
2025-06-27 17:21:19,138 | INFO | Starting upload for file: Abbiramy Resume (1).pdf
2025-06-27 17:21:19,138 | WARNING | File already exists, skipping write.
2025-06-27 17:21:19,138 | INFO | Extracting PDF...
2025-06-27 17:21:20,021 | INFO | Indexing PDF text...
2025-06-27 17:21:30,171 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-06-27 17:21:30,189 | INFO | PDF uploaded and indexed.
2025-06-27 17:21:30,224 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-27 17:21:30,224 | INFO | Received query: what is abbiramy's emailID?
2025-06-27 17:21:30,224 | INFO | Last uploaded file type: pdf
2025-06-27 17:21:30,224 | INFO | Routed to: unstructured
2025-06-27 17:21:30,988 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-06-27 17:21:32,088 | INFO | Similar docs:
abbiramykannan15@gmail.com
2025-06-27 17:21:34,339 | INFO | Starting upload for file: Abbiramy Resume (1).pdf
2025-06-27 17:21:34,339 | WARNING | File already exists, skipping write.
2025-06-27 17:21:34,339 | INFO | Extracting PDF...
2025-06-27 17:21:34,755 | INFO | Indexing PDF text...
2025-06-27 17:21:44,986 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-06-27 17:21:44,990 | INFO | PDF uploaded and indexed.
2025-06-27 18:04:23,218 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 18:04:23,229 | WARNING | File already exists, skipping write.
2025-06-27 18:04:23,232 | INFO | Table name extracted: sales_data_sample
2025-06-27 18:04:23,235 | INFO | Processing CSV...
2025-06-27 18:04:24,042 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 18:04:52,281 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 18:04:52,286 | WARNING | File already exists, skipping write.
2025-06-27 18:04:52,288 | INFO | Table name extracted: sales_data_sample
2025-06-27 18:04:52,290 | INFO | Processing CSV...
2025-06-27 18:04:52,890 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 18:05:21,629 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 18:05:21,635 | WARNING | File already exists, skipping write.
2025-06-27 18:05:21,639 | INFO | Table name extracted: sales_data_sample
2025-06-27 18:05:21,645 | INFO | Processing CSV...
2025-06-27 18:05:22,155 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-27 18:05:23,637 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-27 18:05:23,639 | INFO | Received query: how many orders have been cancelled in october month?
2025-06-27 18:05:23,641 | INFO | Last uploaded file type: csv
2025-06-27 18:05:23,643 | INFO | Routed to: structured
2025-06-27 18:05:23,646 | INFO | Using table name: sales_data_sample
2025-06-27 18:05:25,937 | INFO | SQL Query: SELECT COUNT(*) FROM sales_data_sample WHERE MONTH_ID = 10 AND STATUS = 'Cancelled';
2025-06-27 18:05:28,083 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-27 18:05:28,086 | WARNING | File already exists, skipping write.
2025-06-27 18:05:28,088 | INFO | Table name extracted: sales_data_sample
2025-06-27 18:05:28,089 | INFO | Processing CSV...
2025-06-27 18:05:28,623 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-30 17:49:32,799 | INFO | Creating Qdrant collection...
2025-06-30 17:49:34,602 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-30 17:49:34,981 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-30 17:49:34,996 | INFO | Qdrant collection created.
2025-06-30 17:52:06,817 | INFO | Creating Qdrant collection...
2025-06-30 17:52:07,660 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-30 17:52:08,300 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-30 17:52:08,316 | INFO | Qdrant collection created.
2025-06-30 17:52:29,176 | INFO | Creating Qdrant collection...
2025-06-30 17:52:30,008 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-30 17:52:30,427 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-06-30 17:52:30,442 | INFO | Qdrant collection created.
2025-06-30 18:02:19,356 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-30 18:02:19,363 | WARNING | File already exists, skipping write.
2025-06-30 18:02:19,369 | INFO | Table name extracted: sales_data_sample
2025-06-30 18:02:19,376 | INFO | Processing CSV...
2025-06-30 18:02:20,840 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-30 18:04:23,873 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-30 18:04:23,878 | WARNING | File already exists, skipping write.
2025-06-30 18:04:23,880 | INFO | Table name extracted: sales_data_sample
2025-06-30 18:04:23,885 | INFO | Processing CSV...
2025-06-30 18:04:25,031 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-30 18:04:25,085 | INFO | Available tables: ['sales_data', 'your_file_data', 'mail_data_(1)', 'mail_data_1', 'sales_data_sample']
2025-06-30 18:04:25,088 | INFO | Received query: where order with order number 10180 is placed?
2025-06-30 18:04:25,091 | INFO | Last uploaded file type: csv
2025-06-30 18:04:25,093 | INFO | Routed to: structured
2025-06-30 18:04:25,103 | INFO | Using table name: sales_data_sample
2025-06-30 18:04:27,916 | INFO | SQL Query: SELECT COUNTRY, CITY, ADDRESSLINE1, ADDRESSLINE2 FROM sales_data_sample WHERE ORDERNUMBER = 10180;
2025-06-30 18:04:30,230 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-30 18:04:30,235 | WARNING | File already exists, skipping write.
2025-06-30 18:04:30,239 | INFO | Table name extracted: sales_data_sample
2025-06-30 18:04:30,243 | INFO | Processing CSV...
2025-06-30 18:04:31,159 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-30 18:05:45,544 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-30 18:05:45,548 | WARNING | File already exists, skipping write.
2025-06-30 18:05:45,550 | INFO | Table name extracted: sales_data_sample
2025-06-30 18:05:45,553 | INFO | Processing CSV...
2025-06-30 18:05:47,772 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-06-30 18:09:18,878 | INFO | Starting upload for file: sales_data_sample.csv
2025-06-30 18:09:18,882 | WARNING | File already exists, skipping write.
2025-06-30 18:09:18,885 | INFO | Table name extracted: sales_data_sample
2025-06-30 18:09:18,888 | INFO | Processing CSV...
2025-06-30 18:09:19,779 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:27:35,568 | INFO | Creating Qdrant collection...
2025-07-07 17:27:36,397 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:27:36,795 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:27:36,795 | INFO | Qdrant collection created.
2025-07-07 17:28:15,743 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:28:15,759 | WARNING | File already exists, skipping write.
2025-07-07 17:28:15,759 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:28:15,759 | INFO | Processing CSV...
2025-07-07 17:28:16,893 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:29:21,592 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:29:21,592 | WARNING | File already exists, skipping write.
2025-07-07 17:29:21,592 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:29:21,592 | INFO | Processing CSV...
2025-07-07 17:29:22,375 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:29:22,508 | ERROR | Query error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 81, in handle_query
    tool_call = decide_function_call(query, file_type, table_name)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: GenerativeModel.generate_content() got an unexpected keyword argument 'tool_choice'
2025-07-07 17:29:24,826 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:29:24,826 | WARNING | File already exists, skipping write.
2025-07-07 17:29:24,826 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:29:24,826 | INFO | Processing CSV...
2025-07-07 17:29:25,657 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:31:16,229 | INFO | Creating Qdrant collection...
2025-07-07 17:31:17,070 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:31:17,477 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:31:17,492 | INFO | Qdrant collection created.
2025-07-07 17:31:32,411 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:31:32,411 | WARNING | File already exists, skipping write.
2025-07-07 17:31:32,411 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:31:32,411 | INFO | Processing CSV...
2025-07-07 17:31:33,077 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:31:57,545 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:31:57,545 | WARNING | File already exists, skipping write.
2025-07-07 17:31:57,545 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:31:57,545 | INFO | Processing CSV...
2025-07-07 17:31:57,816 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:31:57,829 | ERROR | Query error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 81, in handle_query
    tool_call = decide_function_call(query, file_type, table_name)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: GenerativeModel.generate_content() got an unexpected keyword argument 'tool_choice'
2025-07-07 17:31:59,997 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:32:00,000 | WARNING | File already exists, skipping write.
2025-07-07 17:32:00,000 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:32:00,000 | INFO | Processing CSV...
2025-07-07 17:32:00,313 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:37:25,733 | INFO | Creating Qdrant collection...
2025-07-07 17:37:26,665 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:37:27,050 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:37:27,058 | INFO | Qdrant collection created.
2025-07-07 17:37:52,042 | INFO | Creating Qdrant collection...
2025-07-07 17:37:52,844 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:37:53,217 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:37:53,225 | INFO | Qdrant collection created.
2025-07-07 17:38:27,400 | INFO | Creating Qdrant collection...
2025-07-07 17:38:28,219 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:38:28,685 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:38:28,693 | INFO | Qdrant collection created.
2025-07-07 17:38:46,715 | INFO | Creating Qdrant collection...
2025-07-07 17:38:48,040 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:38:48,417 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:38:48,426 | INFO | Qdrant collection created.
2025-07-07 17:39:45,749 | INFO | Creating Qdrant collection...
2025-07-07 17:39:46,550 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:39:46,922 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:39:46,922 | INFO | Qdrant collection created.
2025-07-07 17:40:21,965 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:40:21,965 | WARNING | File already exists, skipping write.
2025-07-07 17:40:21,965 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:40:21,965 | INFO | Processing CSV...
2025-07-07 17:40:22,482 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:40:53,532 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:40:53,549 | WARNING | File already exists, skipping write.
2025-07-07 17:40:53,549 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:40:53,549 | INFO | Processing CSV...
2025-07-07 17:40:53,899 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:40:57,065 | ERROR | Query error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 81, in handle_query
    tool_call = decide_function_call(query, file_type, table_name)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'string'
2025-07-07 17:40:59,365 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:40:59,366 | WARNING | File already exists, skipping write.
2025-07-07 17:40:59,366 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:40:59,366 | INFO | Processing CSV...
2025-07-07 17:40:59,683 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:43:56,710 | INFO | Creating Qdrant collection...
2025-07-07 17:43:57,721 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:43:58,133 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:43:58,133 | INFO | Qdrant collection created.
2025-07-07 17:44:09,696 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:44:09,699 | WARNING | File already exists, skipping write.
2025-07-07 17:44:09,699 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:44:09,699 | INFO | Processing CSV...
2025-07-07 17:44:10,087 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:44:34,468 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:44:34,472 | WARNING | File already exists, skipping write.
2025-07-07 17:44:34,472 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:44:34,472 | INFO | Processing CSV...
2025-07-07 17:44:34,717 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:44:34,816 | ERROR | Query error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 81, in handle_query
    tool_call = decide_function_call(query, file_type, table_name)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'string'
2025-07-07 17:44:36,883 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:44:36,883 | WARNING | File already exists, skipping write.
2025-07-07 17:44:36,898 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:44:36,900 | INFO | Processing CSV...
2025-07-07 17:44:37,133 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:48:32,672 | INFO | Creating Qdrant collection...
2025-07-07 17:48:33,487 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:48:33,871 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-07 17:48:33,888 | INFO | Qdrant collection created.
2025-07-07 17:49:24,669 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:49:24,686 | WARNING | File already exists, skipping write.
2025-07-07 17:49:24,686 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:49:24,690 | INFO | Processing CSV...
2025-07-07 17:49:25,136 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:49:45,469 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:49:45,469 | WARNING | File already exists, skipping write.
2025-07-07 17:49:45,469 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:49:45,469 | INFO | Processing CSV...
2025-07-07 17:49:45,719 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-07 17:49:45,792 | ERROR | Query error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 81, in handle_query
    tool_call = decide_function_call(query, file_type, table_name)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'string'
2025-07-07 17:49:47,886 | INFO | Starting upload for file: sales_data_sample.csv
2025-07-07 17:49:47,886 | WARNING | File already exists, skipping write.
2025-07-07 17:49:47,886 | INFO | Table name extracted: sales_data_sample
2025-07-07 17:49:47,903 | INFO | Processing CSV...
2025-07-07 17:49:48,204 | INFO | CSV uploaded and indexed in SQLite as 'sales_data_sample'.
2025-07-16 17:20:57,066 | INFO | Creating Qdrant collection...
2025-07-16 17:20:58,085 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:20:58,463 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:20:58,463 | INFO | Qdrant collection created.
2025-07-16 17:26:02,937 | INFO | Creating Qdrant collection...
2025-07-16 17:26:03,781 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:26:04,202 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:26:04,218 | INFO | Qdrant collection created.
2025-07-16 17:26:33,441 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-16 17:26:33,457 | INFO | File saved at: uploads/Ecommerce_Data_Complete.xlsx
2025-07-16 17:26:33,458 | INFO | Processing Excel file with multiple sheets...
2025-07-16 17:26:34,791 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-16 17:26:34,851 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-16 17:26:34,887 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-16 17:26:34,943 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-16 17:26:34,985 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-16 17:26:34,985 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-16 17:27:32,041 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-16 17:27:32,041 | WARNING | File already exists, skipping write.
2025-07-16 17:27:32,041 | INFO | Processing Excel file with multiple sheets...
2025-07-16 17:27:32,160 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-16 17:27:32,241 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-16 17:27:32,292 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-16 17:27:32,352 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-16 17:27:32,408 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-16 17:27:32,408 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-16 17:27:32,428 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 51, in decide_function_call
    prompt = data["prompt"]
             ~~~~^^^^^^^^^^
TypeError: list indices must be integers or slices, not str
2025-07-16 17:27:34,526 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-16 17:27:34,526 | WARNING | File already exists, skipping write.
2025-07-16 17:27:34,526 | INFO | Processing Excel file with multiple sheets...
2025-07-16 17:27:34,658 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-16 17:27:34,725 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-16 17:27:34,783 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-16 17:27:34,931 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-16 17:27:35,082 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-16 17:27:35,082 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-16 17:38:42,708 | INFO | Creating Qdrant collection...
2025-07-16 17:38:44,041 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:38:44,433 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:38:44,433 | INFO | Qdrant collection created.
2025-07-16 17:39:06,903 | INFO | Creating Qdrant collection...
2025-07-16 17:39:08,204 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:39:08,604 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-16 17:39:08,604 | INFO | Qdrant collection created.
2025-07-16 17:39:23,314 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-16 17:39:23,314 | WARNING | File already exists, skipping write.
2025-07-16 17:39:23,314 | INFO | Processing Excel file with multiple sheets...
2025-07-16 17:39:24,165 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-16 17:39:24,249 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-16 17:39:24,317 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-16 17:39:24,388 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-16 17:39:24,530 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-16 17:39:24,530 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-16 17:39:43,139 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-16 17:39:43,148 | WARNING | File already exists, skipping write.
2025-07-16 17:39:43,148 | INFO | Processing Excel file with multiple sheets...
2025-07-16 17:39:43,370 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-16 17:39:43,488 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-16 17:39:43,554 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-16 17:39:43,634 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-16 17:39:43,716 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-16 17:39:43,716 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-16 17:40:47,131 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'object'
2025-07-16 17:40:49,531 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-16 17:40:49,531 | WARNING | File already exists, skipping write.
2025-07-16 17:40:49,531 | INFO | Processing Excel file with multiple sheets...
2025-07-16 17:40:49,697 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-16 17:40:49,788 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-16 17:40:49,876 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-16 17:40:49,981 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-16 17:40:50,181 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-16 17:40:50,181 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 15:56:13,102 | INFO | Creating Qdrant collection...
2025-07-17 15:56:13,964 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 15:56:14,411 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 15:56:14,411 | INFO | Qdrant collection created.
2025-07-17 15:59:14,062 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 15:59:14,065 | WARNING | File already exists, skipping write.
2025-07-17 15:59:14,065 | INFO | Processing Excel file with multiple sheets...
2025-07-17 15:59:15,548 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 15:59:15,620 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 15:59:15,693 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 15:59:15,756 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 15:59:15,822 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 15:59:15,823 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:00:15,165 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:00:15,165 | WARNING | File already exists, skipping write.
2025-07-17 16:00:15,165 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:00:15,337 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:00:15,426 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:00:15,485 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:00:15,566 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:00:15,639 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:00:15,640 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:00:15,707 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'object'
2025-07-17 16:00:18,165 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:00:18,165 | WARNING | File already exists, skipping write.
2025-07-17 16:00:18,165 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:00:18,305 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:00:18,385 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:00:18,437 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:00:18,517 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:00:18,602 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:00:18,603 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:15:45,060 | INFO | Creating Qdrant collection...
2025-07-17 16:15:45,893 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:15:46,273 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:15:46,277 | INFO | Qdrant collection created.
2025-07-17 16:16:56,023 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:16:56,023 | WARNING | File already exists, skipping write.
2025-07-17 16:16:56,023 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:16:57,411 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:16:57,491 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:16:57,563 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:16:57,627 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:16:57,710 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:16:57,710 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:17:19,972 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:17:19,972 | WARNING | File already exists, skipping write.
2025-07-17 16:17:19,972 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:17:20,131 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:17:20,194 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:17:20,261 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:17:20,327 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:17:20,393 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:17:20,393 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:17:20,460 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Parameter to CopyFrom() must be instance of same class: expected <class 'Schema'> got <class 'dict'>.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in to_proto
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in <dictcomp>
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'string'
2025-07-17 16:17:22,572 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:17:22,572 | WARNING | File already exists, skipping write.
2025-07-17 16:17:22,572 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:17:22,727 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:17:22,801 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:17:22,860 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:17:22,944 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:17:23,045 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:17:23,045 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:22:48,758 | INFO | Creating Qdrant collection...
2025-07-17 16:22:49,603 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:22:49,997 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:22:50,000 | INFO | Qdrant collection created.
2025-07-17 16:24:35,727 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:24:35,727 | WARNING | File already exists, skipping write.
2025-07-17 16:24:35,727 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:24:36,645 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:24:36,731 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:24:36,810 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:24:36,864 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:24:36,930 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:24:36,930 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:25:25,411 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:25:25,411 | WARNING | File already exists, skipping write.
2025-07-17 16:25:25,411 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:25:25,594 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:25:25,681 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:25:25,755 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:25:25,831 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:25:25,905 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:25:25,906 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:25:25,980 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Parameter to CopyFrom() must be instance of same class: expected <class 'Schema'> got <class 'dict'>.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in to_proto
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in <dictcomp>
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'array'
2025-07-17 16:25:28,094 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:25:28,094 | WARNING | File already exists, skipping write.
2025-07-17 16:25:28,094 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:25:28,251 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:25:28,324 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:25:28,380 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:25:28,448 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:25:28,514 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:25:28,526 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:30:21,030 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:30:21,030 | WARNING | File already exists, skipping write.
2025-07-17 16:30:21,030 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:30:21,186 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:30:21,262 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:30:21,317 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:30:21,382 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:30:21,450 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:30:21,456 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:30:42,329 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:30:42,329 | WARNING | File already exists, skipping write.
2025-07-17 16:30:42,329 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:30:42,470 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:30:42,533 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:30:42,609 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:30:42,667 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:30:42,733 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:30:42,746 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:30:42,789 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Parameter to CopyFrom() must be instance of same class: expected <class 'Schema'> got <class 'dict'>.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in to_proto
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in <dictcomp>
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'LIST'
2025-07-17 16:30:44,873 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:30:44,873 | WARNING | File already exists, skipping write.
2025-07-17 16:30:44,873 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:30:45,032 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:30:45,103 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:30:45,168 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:30:45,236 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:30:45,330 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:30:45,334 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:45:02,532 | INFO | Creating Qdrant collection...
2025-07-17 16:45:03,378 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:45:03,771 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:45:03,771 | INFO | Qdrant collection created.
2025-07-17 16:45:20,002 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:45:20,002 | WARNING | File already exists, skipping write.
2025-07-17 16:45:20,002 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:45:21,254 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:45:21,337 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:45:21,404 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:45:21,471 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:45:21,540 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:45:21,540 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:45:39,234 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:45:39,234 | WARNING | File already exists, skipping write.
2025-07-17 16:45:39,234 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:45:39,403 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:45:39,488 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:45:39,540 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:45:39,621 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:45:39,690 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:45:39,691 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:45:41,500 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 * GenerateContentRequest.tools[0].function_declarations[0].parameters.properties: only allowed for OBJECT type
* GenerateContentRequest.tools[0].function_declarations[0].parameters.required: only allowed for OBJECT type
* GenerateContentRequest.tools[0].function_declarations[1].parameters.properties: only allowed for OBJECT type
* GenerateContentRequest.tools[0].function_declarations[1].parameters.required: only allowed for OBJECT type
* GenerateContentRequest.tools[0].function_declarations[2].parameters.properties: only allowed for OBJECT type

2025-07-17 16:45:43,836 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:45:43,836 | WARNING | File already exists, skipping write.
2025-07-17 16:45:43,836 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:45:43,969 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:45:44,050 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:45:44,110 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:45:44,171 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:45:44,238 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:45:44,239 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:48:19,731 | INFO | Creating Qdrant collection...
2025-07-17 16:48:20,530 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:48:20,893 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:48:20,893 | INFO | Qdrant collection created.
2025-07-17 16:48:45,105 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:48:45,105 | WARNING | File already exists, skipping write.
2025-07-17 16:48:45,105 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:48:46,038 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:48:46,123 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:48:46,237 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:48:46,370 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:48:46,424 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:48:46,438 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:49:18,254 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:49:18,254 | WARNING | File already exists, skipping write.
2025-07-17 16:49:18,254 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:49:18,412 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:49:18,475 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:49:18,541 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:49:18,606 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:49:18,658 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:49:18,670 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:49:18,725 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'object'
2025-07-17 16:49:20,971 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:49:20,971 | WARNING | File already exists, skipping write.
2025-07-17 16:49:20,971 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:49:21,134 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:49:21,218 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:49:21,277 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:49:21,340 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:49:21,409 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:49:21,410 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:56:50,827 | INFO | Creating Qdrant collection...
2025-07-17 16:56:51,658 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:56:52,056 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 16:56:52,056 | INFO | Qdrant collection created.
2025-07-17 16:58:09,527 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:58:09,527 | WARNING | File already exists, skipping write.
2025-07-17 16:58:09,527 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:58:10,810 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:58:10,893 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:58:10,997 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:58:11,062 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:58:11,144 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:58:11,145 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:58:24,258 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:58:24,258 | WARNING | File already exists, skipping write.
2025-07-17 16:58:24,258 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:58:24,415 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:58:24,506 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:58:24,598 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:58:24,687 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:58:24,761 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:58:24,762 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 16:58:24,814 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 36, in to_proto
    return self._descriptor(**value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Protocol message Schema has no "type" field.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 59, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 145, in _prepare_request
    tools_lib = self._get_tools_lib(tools)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 182, in _get_tools_lib
    return content_types.to_function_library(tools)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 917, in to_function_library
    return FunctionLibrary(tools=lib)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 855, in __init__
    tools = _make_tools(tools)
            ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in _make_tools
    tools = [_make_tool(t) for t in tools]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 898, in <listcomp>
    tools = [_make_tool(t) for t in tools]
             ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\types\content_types.py", line 823, in _make_tool
    return Tool(function_declarations=[protos.FunctionDeclaration(**fd)])
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in to_proto
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 233, in <dictcomp>
    return {k: self.to_proto(recursive_type, v) for k, v in value.items()}
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\message.py", line 46, in to_proto
    return self._wrapper(value)._pb
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\message.py", line 728, in __init__
    pb_value = marshal.to_proto(pb_type, value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\marshal.py", line 235, in to_proto
    pb_value = self.get_rule(proto_type=proto_type).to_proto(value)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\rules\enums.py", line 56, in to_proto
    return self._enum[value].value
           ~~~~~~~~~~^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 792, in __getitem__
    return cls._member_map_[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'string'
2025-07-17 16:58:26,953 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 16:58:26,959 | WARNING | File already exists, skipping write.
2025-07-17 16:58:26,962 | INFO | Processing Excel file with multiple sheets...
2025-07-17 16:58:27,214 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 16:58:27,300 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 16:58:27,372 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 16:58:27,453 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 16:58:27,532 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 16:58:27,532 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 17:03:02,204 | INFO | Creating Qdrant collection...
2025-07-17 17:03:03,045 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:03:03,453 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:03:03,457 | INFO | Qdrant collection created.
2025-07-17 17:04:52,078 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 17:04:52,078 | WARNING | File already exists, skipping write.
2025-07-17 17:04:52,078 | INFO | Processing Excel file with multiple sheets...
2025-07-17 17:04:53,128 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 17:04:53,195 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 17:04:53,264 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 17:04:53,321 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 17:04:53,382 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 17:04:53,382 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 17:05:18,610 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 17:05:18,610 | WARNING | File already exists, skipping write.
2025-07-17 17:05:18,610 | INFO | Processing Excel file with multiple sheets...
2025-07-17 17:05:18,728 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 17:05:18,805 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 17:05:18,856 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 17:05:18,904 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 17:05:18,967 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 17:05:18,968 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 17:05:20,193 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 78, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 63, in decide_function_call
    return response.tool_calls[0]
           ^^^^^^^^^^^^^^^^^^^
AttributeError: 'GenerateContentResponse' object has no attribute 'tool_calls'
2025-07-17 17:05:22,255 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-17 17:05:22,256 | WARNING | File already exists, skipping write.
2025-07-17 17:05:22,256 | INFO | Processing Excel file with multiple sheets...
2025-07-17 17:05:22,424 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details'
2025-07-17 17:05:22,599 | INFO | Inserted sheet 'Order_Details' as table 'order_details'
2025-07-17 17:05:22,746 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog'
2025-07-17 17:05:22,798 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info'
2025-07-17 17:05:22,865 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions'
2025-07-17 17:05:22,865 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-17 17:08:19,281 | INFO | Creating Qdrant collection...
2025-07-17 17:08:20,079 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:08:20,436 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:08:20,436 | INFO | Qdrant collection created.
2025-07-17 17:09:08,046 | INFO | Creating Qdrant collection...
2025-07-17 17:09:08,870 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:09:09,457 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:09:09,460 | INFO | Qdrant collection created.
2025-07-17 17:11:20,100 | INFO | Creating Qdrant collection...
2025-07-17 17:11:20,872 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:11:21,256 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:11:21,258 | INFO | Qdrant collection created.
2025-07-17 17:11:40,098 | INFO | Creating Qdrant collection...
2025-07-17 17:11:40,939 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:11:41,375 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:11:41,378 | INFO | Qdrant collection created.
2025-07-17 17:12:18,211 | INFO | Creating Qdrant collection...
2025-07-17 17:12:18,991 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:12:19,381 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:12:19,384 | INFO | Qdrant collection created.
2025-07-17 17:12:38,047 | INFO | Creating Qdrant collection...
2025-07-17 17:12:38,839 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:12:39,212 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:12:39,216 | INFO | Qdrant collection created.
2025-07-17 17:15:21,670 | INFO | Creating Qdrant collection...
2025-07-17 17:15:22,465 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:15:22,849 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:15:22,852 | INFO | Qdrant collection created.
2025-07-17 17:18:38,551 | INFO | Creating Qdrant collection...
2025-07-17 17:18:39,413 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:18:39,817 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:18:39,817 | INFO | Qdrant collection created.
2025-07-17 17:36:28,891 | INFO | Creating Qdrant collection...
2025-07-17 17:36:29,696 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:36:30,096 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:36:30,100 | INFO | Qdrant collection created.
2025-07-17 17:36:49,903 | INFO | Creating Qdrant collection...
2025-07-17 17:36:50,724 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:36:51,100 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:36:51,103 | INFO | Qdrant collection created.
2025-07-17 17:37:50,647 | INFO | Creating Qdrant collection...
2025-07-17 17:37:51,458 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:37:51,972 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:37:51,975 | INFO | Qdrant collection created.
2025-07-17 17:38:24,741 | INFO | Creating Qdrant collection...
2025-07-17 17:38:25,608 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:38:26,004 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:38:26,008 | INFO | Qdrant collection created.
2025-07-17 17:38:53,701 | INFO | Creating Qdrant collection...
2025-07-17 17:38:54,506 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:38:54,876 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:38:54,882 | INFO | Qdrant collection created.
2025-07-17 17:39:13,588 | INFO | Creating Qdrant collection...
2025-07-17 17:39:14,390 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:39:14,787 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:39:14,796 | INFO | Qdrant collection created.
2025-07-17 17:40:04,100 | INFO | Creating Qdrant collection...
2025-07-17 17:40:04,974 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:40:05,397 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:40:05,403 | INFO | Qdrant collection created.
2025-07-17 17:40:31,386 | INFO | Creating Qdrant collection...
2025-07-17 17:40:32,395 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:40:32,781 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:40:32,785 | INFO | Qdrant collection created.
2025-07-17 17:43:32,064 | INFO | Creating Qdrant collection...
2025-07-17 17:43:32,903 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:43:33,284 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:43:33,286 | INFO | Qdrant collection created.
2025-07-17 17:43:53,855 | INFO | Creating Qdrant collection...
2025-07-17 17:43:54,709 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:43:55,100 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-17 17:43:55,103 | INFO | Qdrant collection created.
2025-07-18 13:22:32,187 | INFO | Creating Qdrant collection...
2025-07-18 13:22:32,994 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 13:22:33,369 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 13:22:33,369 | INFO | Qdrant collection created.
2025-07-18 15:09:23,727 | INFO | Creating Qdrant collection...
2025-07-18 15:09:24,565 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:09:24,935 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:09:24,943 | INFO | Qdrant collection created.
2025-07-18 15:10:01,036 | INFO | Creating Qdrant collection...
2025-07-18 15:10:01,819 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:10:02,185 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:10:02,185 | INFO | Qdrant collection created.
2025-07-18 15:10:21,037 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:10:21,037 | WARNING | File already exists, skipping write.
2025-07-18 15:10:21,037 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:10:22,506 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.25s
2025-07-18 15:10:22,622 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.10s
2025-07-18 15:10:22,709 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.09s
2025-07-18 15:10:22,784 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.08s
2025-07-18 15:10:22,840 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.06s
2025-07-18 15:10:22,840 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:11:24,635 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:11:24,635 | WARNING | File already exists, skipping write.
2025-07-18 15:11:24,635 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:11:24,885 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 15:11:24,957 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 15:11:25,009 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-18 15:11:25,068 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.06s
2025-07-18 15:11:25,123 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-18 15:11:25,123 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:11:29,342 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:11:29,342 | WARNING | File already exists, skipping write.
2025-07-18 15:11:29,350 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:11:29,507 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 15:11:29,578 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 15:11:29,652 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.07s
2025-07-18 15:11:29,709 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.06s
2025-07-18 15:11:29,773 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.06s
2025-07-18 15:11:29,773 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:13:32,353 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:13:32,353 | WARNING | File already exists, skipping write.
2025-07-18 15:13:32,353 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:13:32,620 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 15:13:32,693 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 15:13:32,761 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.07s
2025-07-18 15:13:32,819 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.06s
2025-07-18 15:13:32,878 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.06s
2025-07-18 15:13:32,878 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:13:36,254 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:13:36,254 | WARNING | File already exists, skipping write.
2025-07-18 15:13:36,254 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:13:36,456 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.10s
2025-07-18 15:13:36,535 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 15:13:36,594 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.06s
2025-07-18 15:13:36,644 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-18 15:13:36,726 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.08s
2025-07-18 15:13:36,726 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:17:12,531 | INFO | Creating Qdrant collection...
2025-07-18 15:17:13,347 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:17:13,723 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:17:13,729 | INFO | Qdrant collection created.
2025-07-18 15:21:04,157 | INFO | Creating Qdrant collection...
2025-07-18 15:21:04,948 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:21:05,341 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:21:05,341 | INFO | Qdrant collection created.
2025-07-18 15:34:53,914 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:34:53,930 | WARNING | File already exists, skipping write.
2025-07-18 15:34:53,930 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:34:55,680 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.08s
2025-07-18 15:34:55,765 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.09s
2025-07-18 15:34:55,830 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.06s
2025-07-18 15:34:55,914 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.08s
2025-07-18 15:34:56,013 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.10s
2025-07-18 15:34:56,021 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:35:20,676 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:35:20,676 | WARNING | File already exists, skipping write.
2025-07-18 15:35:20,676 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:35:20,837 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 15:35:20,913 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.08s
2025-07-18 15:35:20,963 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-18 15:35:21,025 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.06s
2025-07-18 15:35:21,085 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.06s
2025-07-18 15:35:21,085 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:35:23,539 | WARNING | Gemini response: ```json
{'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
```
2025-07-18 15:35:25,613 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:35:25,613 | WARNING | File already exists, skipping write.
2025-07-18 15:35:25,613 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:35:25,763 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 15:35:25,834 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 15:35:25,885 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-18 15:35:25,952 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.07s
2025-07-18 15:35:26,013 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.06s
2025-07-18 15:35:26,013 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:37:50,115 | INFO | Creating Qdrant collection...
2025-07-18 15:37:50,939 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:37:51,356 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:37:51,356 | INFO | Qdrant collection created.
2025-07-18 15:38:57,182 | INFO | Creating Qdrant collection...
2025-07-18 15:38:57,999 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:38:58,365 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:38:58,373 | INFO | Qdrant collection created.
2025-07-18 15:39:15,215 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:39:15,215 | WARNING | File already exists, skipping write.
2025-07-18 15:39:15,215 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:39:16,314 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.10s
2025-07-18 15:39:16,385 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 15:39:16,454 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.07s
2025-07-18 15:39:16,519 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.07s
2025-07-18 15:39:16,582 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.06s
2025-07-18 15:39:16,582 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:39:27,165 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:39:27,165 | WARNING | File already exists, skipping write.
2025-07-18 15:39:27,165 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:39:27,365 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.12s
2025-07-18 15:39:27,523 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.16s
2025-07-18 15:39:27,586 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.06s
2025-07-18 15:39:27,648 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.06s
2025-07-18 15:39:27,709 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.06s
2025-07-18 15:39:27,712 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:39:30,264 | WARNING | Gemini response: ```json
{
  "function_call": {
    "name": "get_order_details",
    "arguments": {
      "columns": [
        "Total Price",
        "Sale Date"
      ],
      "table_name": "Sales_Details"
    }
  }
}
```

2025-07-18 15:39:32,357 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:39:32,357 | WARNING | File already exists, skipping write.
2025-07-18 15:39:32,357 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:39:32,532 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.08s
2025-07-18 15:39:32,615 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.08s
2025-07-18 15:39:32,673 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-18 15:39:32,737 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.06s
2025-07-18 15:39:32,802 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.07s
2025-07-18 15:39:32,805 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:42:06,884 | INFO | Creating Qdrant collection...
2025-07-18 15:42:07,701 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:42:08,124 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:42:08,124 | INFO | Qdrant collection created.
2025-07-18 15:43:35,564 | INFO | Creating Qdrant collection...
2025-07-18 15:43:36,392 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:43:36,768 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:43:36,768 | INFO | Qdrant collection created.
2025-07-18 15:43:51,300 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:43:51,300 | WARNING | File already exists, skipping write.
2025-07-18 15:43:51,300 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:43:52,268 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.08s
2025-07-18 15:43:52,353 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.09s
2025-07-18 15:43:52,406 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.04s
2025-07-18 15:43:52,474 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.07s
2025-07-18 15:43:52,521 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-18 15:43:52,521 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:44:02,701 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:44:02,701 | WARNING | File already exists, skipping write.
2025-07-18 15:44:02,701 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:44:02,849 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.06s
2025-07-18 15:44:02,918 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 15:44:02,966 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-18 15:44:03,023 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-18 15:44:03,089 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.07s
2025-07-18 15:44:03,089 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:44:05,884 | WARNING | Gemini response: ```json
{
  "function_call": {
    "name": "get_order_details",
    "arguments": {
      "columns": [
        "Total Price",
        "Sale Date"
      ],
      "table_name": "Sales_Details"
    }
  }
}
```

2025-07-18 15:44:09,468 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 15:44:09,468 | WARNING | File already exists, skipping write.
2025-07-18 15:44:09,468 | INFO | Processing Excel file with multiple sheets...
2025-07-18 15:44:09,641 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 15:44:09,705 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.06s
2025-07-18 15:44:09,768 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.06s
2025-07-18 15:44:09,821 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-18 15:44:09,890 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.07s
2025-07-18 15:44:09,890 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 15:46:46,236 | INFO | Creating Qdrant collection...
2025-07-18 15:46:47,028 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:46:47,394 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 15:46:47,394 | INFO | Qdrant collection created.
2025-07-18 16:07:45,185 | INFO | Creating Qdrant collection...
2025-07-18 16:07:46,053 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:07:46,430 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:07:46,438 | INFO | Qdrant collection created.
2025-07-18 16:08:46,952 | INFO | Creating Qdrant collection...
2025-07-18 16:08:47,937 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:08:48,333 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:08:48,344 | INFO | Qdrant collection created.
2025-07-18 16:09:34,421 | INFO | Creating Qdrant collection...
2025-07-18 16:09:35,262 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:09:35,729 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:09:35,729 | INFO | Qdrant collection created.
2025-07-18 16:15:32,328 | INFO | Creating Qdrant collection...
2025-07-18 16:15:33,253 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:15:33,660 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:15:33,660 | INFO | Qdrant collection created.
2025-07-18 16:58:29,425 | INFO | Creating Qdrant collection...
2025-07-18 16:58:30,241 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:58:30,628 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 16:58:30,643 | INFO | Qdrant collection created.
2025-07-18 17:13:15,905 | INFO | Creating Qdrant collection...
2025-07-18 17:13:16,737 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:13:17,175 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:13:17,175 | INFO | Qdrant collection created.
2025-07-18 17:15:50,611 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 17:15:50,611 | WARNING | File already exists, skipping write.
2025-07-18 17:15:50,611 | INFO | Processing Excel file with multiple sheets...
2025-07-18 17:15:52,591 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.26s
2025-07-18 17:15:52,677 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.09s
2025-07-18 17:15:52,745 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.07s
2025-07-18 17:15:52,811 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.07s
2025-07-18 17:15:52,895 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.08s
2025-07-18 17:15:52,895 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 17:17:42,397 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 17:17:42,397 | WARNING | File already exists, skipping write.
2025-07-18 17:17:42,397 | INFO | Processing Excel file with multiple sheets...
2025-07-18 17:17:42,829 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.15s
2025-07-18 17:17:43,012 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.18s
2025-07-18 17:17:43,102 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.09s
2025-07-18 17:17:43,213 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.11s
2025-07-18 17:17:43,317 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.10s
2025-07-18 17:17:43,329 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 17:17:46,412 | WARNING | Gemini response: ```json
{
  "function_call": {
    "name": "get_order_details",
    "arguments": {
      "columns": [
        "Total Price",
        "Sale Date"
      ],
      "table_name": "Sales_Details"
    }
  }
}
```

2025-07-18 17:17:46,412 | WARNING | No tool call made by Gemini.
2025-07-18 17:17:48,545 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 17:17:48,549 | WARNING | File already exists, skipping write.
2025-07-18 17:17:48,549 | INFO | Processing Excel file with multiple sheets...
2025-07-18 17:17:48,978 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.17s
2025-07-18 17:17:49,113 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-07-18 17:17:49,180 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.07s
2025-07-18 17:17:49,265 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.08s
2025-07-18 17:17:49,373 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.11s
2025-07-18 17:17:49,377 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 17:24:15,294 | INFO | Creating Qdrant collection...
2025-07-18 17:24:16,144 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:24:16,528 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:24:16,534 | INFO | Qdrant collection created.
2025-07-18 17:24:46,494 | INFO | Creating Qdrant collection...
2025-07-18 17:24:47,326 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:24:47,711 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:24:47,717 | INFO | Qdrant collection created.
2025-07-18 17:25:37,250 | INFO | Creating Qdrant collection...
2025-07-18 17:25:38,097 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:25:38,491 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-18 17:25:38,498 | INFO | Qdrant collection created.
2025-07-18 17:25:56,583 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 17:25:56,583 | WARNING | File already exists, skipping write.
2025-07-18 17:25:56,583 | INFO | Processing Excel file with multiple sheets...
2025-07-18 17:25:57,817 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.12s
2025-07-18 17:25:57,902 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.09s
2025-07-18 17:25:57,968 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.06s
2025-07-18 17:25:58,054 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.08s
2025-07-18 17:25:58,141 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.09s
2025-07-18 17:25:58,145 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 17:26:07,666 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 17:26:07,666 | WARNING | File already exists, skipping write.
2025-07-18 17:26:07,666 | INFO | Processing Excel file with multiple sheets...
2025-07-18 17:26:07,835 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 17:26:07,903 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 17:26:07,972 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.06s
2025-07-18 17:26:08,037 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.07s
2025-07-18 17:26:08,103 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.07s
2025-07-18 17:26:08,103 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-18 17:26:09,666 | WARNING | Gemini response: ```json
{
  "function_call": {
    "name": "get_order_details",
    "arguments": {
      "columns": [
        "Total Price",
        "Sale Date"
      ],
      "table_name": "Sales_Details"
    }
  }
}
```

2025-07-18 17:26:09,683 | WARNING | No tool call made by Gemini.
2025-07-18 17:26:11,749 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-18 17:26:11,749 | WARNING | File already exists, skipping write.
2025-07-18 17:26:11,749 | INFO | Processing Excel file with multiple sheets...
2025-07-18 17:26:11,919 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-18 17:26:11,988 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-18 17:26:12,053 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.06s
2025-07-18 17:26:12,104 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-18 17:26:12,184 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.08s
2025-07-18 17:26:12,186 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:00:41,579 | INFO | Creating Qdrant collection...
2025-07-21 17:00:42,424 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:00:42,816 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:00:42,816 | INFO | Qdrant collection created.
2025-07-21 17:01:54,886 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:01:54,886 | WARNING | File already exists, skipping write.
2025-07-21 17:01:54,903 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:01:56,420 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.20s
2025-07-21 17:01:56,470 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-07-21 17:01:56,520 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.03s
2025-07-21 17:01:56,569 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:01:56,619 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:01:56,619 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:03:38,287 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:03:38,287 | WARNING | File already exists, skipping write.
2025-07-21 17:03:38,287 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:03:38,405 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.05s
2025-07-21 17:03:38,471 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-21 17:03:38,520 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-21 17:03:38,571 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:03:38,620 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:03:38,620 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:03:41,737 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-21 17:03:43,788 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:03:43,788 | WARNING | File already exists, skipping write.
2025-07-21 17:03:43,788 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:03:43,903 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.05s
2025-07-21 17:03:43,954 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-07-21 17:03:44,005 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-21 17:03:44,054 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:03:44,104 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:03:44,104 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:09:21,690 | INFO | Creating Qdrant collection...
2025-07-21 17:09:22,521 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:09:22,983 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:09:22,983 | INFO | Qdrant collection created.
2025-07-21 17:10:48,685 | INFO | Creating Qdrant collection...
2025-07-21 17:10:49,549 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:10:49,944 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:10:49,947 | INFO | Qdrant collection created.
2025-07-21 17:14:39,959 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:14:39,959 | WARNING | File already exists, skipping write.
2025-07-21 17:14:39,959 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:14:40,792 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.08s
2025-07-21 17:14:40,859 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-21 17:14:40,909 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-21 17:14:40,959 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:14:41,009 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:14:41,027 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:14:58,742 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:14:58,742 | WARNING | File already exists, skipping write.
2025-07-21 17:14:58,742 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:14:58,859 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-21 17:14:58,909 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-07-21 17:14:58,959 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-21 17:14:59,009 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:14:59,060 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:14:59,060 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:15:00,542 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-21 17:15:00,542 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-21 17:15:02,581 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:15:02,581 | WARNING | File already exists, skipping write.
2025-07-21 17:15:02,581 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:15:02,709 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-21 17:15:02,759 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-07-21 17:15:02,792 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.03s
2025-07-21 17:15:02,842 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.03s
2025-07-21 17:15:02,893 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:15:02,893 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:19:31,562 | INFO | Creating Qdrant collection...
2025-07-21 17:19:32,408 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:19:32,799 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:19:32,814 | INFO | Qdrant collection created.
2025-07-21 17:19:54,925 | INFO | Creating Qdrant collection...
2025-07-21 17:19:55,741 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:19:56,131 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:19:56,131 | INFO | Qdrant collection created.
2025-07-21 17:20:22,978 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:20:22,987 | WARNING | File already exists, skipping write.
2025-07-21 17:20:22,988 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:20:23,895 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.12s
2025-07-21 17:20:23,961 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-21 17:20:24,012 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-21 17:20:24,061 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:20:24,095 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.03s
2025-07-21 17:20:24,111 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:20:34,593 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:20:34,593 | WARNING | File already exists, skipping write.
2025-07-21 17:20:34,593 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:20:34,728 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.05s
2025-07-21 17:20:34,793 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-07-21 17:20:34,845 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.04s
2025-07-21 17:20:34,910 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.07s
2025-07-21 17:20:34,961 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:20:34,961 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:20:38,138 | WARNING | 📦 Raw Gemini response: ```json
{
 "function_call": {
  "name": "get_order_details",
  "arguments": {
   "columns": [
    "Total Price",
    "Sale Date"
   ],
   "table_name": "Sales_Details"
  }
 }
}
```

2025-07-21 17:20:38,138 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-21 17:20:38,138 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-21 17:20:40,191 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:20:40,191 | WARNING | File already exists, skipping write.
2025-07-21 17:20:40,191 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:20:40,395 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.09s
2025-07-21 17:20:40,458 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.06s
2025-07-21 17:20:40,536 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.08s
2025-07-21 17:20:40,599 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.06s
2025-07-21 17:20:40,646 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:20:40,646 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:22:52,902 | INFO | Creating Qdrant collection...
2025-07-21 17:22:53,733 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:22:54,136 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:22:54,140 | INFO | Qdrant collection created.
2025-07-21 17:23:23,040 | INFO | Creating Qdrant collection...
2025-07-21 17:23:23,872 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:23:24,312 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:23:24,312 | INFO | Qdrant collection created.
2025-07-21 17:24:31,962 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:24:31,962 | WARNING | File already exists, skipping write.
2025-07-21 17:24:31,962 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:24:32,763 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.07s
2025-07-21 17:24:32,830 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-07-21 17:24:32,880 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-21 17:24:32,913 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.03s
2025-07-21 17:24:32,964 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:24:32,964 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:24:39,431 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:24:39,431 | WARNING | File already exists, skipping write.
2025-07-21 17:24:39,431 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:24:39,546 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.05s
2025-07-21 17:24:39,597 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-07-21 17:24:39,647 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-07-21 17:24:39,697 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:24:39,747 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:24:39,747 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:24:42,280 | WARNING | 📦 Raw Gemini response: ```json
{
  "function_call": {
    "name": "get_order_details",
    "arguments": {
      "columns": [
        "Total Price",
        "Sale Date"
      ],
      "table_name": "Sales_Details"
    }
  }
}
```

2025-07-21 17:24:44,996 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:24:44,996 | WARNING | File already exists, skipping write.
2025-07-21 17:24:44,996 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:24:45,113 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.05s
2025-07-21 17:24:45,163 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-07-21 17:24:45,197 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.03s
2025-07-21 17:24:45,247 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-07-21 17:24:45,297 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-07-21 17:24:45,297 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:28:15,286 | INFO | Creating Qdrant collection...
2025-07-21 17:28:16,094 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:28:16,466 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:28:16,469 | INFO | Qdrant collection created.
2025-07-21 17:32:02,630 | INFO | Creating Qdrant collection...
2025-07-21 17:32:03,503 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:32:03,885 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:32:03,885 | INFO | Qdrant collection created.
2025-07-21 17:32:27,301 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:32:27,301 | WARNING | File already exists, skipping write.
2025-07-21 17:32:27,301 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:32:29,384 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.18s
2025-07-21 17:32:29,534 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.15s
2025-07-21 17:32:29,634 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.10s
2025-07-21 17:32:29,750 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.12s
2025-07-21 17:32:29,867 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.12s
2025-07-21 17:32:29,884 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:32:38,967 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:32:38,983 | WARNING | File already exists, skipping write.
2025-07-21 17:32:38,983 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:32:39,417 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.13s
2025-07-21 17:32:39,567 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-07-21 17:32:39,668 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.10s
2025-07-21 17:32:39,800 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.13s
2025-07-21 17:32:39,902 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.10s
2025-07-21 17:32:39,902 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:32:42,516 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-21 17:32:42,517 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-21 17:32:44,633 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-21 17:32:44,636 | WARNING | File already exists, skipping write.
2025-07-21 17:32:44,636 | INFO | Processing Excel file with multiple sheets...
2025-07-21 17:32:45,001 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.13s
2025-07-21 17:32:45,151 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-07-21 17:32:45,269 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.10s
2025-07-21 17:32:45,401 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.12s
2025-07-21 17:32:45,518 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.12s
2025-07-21 17:32:45,534 | INFO | Excel file uploaded and sheets saved as tables: ['Sales_Details', 'Order_Details', 'Product_Catalog', 'Customer_Info', 'Payment_Transactions']
2025-07-21 17:43:40,317 | INFO | Creating Qdrant collection...
2025-07-21 17:43:41,222 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:43:41,707 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:43:41,722 | INFO | Qdrant collection created.
2025-07-21 17:46:28,480 | INFO | Creating Qdrant collection...
2025-07-21 17:46:29,308 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:46:29,687 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 17:46:29,687 | INFO | Qdrant collection created.
2025-07-21 18:00:46,139 | INFO | Creating Qdrant collection...
2025-07-21 18:00:46,946 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 18:00:47,330 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-21 18:00:47,330 | INFO | Qdrant collection created.
2025-07-22 11:29:46,997 | INFO | Creating Qdrant collection...
2025-07-22 11:29:47,962 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 11:29:48,454 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 11:29:48,454 | INFO | Qdrant collection created.
2025-07-22 11:30:37,547 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 11:30:37,565 | WARNING | File already exists, skipping write.
2025-07-22 11:30:37,565 | INFO | Processing Excel file with multiple sheets...
2025-07-22 11:30:41,194 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.48s
2025-07-22 11:30:41,413 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.22s
2025-07-22 11:30:41,580 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.17s
2025-07-22 11:30:41,746 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.17s
2025-07-22 11:30:41,913 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.17s
2025-07-22 11:31:11,212 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 11:31:11,352 | WARNING | File already exists, skipping write.
2025-07-22 11:31:11,430 | INFO | Processing Excel file with multiple sheets...
2025-07-22 11:31:12,430 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.32s
2025-07-22 11:31:12,780 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.33s
2025-07-22 11:31:13,080 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.27s
2025-07-22 11:31:13,597 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.50s
2025-07-22 11:31:13,847 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.25s
2025-07-22 11:31:16,349 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-22 11:31:16,349 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-22 11:31:18,913 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 11:31:18,913 | WARNING | File already exists, skipping write.
2025-07-22 11:31:18,913 | INFO | Processing Excel file with multiple sheets...
2025-07-22 11:31:19,380 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.18s
2025-07-22 11:31:19,563 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.18s
2025-07-22 11:31:19,696 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.13s
2025-07-22 11:31:19,863 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.17s
2025-07-22 11:31:20,047 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.18s
2025-07-22 13:13:45,658 | INFO | Creating Qdrant collection...
2025-07-22 13:13:46,489 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 13:13:46,913 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 13:13:46,913 | INFO | Qdrant collection created.
2025-07-22 13:14:05,276 | INFO | Creating Qdrant collection...
2025-07-22 13:14:06,168 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 13:14:06,531 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 13:14:06,531 | INFO | Qdrant collection created.
2025-07-22 14:02:02,326 | INFO | Creating Qdrant collection...
2025-07-22 14:02:03,141 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 14:02:03,518 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 14:02:03,518 | INFO | Qdrant collection created.
2025-07-22 14:16:13,235 | INFO | Creating Qdrant collection...
2025-07-22 14:16:15,293 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 14:16:15,674 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 14:16:15,682 | INFO | Qdrant collection created.
2025-07-22 17:44:17,888 | INFO | Creating Qdrant collection...
2025-07-22 17:44:18,778 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 17:44:19,155 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 17:44:19,171 | INFO | Qdrant collection created.
2025-07-22 17:44:41,829 | INFO | Creating Qdrant collection...
2025-07-22 17:44:42,658 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 17:44:43,034 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 17:44:43,034 | INFO | Qdrant collection created.
2025-07-22 17:45:06,365 | INFO | Creating Qdrant collection...
2025-07-22 17:45:07,524 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 17:45:07,902 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 17:45:07,902 | INFO | Qdrant collection created.
2025-07-22 17:45:33,640 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 17:45:33,656 | WARNING | File already exists, skipping write and sheet processing.
2025-07-22 17:45:42,074 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 17:45:42,074 | WARNING | File already exists, skipping write and sheet processing.
2025-07-22 17:45:44,474 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-22 17:45:44,474 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-22 17:45:46,540 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 17:45:46,540 | WARNING | File already exists, skipping write and sheet processing.
2025-07-22 19:03:59,474 | INFO | Creating Qdrant collection...
2025-07-22 19:04:00,296 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 19:04:00,662 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 19:04:00,662 | INFO | Qdrant collection created.
2025-07-22 19:17:37,131 | INFO | Creating Qdrant collection...
2025-07-22 19:17:37,984 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 19:17:38,370 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 19:17:38,370 | INFO | Qdrant collection created.
2025-07-22 19:25:21,259 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 19:25:21,259 | WARNING | File already exists, skipping write and sheet processing.
2025-07-22 19:26:17,105 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 19:26:17,105 | WARNING | File already exists, skipping write and sheet processing.
2025-07-22 19:26:18,120 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-22 19:26:18,120 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-22 19:26:20,187 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 19:26:20,187 | WARNING | File already exists, skipping write and sheet processing.
2025-07-22 20:25:35,514 | INFO | Creating Qdrant collection...
2025-07-22 20:25:36,377 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:25:36,795 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:25:36,812 | INFO | Qdrant collection created.
2025-07-22 20:26:00,963 | INFO | Creating Qdrant collection...
2025-07-22 20:26:02,171 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:26:02,907 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:26:02,907 | INFO | Qdrant collection created.
2025-07-22 20:28:58,416 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-22 20:28:58,416 | WARNING | File already exists, skipping write and sheet processing.
2025-07-22 20:28:58,416 | ERROR | Upload error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 176, in upload_file
    return {"message": msg}
                       ^^^
UnboundLocalError: cannot access local variable 'msg' where it is not associated with a value
2025-07-22 20:32:52,319 | INFO | Creating Qdrant collection...
2025-07-22 20:32:54,986 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:32:55,635 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:32:55,635 | INFO | Qdrant collection created.
2025-07-22 20:33:32,659 | INFO | Creating Qdrant collection...
2025-07-22 20:33:33,841 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:33:34,208 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:33:34,211 | INFO | Qdrant collection created.
2025-07-22 20:43:27,480 | INFO | Creating Qdrant collection...
2025-07-22 20:43:28,309 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:43:28,921 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 20:43:28,921 | INFO | Qdrant collection created.
2025-07-22 21:19:38,393 | INFO | Creating Qdrant collection...
2025-07-22 21:19:39,208 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 21:19:39,584 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 21:19:39,599 | INFO | Qdrant collection created.
2025-07-22 21:22:48,622 | INFO | Creating Qdrant collection...
2025-07-22 21:22:50,000 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 21:22:50,474 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-22 21:22:50,487 | INFO | Qdrant collection created.
2025-07-23 11:59:00,378 | INFO | Creating Qdrant collection...
2025-07-23 11:59:01,318 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 11:59:01,774 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 11:59:01,774 | INFO | Qdrant collection created.
2025-07-23 12:00:20,705 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:00:20,705 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:00:51,239 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:00:51,239 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:00:53,289 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 89, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 37, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 `allowed_function_names` should only be specified for ANY mode.
2025-07-23 12:00:55,699 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:00:55,699 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:11:15,487 | INFO | Creating Qdrant collection...
2025-07-23 12:11:16,397 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:11:16,929 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:11:16,929 | INFO | Qdrant collection created.
2025-07-23 12:14:49,618 | INFO | Creating Qdrant collection...
2025-07-23 12:14:50,621 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:14:50,979 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:14:50,979 | INFO | Qdrant collection created.
2025-07-23 12:15:16,511 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:15:16,511 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:15:26,228 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:15:26,228 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:15:41,945 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-23 12:15:41,961 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-23 12:15:44,062 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:15:44,062 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:28:06,172 | INFO | Creating Qdrant collection...
2025-07-23 12:28:08,109 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:28:08,483 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:28:08,483 | INFO | Qdrant collection created.
2025-07-23 12:28:38,544 | INFO | Creating Qdrant collection...
2025-07-23 12:28:39,547 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:28:40,034 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:28:40,034 | INFO | Qdrant collection created.
2025-07-23 12:32:43,420 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:32:43,420 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:32:51,292 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:32:51,292 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:32:54,236 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-23 12:32:56,380 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:32:56,380 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:37:15,989 | INFO | Creating Qdrant collection...
2025-07-23 12:37:16,837 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:37:17,236 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:37:17,240 | INFO | Qdrant collection created.
2025-07-23 12:40:55,465 | INFO | Creating Qdrant collection...
2025-07-23 12:40:56,304 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:40:56,686 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:40:56,698 | INFO | Qdrant collection created.
2025-07-23 12:44:22,612 | INFO | Creating Qdrant collection...
2025-07-23 12:44:23,458 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:44:23,889 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:44:23,905 | INFO | Qdrant collection created.
2025-07-23 12:45:06,140 | INFO | Creating Qdrant collection...
2025-07-23 12:45:06,956 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:45:07,340 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:45:07,355 | INFO | Qdrant collection created.
2025-07-23 12:45:38,270 | INFO | Creating Qdrant collection...
2025-07-23 12:45:39,118 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:45:39,507 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 12:45:39,507 | INFO | Qdrant collection created.
2025-07-23 12:46:07,126 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:46:07,143 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:46:15,143 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:46:15,143 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 12:46:16,695 | WARNING | No tool call made by Gemini.
2025-07-23 12:46:18,743 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 12:46:18,743 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 13:20:45,348 | INFO | Creating Qdrant collection...
2025-07-23 13:20:46,197 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:20:46,581 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:20:46,585 | INFO | Qdrant collection created.
2025-07-23 13:28:51,391 | INFO | Creating Qdrant collection...
2025-07-23 13:28:52,223 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:28:52,614 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:28:52,614 | INFO | Qdrant collection created.
2025-07-23 13:31:36,648 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 13:31:36,664 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 13:31:42,114 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 13:31:42,114 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 13:31:42,280 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 90, in handle_query
    tool_call = decide_function_call(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 47, in decide_function_call
    "allowed_function_names": [f["function"]["name"] for f in function_defs]
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 47, in <listcomp>
    "allowed_function_names": [f["function"]["name"] for f in function_defs]
                               ~^^^^^^^^^^^^
KeyError: 'function'
2025-07-23 13:31:44,334 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 13:31:44,334 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 13:38:21,886 | INFO | Creating Qdrant collection...
2025-07-23 13:38:22,733 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:38:23,148 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:38:23,163 | INFO | Qdrant collection created.
2025-07-23 13:42:53,803 | INFO | Creating Qdrant collection...
2025-07-23 13:42:54,651 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:42:55,035 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 13:42:55,035 | INFO | Qdrant collection created.
2025-07-23 13:43:59,670 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 13:43:59,670 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 13:44:12,537 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 13:44:12,537 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 13:44:14,120 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-23 13:44:14,120 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-23 13:44:16,169 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 13:44:16,169 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 14:07:46,730 | INFO | Creating Qdrant collection...
2025-07-23 14:07:47,555 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 14:07:47,938 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 14:07:47,938 | INFO | Qdrant collection created.
2025-07-23 14:09:11,907 | INFO | Creating Qdrant collection...
2025-07-23 14:09:12,724 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 14:09:13,098 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 14:09:13,114 | INFO | Qdrant collection created.
2025-07-23 16:44:35,509 | INFO | Creating Qdrant collection...
2025-07-23 16:44:36,409 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 16:44:36,796 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 16:44:36,812 | INFO | Qdrant collection created.
2025-07-23 16:50:40,650 | INFO | Creating Qdrant collection...
2025-07-23 16:50:41,528 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 16:50:41,906 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 16:50:41,906 | INFO | Qdrant collection created.
2025-07-23 17:06:22,154 | INFO | Creating Qdrant collection...
2025-07-23 17:06:23,205 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:06:23,642 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:06:23,674 | INFO | Qdrant collection created.
2025-07-23 17:06:59,276 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:06:59,293 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:07:12,343 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:07:12,377 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:07:20,929 | WARNING | Failed to parse Gemini fallback response as function_call.
2025-07-23 17:07:20,929 | WARNING | No tool call made by Gemini.
2025-07-23 17:07:23,243 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:07:23,293 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:09:44,293 | INFO | Creating Qdrant collection...
2025-07-23 17:09:45,266 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:09:45,783 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:09:45,783 | INFO | Qdrant collection created.
2025-07-23 17:10:09,210 | INFO | Creating Qdrant collection...
2025-07-23 17:10:10,730 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:10:11,466 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:10:11,481 | INFO | Qdrant collection created.
2025-07-23 17:10:38,312 | INFO | Creating Qdrant collection...
2025-07-23 17:10:39,269 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:10:39,693 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:10:39,693 | INFO | Qdrant collection created.
2025-07-23 17:11:04,464 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:11:04,464 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:11:10,945 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:11:10,945 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:11:11,345 | WARNING | Failed to parse Gemini fallback response as function_call.
2025-07-23 17:11:11,345 | WARNING | No tool call made by Gemini.
2025-07-23 17:11:13,848 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:11:13,848 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:39:49,368 | INFO | Creating Qdrant collection...
2025-07-23 17:39:50,207 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:39:50,590 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-23 17:39:50,606 | INFO | Qdrant collection created.
2025-07-23 17:41:56,361 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:41:56,361 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:42:02,092 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:42:02,109 | WARNING | File already exists, skipping write and sheet processing.
2025-07-23 17:44:27,692 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-23 17:44:27,694 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-23 17:44:29,810 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-23 17:44:29,827 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 13:15:58,168 | INFO | Creating Qdrant collection...
2025-07-24 13:15:59,188 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 13:15:59,590 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 13:15:59,590 | INFO | Qdrant collection created.
2025-07-24 13:16:54,759 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 13:16:54,776 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 13:17:08,326 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 13:17:08,326 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 13:26:32,297 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-24 13:26:32,302 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-24 13:26:34,571 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 13:26:34,580 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 16:44:31,535 | INFO | Creating Qdrant collection...
2025-07-24 16:44:32,392 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:44:32,800 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:44:32,816 | INFO | Qdrant collection created.
2025-07-24 16:48:40,920 | INFO | Creating Qdrant collection...
2025-07-24 16:48:41,760 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:48:42,158 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:48:42,174 | INFO | Qdrant collection created.
2025-07-24 16:49:51,916 | INFO | Creating Qdrant collection...
2025-07-24 16:49:52,808 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:49:53,199 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:49:53,199 | INFO | Qdrant collection created.
2025-07-24 16:54:44,766 | INFO | Creating Qdrant collection...
2025-07-24 16:54:45,628 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:54:46,016 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:54:46,016 | INFO | Qdrant collection created.
2025-07-24 16:55:25,366 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 16:55:25,366 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 16:55:35,209 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 16:55:35,209 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 16:55:38,616 | WARNING | ❌ Exception in decide_function_call:
2025-07-24 16:55:38,625 | ERROR | 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 8
}
]
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 37, in decide_function_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 8
}
]
2025-07-24 16:55:42,366 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 16:55:42,374 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 16:57:42,457 | INFO | Creating Qdrant collection...
2025-07-24 16:57:43,492 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:57:43,961 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 16:57:43,961 | INFO | Qdrant collection created.
2025-07-24 16:58:57,677 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 16:58:57,677 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 16:59:04,877 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 16:59:04,877 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 16:59:06,527 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-24 16:59:06,527 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-24 16:59:08,594 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 16:59:08,594 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 17:26:23,765 | INFO | Creating Qdrant collection...
2025-07-24 17:26:24,582 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:26:24,955 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:26:24,970 | INFO | Qdrant collection created.
2025-07-24 17:27:14,240 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 17:27:14,240 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 17:27:29,873 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 17:27:29,873 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 17:27:32,474 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-24 17:27:32,474 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-24 17:27:34,657 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 17:27:34,657 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 17:31:14,201 | INFO | Creating Qdrant collection...
2025-07-24 17:31:15,036 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:31:15,419 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:31:15,422 | INFO | Qdrant collection created.
2025-07-24 17:31:47,019 | INFO | Creating Qdrant collection...
2025-07-24 17:31:47,849 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:31:48,259 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:31:48,263 | INFO | Qdrant collection created.
2025-07-24 17:32:36,976 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 17:32:36,976 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 17:32:46,759 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 17:32:46,759 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 17:32:49,509 | WARNING | ⚠️ Failed to parse Gemini fallback response as function_call.
2025-07-24 17:32:49,509 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-24 17:32:51,559 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-24 17:32:51,559 | WARNING | File already exists, skipping write and sheet processing.
2025-07-24 17:49:23,734 | INFO | Creating Qdrant collection...
2025-07-24 17:49:24,610 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:49:25,032 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:49:25,048 | INFO | Qdrant collection created.
2025-07-24 17:49:47,587 | INFO | Creating Qdrant collection...
2025-07-24 17:49:48,401 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:49:48,837 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:49:48,837 | INFO | Qdrant collection created.
2025-07-24 17:50:48,900 | INFO | Creating Qdrant collection...
2025-07-24 17:50:49,710 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:50:50,123 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-24 17:50:50,127 | INFO | Qdrant collection created.
2025-07-25 11:47:08,598 | INFO | Creating Qdrant collection...
2025-07-25 11:47:09,529 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 11:47:09,934 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 11:47:09,934 | INFO | Qdrant collection created.
2025-07-25 11:47:43,619 | INFO | Creating Qdrant collection...
2025-07-25 11:47:44,576 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 11:47:45,311 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 11:47:45,311 | INFO | Qdrant collection created.
2025-07-25 11:48:57,140 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 11:48:57,140 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 11:49:09,540 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 11:49:09,540 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 11:49:11,858 | INFO | Gemini raw response: [text: "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"total_price\",\n    \"sale_date\"\n   ],\n   \"table_name\": \"sales_details\"\n  }\n }\n}\n```\n"
]
2025-07-25 11:49:11,874 | WARNING | ⚠️ No function was selected by Gemini.
2025-07-25 11:49:14,244 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 11:49:14,259 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 12:12:11,569 | INFO | Creating Qdrant collection...
2025-07-25 12:12:12,502 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 12:12:12,913 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 12:12:12,917 | INFO | Qdrant collection created.
2025-07-25 12:29:06,423 | INFO | Creating Qdrant collection...
2025-07-25 12:29:07,285 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 12:29:07,755 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 12:29:07,755 | INFO | Qdrant collection created.
2025-07-25 14:24:04,063 | INFO | Creating Qdrant collection...
2025-07-25 14:24:05,081 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 14:24:05,490 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 14:24:05,490 | INFO | Qdrant collection created.
2025-07-25 14:37:19,330 | INFO | Creating Qdrant collection...
2025-07-25 14:37:20,206 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 14:37:20,632 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 14:37:20,632 | INFO | Qdrant collection created.
2025-07-25 14:38:18,000 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 14:38:18,000 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 14:38:27,284 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 14:38:27,284 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 14:38:30,308 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=glm.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"total_price\", \"sale_date\"], \"table_name\": \"sales_details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": 1,
          "safety_ratings": [],
          "token_count": 0,
          "grounding_attributions": []
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 861,
        "candidates_token_count": 48,
        "total_token_count": 909
      }
    }),
)
2025-07-25 14:38:30,318 | WARNING | No tool call made by Gemini.
2025-07-25 14:38:32,433 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 14:38:32,441 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 16:13:18,909 | INFO | Creating Qdrant collection...
2025-07-25 16:13:19,756 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:13:20,133 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:13:20,133 | INFO | Qdrant collection created.
2025-07-25 16:14:06,917 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 16:14:06,917 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 16:14:26,468 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 16:14:26,468 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 16:14:26,684 | INFO | 🔍 Deciding tool call for prompt: Show me total price and sale date from sales details
2025-07-25 16:14:28,384 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Total Price\", \"Sale Date\"], \"table_name\": \"Sales_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.008041026799575142
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1038,
        "candidates_token_count": 46,
        "total_token_count": 1084
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-25 16:14:28,384 | WARNING | ⚠️ No tool call made by Gemini.
2025-07-25 16:14:28,384 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 81, in handle_query
    function_name = tool_call.function.name
                    ^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'function'
2025-07-25 16:14:30,451 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 16:14:30,451 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 16:27:23,550 | INFO | Creating Qdrant collection...
2025-07-25 16:27:24,396 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:27:24,803 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:27:24,803 | INFO | Qdrant collection created.
2025-07-25 16:27:41,320 | INFO | Creating Qdrant collection...
2025-07-25 16:27:42,165 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:27:42,541 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:27:42,556 | INFO | Qdrant collection created.
2025-07-25 16:37:41,577 | INFO | Creating Qdrant collection...
2025-07-25 16:37:42,428 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:37:42,811 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:37:42,827 | INFO | Qdrant collection created.
2025-07-25 16:37:59,474 | INFO | Creating Qdrant collection...
2025-07-25 16:38:00,297 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:38:00,671 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:38:00,671 | INFO | Qdrant collection created.
2025-07-25 16:39:08,018 | INFO | Creating Qdrant collection...
2025-07-25 16:39:08,880 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:39:09,292 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:39:09,292 | INFO | Qdrant collection created.
2025-07-25 16:39:25,958 | INFO | Creating Qdrant collection...
2025-07-25 16:39:26,796 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:39:27,208 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:39:27,214 | INFO | Qdrant collection created.
2025-07-25 16:42:24,969 | INFO | Creating Qdrant collection...
2025-07-25 16:42:25,768 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:42:26,130 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:42:26,145 | INFO | Qdrant collection created.
2025-07-25 16:45:29,349 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 16:45:29,356 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 16:46:27,666 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 16:46:27,666 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 16:46:33,449 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.011135886940691207
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-25 16:46:33,466 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-25 16:46:33,466 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 81, in handle_query
    function_name = tool_call["function"]["name"]
                    ~~~~~~~~~^^^^^^^^^^^^
KeyError: 'function'
2025-07-25 16:46:35,549 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 16:46:35,549 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 16:48:40,272 | INFO | Creating Qdrant collection...
2025-07-25 16:48:41,067 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:48:41,444 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:48:41,444 | INFO | Qdrant collection created.
2025-07-25 16:50:15,708 | INFO | Creating Qdrant collection...
2025-07-25 16:50:16,525 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:50:16,921 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:50:16,924 | INFO | Qdrant collection created.
2025-07-25 16:50:33,710 | INFO | Creating Qdrant collection...
2025-07-25 16:50:34,479 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:50:34,851 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:50:34,851 | INFO | Qdrant collection created.
2025-07-25 16:53:47,706 | INFO | Creating Qdrant collection...
2025-07-25 16:53:48,544 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:53:48,989 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:53:49,005 | INFO | Qdrant collection created.
2025-07-25 16:59:23,224 | INFO | Creating Qdrant collection...
2025-07-25 16:59:24,040 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:59:24,462 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 16:59:24,478 | INFO | Qdrant collection created.
2025-07-25 16:59:56,563 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 16:59:56,563 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:00:26,064 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:00:26,064 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:00:28,198 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_order_details\",\n    \"arguments\": {\n      \"columns\": [\n        \"Total Price\",\n        \"Sale Date\"\n      ],\n      \"table_name\": \"Sales_Details\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.028067711237314587
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 74,
        "total_token_count": 1479
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-25 17:00:28,198 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-25 17:00:28,264 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\pandas\io\sql.py", line 2674, in execute
    cur.execute(sql, *args)
sqlite3.OperationalError: no such column: Total

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 100, in handle_query
    return {"response": sql_handler.get_selected_columns(table, columns)}
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 62, in get_selected_columns
    df = pd.read_sql_query(f"SELECT {', '.join(columns)} FROM {table}", conn)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\pandas\io\sql.py", line 526, in read_sql_query
    return pandas_sql.read_query(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\pandas\io\sql.py", line 2738, in read_query
    cursor = self.execute(sql, params)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\pandas\io\sql.py", line 2686, in execute
    raise ex from exc
pandas.errors.DatabaseError: Execution failed on sql 'SELECT Total Price, Sale Date FROM Sales_Details': no such column: Total
2025-07-25 17:00:30,365 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:00:30,365 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:04:10,653 | INFO | Creating Qdrant collection...
2025-07-25 17:04:11,466 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:04:11,876 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:04:11,891 | INFO | Qdrant collection created.
2025-07-25 17:05:46,743 | INFO | Creating Qdrant collection...
2025-07-25 17:05:47,558 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:05:48,014 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:05:48,014 | INFO | Qdrant collection created.
2025-07-25 17:06:11,000 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:06:11,000 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:06:25,084 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:06:25,084 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:06:26,617 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Total Price\", \"Sale Date\"], \"table_name\": \"Sales_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.02268577658611795
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 46,
        "total_token_count": 1451
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-25 17:06:26,617 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-25 17:06:26,617 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 100, in handle_query
    return {"response": sql_handler.get_selected_columns(table, columns)}
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_selected_columns() missing 1 required positional argument: 'columns'
2025-07-25 17:06:28,700 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:06:28,700 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:09:55,880 | INFO | Creating Qdrant collection...
2025-07-25 17:09:56,719 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:09:57,108 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:09:57,108 | INFO | Qdrant collection created.
2025-07-25 17:10:18,171 | INFO | Creating Qdrant collection...
2025-07-25 17:10:18,961 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:10:19,333 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:10:19,333 | INFO | Qdrant collection created.
2025-07-25 17:14:46,244 | INFO | Creating Qdrant collection...
2025-07-25 17:14:47,161 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:14:47,570 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:14:47,570 | INFO | Qdrant collection created.
2025-07-25 17:20:36,366 | INFO | Creating Qdrant collection...
2025-07-25 17:20:37,197 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:20:37,587 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-25 17:20:37,587 | INFO | Qdrant collection created.
2025-07-25 17:21:07,534 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:21:07,534 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:21:29,088 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:21:29,088 | WARNING | File already exists, skipping write and sheet processing.
2025-07-25 17:21:30,888 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.011121929519706301
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-25 17:21:30,888 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-25 17:21:30,888 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 94, in handle_query
    return {"response": sql_handler.get_selected_columns(table, columns)}
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_selected_columns() missing 1 required positional argument: 'columns'
2025-07-25 17:21:32,972 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-25 17:21:32,972 | WARNING | File already exists, skipping write and sheet processing.
2025-07-27 20:00:48,915 | INFO | Creating Qdrant collection...
2025-07-27 20:00:49,827 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-27 20:00:50,244 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-27 20:00:50,247 | INFO | Qdrant collection created.
2025-07-27 20:01:33,354 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-27 20:01:33,361 | WARNING | File already exists, skipping write and sheet processing.
2025-07-27 20:01:45,097 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.010544910199112363
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-27 20:01:45,119 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-27 20:01:45,124 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 94, in handle_query
    return {"response": sql_handler.get_selected_columns(table, columns)}
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_selected_columns() missing 1 required positional argument: 'columns'
2025-07-27 20:01:45,162 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-27 20:01:45,169 | WARNING | File already exists, skipping write and sheet processing.
2025-07-27 20:01:47,746 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-27 20:01:47,750 | WARNING | File already exists, skipping write and sheet processing.
2025-07-27 20:05:56,299 | INFO | Creating Qdrant collection...
2025-07-27 20:05:57,122 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-27 20:05:57,515 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-27 20:05:57,518 | INFO | Qdrant collection created.
2025-07-27 20:06:31,502 | INFO | Creating Qdrant collection...
2025-07-27 20:06:33,828 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-27 20:06:34,501 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-27 20:06:34,505 | INFO | Qdrant collection created.
2025-07-27 20:23:15,086 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-27 20:23:15,093 | WARNING | File already exists, skipping write and sheet processing.
2025-07-27 20:23:20,553 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-27 20:23:20,558 | WARNING | File already exists, skipping write and sheet processing.
2025-07-27 20:23:23,734 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.013021721608108945
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-27 20:23:23,760 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-27 20:23:23,765 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 94, in handle_query
    return {"response": sql_handler.get_selected_columns(table, columns)}
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_selected_columns() missing 1 required positional argument: 'columns'
2025-07-27 20:23:26,045 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-27 20:23:26,114 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 15:40:25,421 | INFO | Creating Qdrant collection...
2025-07-28 15:40:26,251 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 15:40:26,656 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 15:40:26,664 | INFO | Qdrant collection created.
2025-07-28 15:40:55,210 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 15:40:55,219 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 15:41:04,160 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 15:41:04,160 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 15:41:08,544 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_order_details\",\n    \"arguments\": {\n      \"columns\": [\n        \"Total Price\",\n        \"Sale Date\"\n      ],\n      \"table_name\": \"Sales_Details\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.02259049705556921
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 74,
        "total_token_count": 1479
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 15:41:08,561 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-28 15:41:08,569 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 94, in handle_query
    return {"response": sql_handler.get_selected_columns(table, columns)}
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_selected_columns() missing 1 required positional argument: 'columns'
2025-07-28 15:41:10,780 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 15:41:10,794 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:08:26,865 | INFO | Creating Qdrant collection...
2025-07-28 16:08:27,678 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:08:28,070 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:08:28,086 | INFO | Qdrant collection created.
2025-07-28 16:09:43,179 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:09:43,179 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:09:58,196 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:09:58,196 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:09:59,963 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.009789502455128564
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:09:59,979 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-28 16:09:59,987 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-28 16:09:59,987 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 95, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 11, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
TypeError: get_selected_columns() got an unexpected keyword argument 'table'
2025-07-28 16:10:02,063 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:10:02,063 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:11:44,389 | INFO | Creating Qdrant collection...
2025-07-28 16:11:45,189 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:11:45,581 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:11:45,583 | INFO | Qdrant collection created.
2025-07-28 16:12:20,250 | INFO | Creating Qdrant collection...
2025-07-28 16:12:21,100 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:12:21,527 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:12:21,527 | INFO | Qdrant collection created.
2025-07-28 16:12:54,449 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:12:54,449 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:13:02,131 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:13:02,131 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:13:03,564 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Total Price\", \"Sale Date\"], \"table_name\": \"Sales_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.02438239170157391
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 46,
        "total_token_count": 1451
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:13:03,564 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-28 16:13:03,564 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-28 16:13:03,564 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 95, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 9, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
TypeError: get_selected_columns() missing 1 required positional argument: 'columns'
2025-07-28 16:13:05,632 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:13:05,632 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:17:06,316 | INFO | Creating Qdrant collection...
2025-07-28 16:17:07,125 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:17:07,489 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:17:07,505 | INFO | Qdrant collection created.
2025-07-28 16:17:33,651 | INFO | Creating Qdrant collection...
2025-07-28 16:17:34,433 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:17:34,850 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:17:34,854 | INFO | Qdrant collection created.
2025-07-28 16:19:10,548 | INFO | Creating Qdrant collection...
2025-07-28 16:19:11,334 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:19:11,708 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:19:11,714 | INFO | Qdrant collection created.
2025-07-28 16:31:58,971 | INFO | Creating Qdrant collection...
2025-07-28 16:31:59,753 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:32:00,199 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:32:00,202 | INFO | Qdrant collection created.
2025-07-28 16:32:21,281 | INFO | Creating Qdrant collection...
2025-07-28 16:32:22,044 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:32:22,405 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:32:22,421 | INFO | Qdrant collection created.
2025-07-28 16:34:18,976 | INFO | Creating Qdrant collection...
2025-07-28 16:34:19,794 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:34:20,172 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:34:20,188 | INFO | Qdrant collection created.
2025-07-28 16:34:46,459 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:34:46,459 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:34:52,441 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:34:52,441 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:34:54,241 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Total Price\", \"Sale Date\"], \"table_name\": \"Sales_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.024786288323609726
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 46,
        "total_token_count": 1451
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:34:54,258 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-28 16:34:54,258 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-28 16:34:54,258 | INFO | 📊 Executing SQL: SELECT Total Price, Sale Date FROM 'Sales_Details' LIMIT 10
2025-07-28 16:34:54,308 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 95, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 66, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: no such column: Total
2025-07-28 16:34:56,375 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:34:56,375 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:38:06,187 | INFO | Creating Qdrant collection...
2025-07-28 16:38:07,019 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:38:07,393 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:38:07,393 | INFO | Qdrant collection created.
2025-07-28 16:44:19,913 | INFO | Creating Qdrant collection...
2025-07-28 16:44:20,743 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:44:21,121 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:44:21,121 | INFO | Qdrant collection created.
2025-07-28 16:45:21,902 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:45:21,919 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:45:33,903 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:45:33,903 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:45:35,786 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.009480759501457214
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:45:35,805 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-28 16:45:35,818 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-28 16:45:35,820 | INFO | 📊 Executing SQL: SELECT "Total Price", "Sale Date" FROM "Sales_Details" LIMIT 10
2025-07-28 16:53:57,233 | INFO | Creating Qdrant collection...
2025-07-28 16:53:58,018 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:53:58,377 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 16:53:58,377 | INFO | Qdrant collection created.
2025-07-28 16:54:54,787 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:54:54,798 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:55:04,757 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:55:04,757 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:55:06,357 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_order_details\",\n    \"arguments\": {\n      \"columns\": [\n        \"Total Price\",\n        \"Sale Date\"\n      ],\n      \"table_name\": \"Sales_Details\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.017580853926168906
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 74,
        "total_token_count": 1479
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:55:06,357 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-28 16:55:06,357 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-28 16:55:06,357 | INFO | 📊 Executing SQL: SELECT "Total Price", "Sale Date" FROM "Sales_Details" LIMIT 10
2025-07-28 16:55:10,873 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:55:10,873 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:56:01,825 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:56:01,825 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:56:02,991 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\", \"Delivery Date\"], \"table_name\": \"Order_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.010074068022810894
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1407,
        "candidates_token_count": 46,
        "total_token_count": 1453
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:56:03,008 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status', 'Delivery Date'], 'table_name': 'Order_Details'}}}
2025-07-28 16:56:03,008 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Shipping Status', 'Delivery Date'], 'table_name': 'Order_Details'}
2025-07-28 16:56:03,008 | INFO | 📊 Executing SQL: SELECT "Shipping Status", "Delivery Date" FROM "Order_Details" LIMIT 10
2025-07-28 16:56:05,174 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:56:05,174 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:56:49,644 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:56:49,644 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:56:50,774 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Payment Method\", \"Total Price\"], \"table_name\": \"Sales_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.018068269543025806
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1404,
        "candidates_token_count": 46,
        "total_token_count": 1450
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:56:50,791 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Payment Method', 'Total Price'], 'table_name': 'Sales_Details'}}}
2025-07-28 16:56:50,791 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Payment Method', 'Total Price'], 'table_name': 'Sales_Details'}
2025-07-28 16:56:50,791 | INFO | 📊 Executing SQL: SELECT "Payment Method", "Total Price" FROM "Sales_Details" LIMIT 10
2025-07-28 16:56:52,874 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-28 16:56:52,874 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:59:22,492 | INFO | Starting upload for file: Upload_Policy.pdf
2025-07-28 16:59:22,492 | INFO | File saved at: uploads/Upload_Policy.pdf
2025-07-28 16:59:22,492 | INFO | Extracting PDF...
2025-07-28 16:59:23,926 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-28 16:59:31,940 | INFO | Starting upload for file: Upload_Policy.pdf
2025-07-28 16:59:31,940 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:59:40,561 | INFO | Starting upload for file: Upload_Policy.pdf
2025-07-28 16:59:40,561 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 16:59:42,009 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"What is the policy for uploading files?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.006153783708248498
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1403,
        "candidates_token_count": 53,
        "total_token_count": 1456
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 16:59:42,009 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What is the policy for uploading files?'}}}
2025-07-28 16:59:42,009 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What is the policy for uploading files?'}
2025-07-28 16:59:43,260 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-28 16:59:46,159 | INFO | Starting upload for file: Upload_Policy.pdf
2025-07-28 16:59:46,159 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 17:04:49,878 | INFO | Starting upload for file: Upload_Policy.pdf
2025-07-28 17:04:49,878 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 17:04:52,378 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"What is the policy for uploading files?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.005304428204050604
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1403,
        "candidates_token_count": 53,
        "total_token_count": 1456
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 17:04:52,378 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What is the policy for uploading files?'}}}
2025-07-28 17:04:52,378 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What is the policy for uploading files?'}
2025-07-28 17:04:53,812 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-28 17:04:57,161 | INFO | Starting upload for file: Upload_Policy.pdf
2025-07-28 17:04:57,161 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 17:13:55,286 | INFO | Creating Qdrant collection...
2025-07-28 17:13:56,106 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 17:13:56,466 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-28 17:13:56,466 | INFO | Qdrant collection created.
2025-07-28 17:16:52,344 | INFO | Starting upload for file: Policy.pdf
2025-07-28 17:16:52,352 | INFO | File saved at: uploads/Policy.pdf
2025-07-28 17:16:52,352 | INFO | Extracting PDF...
2025-07-28 17:16:54,933 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-28 17:17:02,050 | INFO | Starting upload for file: Policy.pdf
2025-07-28 17:17:02,050 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 17:17:03,336 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.010611989431911044
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 17:17:03,336 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-28 17:17:03,336 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-28 17:17:03,336 | INFO | 📊 Executing SQL: SELECT "Total Price", "Sale Date" FROM "Sales_Details" LIMIT 10
2025-07-28 17:17:07,950 | INFO | Starting upload for file: Policy.pdf
2025-07-28 17:17:07,957 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 17:17:18,474 | INFO | Starting upload for file: Policy.pdf
2025-07-28 17:17:18,475 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 17:17:31,500 | INFO | Starting upload for file: Policy.pdf
2025-07-28 17:17:31,500 | WARNING | File already exists, skipping write and sheet processing.
2025-07-28 17:17:32,767 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"What is the policy for uploading files?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.006873741464794807
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1403,
        "candidates_token_count": 53,
        "total_token_count": 1456
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-28 17:17:32,767 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What is the policy for uploading files?'}}}
2025-07-28 17:17:32,767 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What is the policy for uploading files?'}
2025-07-28 17:17:34,084 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-28 17:17:36,985 | INFO | Starting upload for file: Policy.pdf
2025-07-28 17:17:36,985 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 14:55:15,424 | INFO | Creating Qdrant collection...
2025-07-29 14:55:16,282 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 14:55:16,701 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 14:55:16,701 | INFO | Qdrant collection created.
2025-07-29 15:02:53,608 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:02:53,608 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:04:52,676 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:04:52,692 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:07:49,210 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"Are there file size limitations?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.014185032423804788
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1401,
        "candidates_token_count": 51,
        "total_token_count": 1452
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-29 15:07:49,227 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'Are there file size limitations?'}}}
2025-07-29 15:07:49,227 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'Are there file size limitations?'}
2025-07-29 15:07:51,094 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-29 15:08:10,544 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:08:10,544 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:18:07,154 | INFO | Creating Qdrant collection...
2025-07-29 15:18:08,172 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:18:08,832 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:18:08,832 | INFO | Qdrant collection created.
2025-07-29 15:21:39,401 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:21:39,401 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:22:39,118 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:22:39,134 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:23:17,218 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_policy_info\",\n    \"arguments\": {\n      \"query\": \"Are there file size limitations?\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.014227695060226152
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1401,
        "candidates_token_count": 53,
        "total_token_count": 1454
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-29 15:23:17,251 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'Are there file size limitations?'}}}
2025-07-29 15:23:17,251 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'Are there file size limitations?'}
2025-07-29 15:23:19,468 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-29 15:34:03,287 | INFO | Creating Qdrant collection...
2025-07-29 15:34:04,291 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:34:04,729 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:34:04,729 | INFO | Qdrant collection created.
2025-07-29 15:35:27,803 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-29 15:35:27,803 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:36:15,719 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-29 15:36:15,719 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:36:47,328 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_order_details\",\n    \"arguments\": {\n      \"columns\": [\n        \"Total Price\",\n        \"Sale Date\"\n      ],\n      \"table_name\": \"Sales_Details\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.01920576675518139
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 74,
        "total_token_count": 1479
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-29 15:36:47,353 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-29 15:36:47,353 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-29 15:36:47,361 | INFO | 📊 Executing SQL: SELECT "Total Price", "Sale Date" FROM "Sales_Details" LIMIT 10
2025-07-29 15:36:55,720 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-29 15:36:55,720 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:37:40,240 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:37:40,253 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:38:05,904 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:38:05,904 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:38:19,337 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"Are there any limitations to upload a file?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.03789394873159903
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1404,
        "candidates_token_count": 54,
        "total_token_count": 1458
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-29 15:38:19,354 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'Are there any limitations to upload a file?'}}}
2025-07-29 15:38:19,354 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'Are there any limitations to upload a file?'}
2025-07-29 15:38:21,054 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-29 15:38:40,795 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:38:40,803 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:40:24,139 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:40:24,155 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:40:27,088 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"What is the policy for uploading files?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.007886941140552736
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1403,
        "candidates_token_count": 53,
        "total_token_count": 1456
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-29 15:40:27,096 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What is the policy for uploading files?'}}}
2025-07-29 15:40:27,105 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What is the policy for uploading files?'}
2025-07-29 15:40:30,206 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-29 15:40:38,457 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:40:38,457 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 15:43:40,378 | INFO | Creating Qdrant collection...
2025-07-29 15:43:41,243 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:43:41,626 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:43:41,626 | INFO | Qdrant collection created.
2025-07-29 15:47:33,630 | INFO | Creating Qdrant collection...
2025-07-29 15:47:34,490 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:47:34,889 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:47:34,905 | INFO | Qdrant collection created.
2025-07-29 15:48:37,978 | INFO | Creating Qdrant collection...
2025-07-29 15:48:38,816 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:48:39,225 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:48:39,229 | INFO | Qdrant collection created.
2025-07-29 15:49:22,583 | INFO | Creating Qdrant collection...
2025-07-29 15:49:23,785 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:49:24,200 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 15:49:24,208 | INFO | Qdrant collection created.
2025-07-29 15:54:46,653 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"What is the policy for uploading files?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.007200557105946091
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1403,
        "candidates_token_count": 53,
        "total_token_count": 1456
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-29 15:54:46,661 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What is the policy for uploading files?'}}}
2025-07-29 15:54:46,662 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What is the policy for uploading files?'}
2025-07-29 15:54:48,389 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-29 15:55:03,529 | INFO | Starting upload for file: Policy.pdf
2025-07-29 15:55:03,529 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 16:16:03,598 | INFO | Creating Qdrant collection...
2025-07-29 16:16:04,426 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 16:16:04,807 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 16:16:04,822 | INFO | Qdrant collection created.
2025-07-29 16:16:58,640 | INFO | Starting upload for file: Policy.pdf
2025-07-29 16:16:58,640 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 16:26:06,754 | INFO | Starting upload for file: Policy.pdf
2025-07-29 16:26:06,754 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 16:26:30,795 | INFO | Starting upload for file: Policy.pdf
2025-07-29 16:26:30,810 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 16:26:51,863 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"Is there any limitation to upload a file?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.06448189859037046
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 54,
        "total_token_count": 1459
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-29 16:26:51,895 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'Is there any limitation to upload a file?'}}}
2025-07-29 16:26:51,895 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'Is there any limitation to upload a file?'}
2025-07-29 16:26:53,496 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-29 16:27:09,628 | INFO | Starting upload for file: Policy.pdf
2025-07-29 16:27:09,644 | WARNING | File already exists, skipping write and sheet processing.
2025-07-29 21:01:29,231 | INFO | Creating Qdrant collection...
2025-07-29 21:01:30,140 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:01:30,559 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:01:30,570 | INFO | Qdrant collection created.
2025-07-29 21:02:18,600 | INFO | Creating Qdrant collection...
2025-07-29 21:02:19,544 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:02:19,950 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:02:19,962 | INFO | Qdrant collection created.
2025-07-29 21:04:23,134 | INFO | Creating Qdrant collection...
2025-07-29 21:04:23,982 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:04:24,375 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:04:24,383 | INFO | Qdrant collection created.
2025-07-29 21:10:50,689 | INFO | Creating Qdrant collection...
2025-07-29 21:10:51,544 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:10:51,988 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:10:51,988 | INFO | Qdrant collection created.
2025-07-29 21:13:21,029 | INFO | Creating Qdrant collection...
2025-07-29 21:13:21,859 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:13:22,258 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:13:22,258 | INFO | Qdrant collection created.
2025-07-29 21:13:49,175 | INFO | Creating Qdrant collection...
2025-07-29 21:13:50,025 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:13:50,415 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:13:50,424 | INFO | Qdrant collection created.
2025-07-29 21:17:08,163 | INFO | Creating Qdrant collection...
2025-07-29 21:17:09,004 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:17:09,395 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:17:09,403 | INFO | Qdrant collection created.
2025-07-29 21:17:35,646 | INFO | Creating Qdrant collection...
2025-07-29 21:17:36,484 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:17:36,864 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:17:36,874 | INFO | Qdrant collection created.
2025-07-29 21:22:36,471 | INFO | Creating Qdrant collection...
2025-07-29 21:22:37,331 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:22:37,729 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:22:37,737 | INFO | Qdrant collection created.
2025-07-29 21:26:53,707 | INFO | Creating Qdrant collection...
2025-07-29 21:26:54,568 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:26:54,967 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:26:54,967 | INFO | Qdrant collection created.
2025-07-29 21:39:34,181 | INFO | Creating Qdrant collection...
2025-07-29 21:39:35,060 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:39:35,493 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:39:35,493 | INFO | Qdrant collection created.
2025-07-29 21:40:16,884 | INFO | Creating Qdrant collection...
2025-07-29 21:40:17,796 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:40:18,205 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-29 21:40:18,220 | INFO | Qdrant collection created.
2025-07-30 11:35:33,830 | INFO | Creating Qdrant collection...
2025-07-30 11:35:35,116 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 11:35:35,710 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 11:35:36,135 | INFO | Qdrant collection created.
2025-07-30 11:36:49,638 | INFO | Starting upload for file: Policy.pdf
2025-07-30 11:36:49,655 | WARNING | File already exists.
2025-07-30 11:36:50,637 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 400 Bad Request"
2025-07-30 11:36:50,654 | ERROR | Upload error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 127, in upload_file
    if not check_embeddings_exist(file.filename):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 90, in check_embeddings_exist
    results = client.scroll(
              ^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 1459, in scroll
    return self._client.scroll(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 1719, in scroll
    self.openapi_client.points_api.scroll_points(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\points_api.py", line 936, in scroll_points
    return self._build_for_scroll_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\points_api.py", line 410, in _build_for_scroll_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Bad request: Index required but not found for \\"file_name\\" of one of the following types: [keyword]. Help: Create an index for this key or use a different filter."},"time":0.00 ...'
2025-07-30 12:36:11,942 | INFO | Creating Qdrant collection...
2025-07-30 12:36:11,942 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 39, in create_collection
    client.recreate_collection(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 2474, in recreate_collection
    assert len(kwargs) == 0, f"Unknown arguments: {list(kwargs.keys())}"
           ^^^^^^^^^^^^^^^^
AssertionError: Unknown arguments: ['payload_schema']
2025-07-30 12:39:11,473 | INFO | Creating Qdrant collection...
2025-07-30 12:39:12,394 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:39:12,847 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:39:12,847 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 44, in create_collection
    client.set_payload_schema(
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QdrantClient' object has no attribute 'set_payload_schema'
2025-07-30 12:39:57,329 | INFO | Creating Qdrant collection...
2025-07-30 12:39:58,193 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:39:58,631 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:39:58,647 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 44, in create_collection
    client.set_payload_schema(
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QdrantClient' object has no attribute 'set_payload_schema'
2025-07-30 12:40:56,554 | INFO | Creating Qdrant collection...
2025-07-30 12:40:57,480 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:40:57,903 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:40:57,919 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 44, in create_collection
    client.set_payload_schema(
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QdrantClient' object has no attribute 'set_payload_schema'
2025-07-30 12:41:56,424 | INFO | Creating Qdrant collection...
2025-07-30 12:41:57,317 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:41:57,756 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:41:57,771 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 44, in create_collection
    client.set_payload_schema(
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QdrantClient' object has no attribute 'set_payload_schema'
2025-07-30 12:45:47,124 | INFO | Creating Qdrant collection...
2025-07-30 12:45:48,159 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:45:48,615 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:45:48,631 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 44, in create_collection
    client.set_payload_schema(
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QdrantClient' object has no attribute 'set_payload_schema'
2025-07-30 12:47:23,778 | INFO | Creating Qdrant collection...
2025-07-30 12:47:25,957 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:47:26,461 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:47:26,477 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 44, in create_collection
    client.set_payload_schema(
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QdrantClient' object has no attribute 'set_payload_schema'
2025-07-30 12:48:10,521 | INFO | Creating Qdrant collection...
2025-07-30 12:48:11,417 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:48:11,818 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:48:11,818 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 69, in startup_event
    embedding.create_collection("documents")
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 44, in create_collection
    client.set_payload_schema(
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QdrantClient' object has no attribute 'set_payload_schema'
2025-07-30 12:50:13,686 | INFO | Creating Qdrant collection...
2025-07-30 12:50:14,579 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:50:14,970 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:50:14,986 | INFO | Qdrant collection created.
2025-07-30 12:50:56,508 | INFO | Creating Qdrant collection...
2025-07-30 12:50:57,448 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:50:57,903 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 12:50:57,919 | INFO | Qdrant collection created.
2025-07-30 12:51:41,806 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-30 12:51:41,806 | WARNING | File already exists.
2025-07-30 12:51:42,605 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 12:51:42,627 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 12:51:55,873 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 12:52:05,289 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-30 12:52:05,289 | WARNING | File already exists.
2025-07-30 12:52:06,090 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 12:52:06,106 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-30 12:52:24,623 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Total Price\",\n    \"Sale Date\"\n   ],\n   \"table_name\": \"Sales_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.010384658972422281
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 72,
        "total_token_count": 1477
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-30 12:52:24,623 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-30 12:52:24,623 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-30 12:52:24,623 | INFO | 📊 Executing SQL: SELECT "Total Price", "Sale Date" FROM "Sales_Details" LIMIT 10
2025-07-30 12:52:29,739 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-30 12:52:29,739 | WARNING | File already exists.
2025-07-30 12:52:30,839 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 12:52:30,839 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-30 12:52:40,873 | INFO | Starting upload for file: Policy.pdf
2025-07-30 12:52:40,873 | WARNING | File already exists.
2025-07-30 12:52:41,673 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 12:52:41,677 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 12:52:42,555 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 12:52:56,695 | INFO | Starting upload for file: Policy.pdf
2025-07-30 12:52:56,695 | WARNING | File already exists.
2025-07-30 12:52:57,508 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 12:52:57,508 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 12:52:58,339 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 12:54:03,157 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"What are the limitations for file uploads?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.05694950751538547
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 53,
        "total_token_count": 1458
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-30 12:54:03,157 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What are the limitations for file uploads?'}}}
2025-07-30 12:54:03,157 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What are the limitations for file uploads?'}
2025-07-30 12:54:04,441 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-30 12:54:36,674 | INFO | Starting upload for file: Policy.pdf
2025-07-30 12:54:36,674 | WARNING | File already exists.
2025-07-30 12:54:38,824 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 12:54:38,841 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 12:54:39,858 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 15:46:50,856 | INFO | Creating Qdrant collection...
2025-07-30 15:46:51,828 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 15:46:52,229 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 15:46:52,229 | INFO | Qdrant collection created.
2025-07-30 15:47:26,413 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-30 15:47:26,413 | WARNING | File already exists.
2025-07-30 15:47:27,379 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 15:47:27,413 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 15:47:40,827 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 15:47:53,129 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-30 15:47:53,131 | WARNING | File already exists.
2025-07-30 15:47:54,080 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 15:47:54,096 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-30 15:48:03,932 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Total Price\", \"Sale Date\"], \"table_name\": \"Sales_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.0216261757456738
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 46,
        "total_token_count": 1451
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-30 15:48:03,963 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}}}
2025-07-30 15:48:03,963 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Total Price', 'Sale Date'], 'table_name': 'Sales_Details'}
2025-07-30 15:48:03,963 | INFO | 📊 Executing SQL: SELECT "Total Price", "Sale Date" FROM "Sales_Details" LIMIT 10
2025-07-30 15:48:13,679 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-30 15:48:13,684 | WARNING | File already exists.
2025-07-30 15:48:14,596 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 15:48:14,604 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-30 15:48:21,747 | INFO | Starting upload for file: Policy.pdf
2025-07-30 15:48:21,763 | WARNING | File already exists.
2025-07-30 15:48:22,630 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 15:48:22,630 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 15:48:23,683 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 15:48:44,230 | INFO | Starting upload for file: Policy.pdf
2025-07-30 15:48:44,247 | WARNING | File already exists.
2025-07-30 15:48:45,263 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 15:48:45,280 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 15:48:46,163 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 15:49:16,080 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_policy_info\",\n    \"arguments\": {\n      \"query\": \"What are the limitations for uploading files?\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.026920017329129305
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 55,
        "total_token_count": 1460
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-30 15:49:16,097 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What are the limitations for uploading files?'}}}
2025-07-30 15:49:16,097 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What are the limitations for uploading files?'}
2025-07-30 15:49:17,597 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-30 15:50:11,781 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_policy_info\",\n  \"arguments\": {\n   \"query\": \"Is there any limitation to upload a file?\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.06119561636889422
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 54,
        "total_token_count": 1459
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-30 15:50:11,797 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'Is there any limitation to upload a file?'}}}
2025-07-30 15:50:11,797 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'Is there any limitation to upload a file?'}
2025-07-30 15:50:13,248 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-30 16:00:12,568 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 76, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\grpc\_interceptor.py", line 277, in __call__
    response, ignored_call = self._with_call(
                             ^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\grpc\_interceptor.py", line 332, in _with_call
    return call.result(), call
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\grpc\_channel.py", line 440, in result
    raise self
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\grpc\_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\grpc\_channel.py", line 1198, in with_call
    return _end_unary_response_blocking(state, call, True, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\grpc\_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "The model is overloaded. Please try again later."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.43.42:443 {grpc_message:"The model is overloaded. Please try again later.", grpc_status:14, created_time:"2025-07-30T10:30:12.3846829+00:00"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ServiceUnavailable: 503 The model is overloaded. Please try again later.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 96, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 8, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 98, in search_similar
    response = qa_model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 221, in _retry_error_helper
    raise final_exc from source_exc
google.api_core.exceptions.RetryError: Timeout of 600.0s exceeded, last exception: 503 The model is overloaded. Please try again later.
2025-07-30 16:00:15,536 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:00:15,552 | WARNING | File already exists.
2025-07-30 16:00:16,652 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:00:16,668 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 16:00:17,652 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 16:01:35,240 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:01:35,252 | WARNING | File already exists.
2025-07-30 16:01:36,186 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:01:36,203 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 16:01:37,153 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 16:01:45,752 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:01:45,752 | WARNING | File already exists.
2025-07-30 16:01:46,686 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:01:46,686 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 16:01:47,569 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 16:10:45,149 | INFO | Creating Qdrant collection...
2025-07-30 16:10:45,974 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:10:46,350 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:10:46,366 | INFO | Qdrant collection created.
2025-07-30 16:11:22,766 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:11:22,783 | WARNING | File already exists.
2025-07-30 16:11:23,631 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:11:23,667 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 16:11:26,716 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 16:11:45,966 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:11:45,966 | WARNING | File already exists.
2025-07-30 16:11:46,882 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:11:46,890 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-30 16:15:07,034 | WARNING | ❌ Exception in decide_tool_call:
2025-07-30 16:15:07,034 | ERROR | 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\decision.py", line 23, in decide_tool_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]
2025-07-30 16:15:09,334 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:15:09,352 | WARNING | File already exists.
2025-07-30 16:15:10,201 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:15:10,218 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-30 16:18:32,996 | INFO | Creating Qdrant collection...
2025-07-30 16:18:33,904 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:18:34,347 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:18:34,352 | INFO | Qdrant collection created.
2025-07-30 16:18:59,117 | INFO | Creating Qdrant collection...
2025-07-30 16:19:00,087 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:19:00,488 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:19:00,488 | INFO | Qdrant collection created.
2025-07-30 16:19:58,033 | INFO | Creating Qdrant collection...
2025-07-30 16:19:58,926 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:19:59,437 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-30 16:19:59,437 | INFO | Qdrant collection created.
2025-07-30 16:20:29,690 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:20:29,693 | WARNING | File already exists.
2025-07-30 16:20:30,655 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:20:30,689 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-30 16:20:32,304 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-30 16:20:41,054 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:20:41,070 | WARNING | File already exists.
2025-07-30 16:20:41,987 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:20:42,004 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-30 16:21:05,904 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_policy_info\",\n    \"arguments\": {\n      \"query\": \"What are the limitations on file uploads?\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.053194093704223636
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 55,
        "total_token_count": 1460
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-30 16:21:05,921 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What are the limitations on file uploads?'}}}
2025-07-30 16:21:05,921 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What are the limitations on file uploads?'}
2025-07-30 16:21:07,437 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-30 16:21:08,054 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 96, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 8, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 98, in search_similar
    response = qa_model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.NotFound: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-07-30 16:21:10,220 | INFO | Starting upload for file: Policy.pdf
2025-07-30 16:21:10,237 | WARNING | File already exists.
2025-07-30 16:21:10,620 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-30 16:21:10,620 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 14:39:06,223 | INFO | Creating Qdrant collection...
2025-07-31 14:39:07,041 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:39:07,420 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:39:07,424 | INFO | Qdrant collection created.
2025-07-31 14:40:46,361 | INFO | Starting upload for file: Policy.pdf
2025-07-31 14:40:46,368 | WARNING | File already exists.
2025-07-31 14:40:47,344 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 14:40:47,375 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 14:40:50,668 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 14:41:07,535 | INFO | Starting upload for file: Policy.pdf
2025-07-31 14:41:07,535 | WARNING | File already exists.
2025-07-31 14:41:08,469 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 14:41:08,485 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 14:41:09,719 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_policy_info\",\n    \"arguments\": {\n      \"query\": \"What are the limitations for uploading files?\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.02917177893898704
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 55,
        "total_token_count": 1460
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 14:41:09,751 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What are the limitations for uploading files?'}}}
2025-07-31 14:41:09,752 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What are the limitations for uploading files?'}
2025-07-31 14:41:10,568 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-31 14:41:11,684 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 96, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 8, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 98, in search_similar
    response = qa_model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.NotFound: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-07-31 14:41:14,936 | INFO | Starting upload for file: Policy.pdf
2025-07-31 14:41:14,936 | WARNING | File already exists.
2025-07-31 14:41:15,219 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 14:41:15,235 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 14:46:02,041 | INFO | Creating Qdrant collection...
2025-07-31 14:46:02,979 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:46:03,488 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:46:03,496 | INFO | Qdrant collection created.
2025-07-31 14:48:56,295 | INFO | Creating Qdrant collection...
2025-07-31 14:48:57,158 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:48:57,615 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:48:57,631 | INFO | Qdrant collection created.
2025-07-31 14:49:32,425 | INFO | Starting upload for file: Policy.pdf
2025-07-31 14:49:32,438 | WARNING | File already exists.
2025-07-31 14:49:33,272 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 14:49:33,306 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 14:49:34,973 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 14:50:12,889 | INFO | Starting upload for file: Policy.pdf
2025-07-31 14:50:12,906 | WARNING | File already exists.
2025-07-31 14:50:14,173 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 14:50:14,173 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 14:50:15,390 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_policy_info\",\n    \"arguments\": {\n      \"query\": \"What are the limitations for uploading files?\"\n    }\n  }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.023356259952891957
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1405,
        "candidates_token_count": 55,
        "total_token_count": 1460
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 14:50:15,406 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What are the limitations for uploading files?'}}}
2025-07-31 14:50:15,406 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What are the limitations for uploading files?'}
2025-07-31 14:50:16,206 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-31 14:50:19,806 | INFO | Starting upload for file: Policy.pdf
2025-07-31 14:50:19,806 | WARNING | File already exists.
2025-07-31 14:50:20,106 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 14:50:20,106 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 14:56:43,947 | INFO | Creating Qdrant collection...
2025-07-31 14:56:44,966 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:56:45,387 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:56:45,403 | INFO | Qdrant collection created.
2025-07-31 14:57:12,807 | INFO | Creating Qdrant collection...
2025-07-31 14:57:13,726 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:57:14,094 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:57:14,094 | INFO | Qdrant collection created.
2025-07-31 14:57:36,469 | INFO | Creating Qdrant collection...
2025-07-31 14:57:37,312 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:57:37,816 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:57:37,823 | INFO | Qdrant collection created.
2025-07-31 14:58:10,359 | INFO | Creating Qdrant collection...
2025-07-31 14:58:11,250 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:58:11,661 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:58:11,661 | INFO | Qdrant collection created.
2025-07-31 14:58:31,142 | INFO | Creating Qdrant collection...
2025-07-31 14:58:31,990 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:58:32,365 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 14:58:32,381 | INFO | Qdrant collection created.
2025-07-31 15:03:07,886 | INFO | Creating Qdrant collection...
2025-07-31 15:03:08,936 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:03:09,343 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:03:09,343 | INFO | Qdrant collection created.
2025-07-31 15:04:05,746 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:04:05,746 | WARNING | File already exists.
2025-07-31 15:04:06,729 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:04:06,762 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 15:04:08,462 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 15:04:26,913 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:04:26,929 | WARNING | File already exists.
2025-07-31 15:04:27,813 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:04:27,813 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 15:04:29,564 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"handle_unknown_query\",\n    \"arguments\": {\n      \"message\": \"The user is asking a question about file upload limitations, which is not related to order details or policy information.\"\n    }\n  }\n}\n```"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1485,
        "candidates_token_count": 68,
        "total_token_count": 1684
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 15:04:29,580 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'handle_unknown_query', 'arguments': {'message': 'The user is asking a question about file upload limitations, which is not related to order details or policy information.'}}}
2025-07-31 15:04:29,580 | INFO | ⚙️ Dispatching function: handle_unknown_query with args: {'message': 'The user is asking a question about file upload limitations, which is not related to order details or policy information.'}
2025-07-31 15:04:31,780 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:04:31,796 | WARNING | File already exists.
2025-07-31 15:04:32,079 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:04:32,079 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 15:07:19,730 | INFO | Creating Qdrant collection...
2025-07-31 15:07:20,548 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:07:20,977 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:07:20,977 | INFO | Qdrant collection created.
2025-07-31 15:07:42,364 | INFO | Creating Qdrant collection...
2025-07-31 15:07:43,275 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:07:43,682 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:07:43,697 | INFO | Qdrant collection created.
2025-07-31 15:08:56,811 | INFO | Creating Qdrant collection...
2025-07-31 15:08:57,736 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:08:58,112 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:08:58,127 | INFO | Qdrant collection created.
2025-07-31 15:10:32,715 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:10:32,721 | WARNING | File already exists.
2025-07-31 15:10:33,563 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:10:33,599 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 15:10:36,048 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 15:11:17,116 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:11:17,133 | WARNING | File already exists.
2025-07-31 15:11:18,016 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:11:18,016 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 15:11:27,716 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"handle_unknown_query\",\n    \"arguments\": {\n      \"message\": \"The user is asking about file upload limitations, which is not related to order details or platform policies.\"\n    }\n  }\n}\n```"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1485,
        "candidates_token_count": 66,
        "total_token_count": 2199
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 15:11:27,749 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'handle_unknown_query', 'arguments': {'message': 'The user is asking about file upload limitations, which is not related to order details or platform policies.'}}}
2025-07-31 15:11:27,749 | INFO | ⚙️ Dispatching function: handle_unknown_query with args: {'message': 'The user is asking about file upload limitations, which is not related to order details or platform policies.'}
2025-07-31 15:11:29,949 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:11:29,965 | WARNING | File already exists.
2025-07-31 15:11:30,749 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:11:30,749 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 15:18:56,999 | INFO | Creating Qdrant collection...
2025-07-31 15:18:58,297 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:18:58,782 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:18:58,782 | INFO | Qdrant collection created.
2025-07-31 15:19:31,783 | INFO | Creating Qdrant collection...
2025-07-31 15:19:32,630 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:19:33,100 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 15:19:33,115 | INFO | Qdrant collection created.
2025-07-31 15:20:04,920 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:20:04,935 | WARNING | File already exists.
2025-07-31 15:20:05,804 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:20:05,837 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 15:20:08,637 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 15:20:17,103 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:20:17,120 | WARNING | File already exists.
2025-07-31 15:20:18,053 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:20:18,053 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 15:20:23,837 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"function_call\": {\n    \"name\": \"get_policy_info\",\n    \"arguments\": {\n      \"query\": \"is there any limitations to upload a file?\"\n    }\n  }\n}\n```"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1485,
        "candidates_token_count": 55,
        "total_token_count": 1896
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 15:20:23,854 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'is there any limitations to upload a file?'}}}
2025-07-31 15:20:23,854 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'limitations for uploading files'}
2025-07-31 15:20:25,303 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-31 15:20:35,903 | INFO | Starting upload for file: Policy.pdf
2025-07-31 15:20:35,920 | WARNING | File already exists.
2025-07-31 15:20:36,803 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 15:20:36,803 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 17:10:17,906 | INFO | Creating Qdrant collection...
2025-07-31 17:10:18,769 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:10:19,161 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:10:19,161 | INFO | Qdrant collection created.
2025-07-31 17:10:53,004 | INFO | Starting upload for file: Policy.pdf
2025-07-31 17:10:53,005 | WARNING | File already exists.
2025-07-31 17:10:53,855 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 17:10:53,888 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 17:10:55,305 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 17:11:32,552 | INFO | Creating Qdrant collection...
2025-07-31 17:11:33,556 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:11:33,954 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:11:33,954 | INFO | Qdrant collection created.
2025-07-31 17:11:56,480 | INFO | Creating Qdrant collection...
2025-07-31 17:11:57,327 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:11:57,815 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:11:57,815 | INFO | Qdrant collection created.
2025-07-31 17:12:39,489 | INFO | Starting upload for file: Policy.pdf
2025-07-31 17:12:39,506 | WARNING | File already exists.
2025-07-31 17:12:40,372 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 17:12:40,405 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 17:12:41,839 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 17:12:53,422 | INFO | Starting upload for file: Policy.pdf
2025-07-31 17:12:53,438 | WARNING | File already exists.
2025-07-31 17:12:54,240 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 17:12:54,255 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 17:13:00,673 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "I'm sorry, I'm not able to answer that. Is there anything else you need help with?\n{\"function_call\": {\"name\": \"handle_unknown_query\", \"arguments\": {\"message\": \"The user is asking about file upload limitations, which is not a supported feature.\"}}}"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1087,
        "candidates_token_count": 63,
        "total_token_count": 1504
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 17:13:00,689 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'handle_unknown_query', 'arguments': {'message': 'The user is asking about file upload limitations, which is not a supported feature.'}}}
2025-07-31 17:13:00,689 | INFO | ⚙️ Dispatching function: handle_unknown_query with args: {'message': 'The user is asking about file upload limitations, which is not a supported feature.'}
2025-07-31 17:13:02,822 | INFO | Starting upload for file: Policy.pdf
2025-07-31 17:13:02,838 | WARNING | File already exists.
2025-07-31 17:13:03,755 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 17:13:03,755 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 17:18:05,432 | INFO | Creating Qdrant collection...
2025-07-31 17:18:06,266 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:18:06,666 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:18:06,674 | INFO | Qdrant collection created.
2025-07-31 17:31:25,531 | INFO | Creating Qdrant collection...
2025-07-31 17:31:26,485 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:31:26,920 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:31:26,920 | INFO | Qdrant collection created.
2025-07-31 17:31:53,340 | INFO | Creating Qdrant collection...
2025-07-31 17:31:54,149 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:31:54,571 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:31:54,571 | INFO | Qdrant collection created.
2025-07-31 17:32:23,071 | INFO | Creating Qdrant collection...
2025-07-31 17:32:23,920 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:32:24,316 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:32:24,316 | INFO | Qdrant collection created.
2025-07-31 17:32:53,484 | INFO | Creating Qdrant collection...
2025-07-31 17:32:54,398 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:32:54,881 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:32:54,887 | INFO | Qdrant collection created.
2025-07-31 17:33:24,823 | INFO | Creating Qdrant collection...
2025-07-31 17:33:25,773 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:33:26,182 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:33:26,190 | INFO | Qdrant collection created.
2025-07-31 17:34:18,092 | INFO | Creating Qdrant collection...
2025-07-31 17:34:19,193 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:34:19,618 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:34:19,626 | INFO | Qdrant collection created.
2025-07-31 17:42:53,388 | INFO | Creating Qdrant collection...
2025-07-31 17:42:54,235 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:42:54,596 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-07-31 17:42:54,596 | INFO | Qdrant collection created.
2025-07-31 17:43:33,337 | INFO | Starting upload for file: Policy.pdf
2025-07-31 17:43:33,337 | WARNING | File already exists.
2025-07-31 17:43:34,238 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 17:43:34,270 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 17:43:37,037 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 17:43:45,738 | INFO | Starting upload for file: Policy.pdf
2025-07-31 17:43:45,738 | WARNING | File already exists.
2025-07-31 17:43:46,570 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 17:43:46,570 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 17:43:47,786 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_policy_info\", \"arguments\": {\"query\": \"What are the limitations to uploading a file?\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.056633673216167246
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1011,
        "candidates_token_count": 38,
        "total_token_count": 1049
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 17:43:47,803 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_policy_info', 'arguments': {'query': 'What are the limitations to uploading a file?'}}}
2025-07-31 17:43:47,803 | INFO | ⚙️ Dispatching function: get_policy_info with args: {'query': 'What are the limitations to uploading a file?'}
2025-07-31 17:43:48,720 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-07-31 17:43:51,920 | INFO | Starting upload for file: Policy.pdf
2025-07-31 17:43:51,936 | WARNING | File already exists.
2025-07-31 17:43:52,220 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 17:43:52,220 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 18:14:30,772 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-31 18:14:30,781 | WARNING | File already exists.
2025-07-31 18:14:32,239 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 18:14:32,270 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-07-31 18:14:45,418 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-07-31 18:16:19,731 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-31 18:16:19,737 | WARNING | File already exists.
2025-07-31 18:16:20,570 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 18:16:20,587 | INFO | Embeddings already exist. Skipping reprocessing.
2025-07-31 18:16:26,500 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\"], \"table_name\": \"Order_Details\", \"whereClause\": {\"Order ID\": \"ORD104\"}}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.008340507745742798
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1012,
        "candidates_token_count": 56,
        "total_token_count": 1068
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-07-31 18:16:26,515 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ORD104'}}}}
2025-07-31 18:16:26,518 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ORD104'}}
2025-07-31 18:16:26,522 | INFO | 📊 Executing SQL: SELECT "Shipping Status" FROM "Order_Details" LIMIT 10
2025-07-31 18:16:56,110 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-07-31 18:16:56,112 | WARNING | File already exists.
2025-07-31 18:16:56,929 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-07-31 18:16:56,933 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-01 11:57:05,805 | INFO | Creating Qdrant collection...
2025-08-01 11:57:06,713 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:57:07,158 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:57:07,158 | INFO | Qdrant collection created.
2025-08-01 11:58:33,825 | INFO | Creating Qdrant collection...
2025-08-01 11:58:34,672 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:58:35,075 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:58:35,075 | INFO | Qdrant collection created.
2025-08-01 11:58:58,878 | INFO | Creating Qdrant collection...
2025-08-01 11:59:00,945 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:59:01,408 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:59:01,410 | INFO | Qdrant collection created.
2025-08-01 11:59:23,140 | INFO | Creating Qdrant collection...
2025-08-01 11:59:24,410 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:59:24,887 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 11:59:24,887 | INFO | Qdrant collection created.
2025-08-01 12:00:30,942 | INFO | Creating Qdrant collection...
2025-08-01 12:00:31,810 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:00:32,227 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:00:32,227 | INFO | Qdrant collection created.
2025-08-01 12:00:54,951 | INFO | Creating Qdrant collection...
2025-08-01 12:00:56,932 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:00:58,606 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:00:58,606 | INFO | Qdrant collection created.
2025-08-01 12:01:25,526 | INFO | Creating Qdrant collection...
2025-08-01 12:01:28,672 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:01:29,462 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:01:29,462 | INFO | Qdrant collection created.
2025-08-01 12:01:51,409 | INFO | Creating Qdrant collection...
2025-08-01 12:01:54,371 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:01:54,780 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:01:54,780 | INFO | Qdrant collection created.
2025-08-01 12:02:12,750 | INFO | Creating Qdrant collection...
2025-08-01 12:02:13,707 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:02:14,109 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:02:14,125 | INFO | Qdrant collection created.
2025-08-01 12:04:14,338 | INFO | Creating Qdrant collection...
2025-08-01 12:04:15,451 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:04:15,889 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:04:15,889 | INFO | Qdrant collection created.
2025-08-01 12:05:25,696 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 12:05:25,696 | WARNING | File already exists.
2025-08-01 12:05:27,013 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 12:05:27,046 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-01 12:05:40,696 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-01 12:06:18,630 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 12:06:18,646 | WARNING | File already exists.
2025-08-01 12:06:19,529 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 12:06:19,529 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-01 12:08:32,381 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\"], \"table_name\": \"Order_Details\", \"whereClause\": {\"Order ID\": \"ORD104\"}}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.008099283490862166
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1012,
        "candidates_token_count": 56,
        "total_token_count": 1068
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-01 12:08:32,397 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ORD104'}}}}
2025-08-01 12:08:32,413 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ORD104'}}
2025-08-01 12:08:32,414 | INFO | 📊 Executing SQL: SELECT "Shipping Status" FROM "Order_Details" LIMIT 10
2025-08-01 12:08:40,746 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 12:08:40,747 | WARNING | File already exists.
2025-08-01 12:08:41,797 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 12:08:41,814 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-01 12:30:00,510 | INFO | Creating Qdrant collection...
2025-08-01 12:30:01,465 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:30:01,859 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 12:30:01,875 | INFO | Qdrant collection created.
2025-08-01 12:30:24,207 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 12:30:24,208 | WARNING | File already exists.
2025-08-01 12:30:25,457 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 12:30:25,491 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-01 12:30:41,641 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-01 12:31:14,508 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 12:31:14,525 | WARNING | File already exists.
2025-08-01 12:31:15,341 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 12:31:15,357 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-01 12:31:16,391 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\"], \"table_name\": \"Order_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.03409595148903983
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1406,
        "candidates_token_count": 42,
        "total_token_count": 1448
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-01 12:31:16,408 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status'], 'table_name': 'Order_Details'}}}
2025-08-01 12:31:16,408 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details'}
2025-08-01 12:31:16,408 | INFO | 📊 Executing SQL: SELECT "Shipping Status" FROM "Order_Details" LIMIT 10
2025-08-01 12:31:24,374 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 12:31:24,391 | WARNING | File already exists.
2025-08-01 12:31:25,424 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 12:31:25,441 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-01 15:52:09,145 | INFO | Creating Qdrant collection...
2025-08-01 15:52:09,966 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 15:52:10,356 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 15:52:10,364 | INFO | Qdrant collection created.
2025-08-01 15:52:31,842 | INFO | Creating Qdrant collection...
2025-08-01 15:52:32,671 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 15:52:33,061 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 15:52:33,065 | INFO | Qdrant collection created.
2025-08-01 16:32:22,217 | INFO | Creating Qdrant collection...
2025-08-01 16:32:23,016 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 16:32:23,381 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-01 16:32:23,384 | INFO | Qdrant collection created.
2025-08-01 16:32:49,195 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 16:32:49,197 | WARNING | File already exists.
2025-08-01 16:32:50,011 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 16:32:50,021 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-01 16:33:22,222 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-01 16:33:47,926 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-01 16:33:47,928 | WARNING | File already exists.
2025-08-01 16:33:48,734 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-01 16:33:48,741 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-01 16:33:50,351 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Order ID\",\n    \"Shipping Status\"\n   ],\n   \"table_name\": \"Order_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.008617898656262292
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1406,
        "candidates_token_count": 72,
        "total_token_count": 1478
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-01 16:33:50,361 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details'}}}
2025-08-01 16:33:50,363 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details'}
2025-08-01 16:33:50,367 | INFO | 📊 Executing SQL: SELECT "Order ID", "Shipping Status" FROM "Order_Details" LIMIT 10
2025-08-04 12:34:15,055 | INFO | Creating Qdrant collection...
2025-08-04 12:34:15,888 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:34:16,327 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:34:16,327 | INFO | Qdrant collection created.
2025-08-04 12:35:31,035 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 12:35:31,035 | WARNING | File already exists.
2025-08-04 12:35:31,835 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 12:35:31,869 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 12:35:45,852 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 12:36:00,570 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 12:36:00,570 | WARNING | File already exists.
2025-08-04 12:36:01,469 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 12:36:01,469 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 12:36:03,304 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\"], \"table_name\": \"Order_Details\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.036278716155460904
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1406,
        "candidates_token_count": 42,
        "total_token_count": 1448
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 12:36:03,319 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status'], 'table_name': 'Order_Details'}}}
2025-08-04 12:36:03,319 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details'}
2025-08-04 12:36:03,319 | INFO | 📊 Executing SQL: SELECT "Shipping Status" FROM "Order_Details" LIMIT 10
2025-08-04 12:36:11,821 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 12:36:11,829 | WARNING | File already exists.
2025-08-04 12:36:12,645 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 12:36:12,645 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 12:52:10,249 | INFO | Creating Qdrant collection...
2025-08-04 12:52:11,109 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:52:11,493 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:52:11,498 | INFO | Qdrant collection created.
2025-08-04 12:52:55,739 | INFO | Creating Qdrant collection...
2025-08-04 12:52:56,579 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:52:56,978 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:52:56,978 | INFO | Qdrant collection created.
2025-08-04 12:53:19,979 | INFO | Creating Qdrant collection...
2025-08-04 12:53:20,815 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:53:21,249 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:53:21,264 | INFO | Qdrant collection created.
2025-08-04 12:53:42,920 | INFO | Creating Qdrant collection...
2025-08-04 12:53:43,746 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:53:44,149 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:53:44,149 | INFO | Qdrant collection created.
2025-08-04 12:59:09,422 | INFO | Creating Qdrant collection...
2025-08-04 12:59:10,285 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:59:10,661 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 12:59:10,661 | INFO | Qdrant collection created.
2025-08-04 13:31:04,886 | INFO | Creating Qdrant collection...
2025-08-04 13:31:05,803 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 13:31:06,212 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 13:31:06,227 | INFO | Qdrant collection created.
2025-08-04 13:31:39,062 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 13:31:39,062 | WARNING | File already exists.
2025-08-04 13:31:39,945 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 13:31:39,962 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 13:31:52,762 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 13:32:16,246 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 13:32:16,246 | WARNING | File already exists.
2025-08-04 13:32:17,253 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 13:32:17,265 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 13:32:18,697 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Order ID\",\n    \"Shipping Status\"\n   ],\n   \"table_name\": \"Order_Details\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.008172430925899081
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1406,
        "candidates_token_count": 72,
        "total_token_count": 1478
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 13:32:18,720 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details'}}}
2025-08-04 13:32:18,729 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details'}
2025-08-04 13:32:18,729 | INFO | 📊 Executing SQL: SELECT "Order ID", "Shipping Status" FROM "Order_Details" LIMIT 10
2025-08-04 13:32:26,979 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 13:32:26,979 | WARNING | File already exists.
2025-08-04 13:32:27,937 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 13:32:27,946 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 16:46:02,433 | INFO | Creating Qdrant collection...
2025-08-04 16:46:03,294 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 16:46:03,720 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 16:46:03,736 | INFO | Qdrant collection created.
2025-08-04 16:46:26,415 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 16:46:26,415 | WARNING | File already exists.
2025-08-04 16:46:27,248 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 16:46:27,264 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 16:46:39,085 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 16:46:48,152 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 16:46:48,152 | WARNING | File already exists.
2025-08-04 16:46:48,986 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 16:46:48,986 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 16:46:55,236 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Order ID\",\n    \"Shipping Status\"\n   ],\n   \"table_name\": \"Order_Details\",\n   \"whereClause\": \"Order ID = 'ORD104'\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.013594556938518177
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 88,
        "total_token_count": 1540
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 16:46:55,236 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}}}
2025-08-04 16:46:55,236 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-04 16:46:55,236 | INFO | 📊 Executing SQL: SELECT "Order ID", "Shipping Status" FROM "Order_Details" LIMIT 10
2025-08-04 16:46:59,380 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 16:46:59,380 | WARNING | File already exists.
2025-08-04 16:47:00,238 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 16:47:00,238 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:06:11,515 | INFO | Creating Qdrant collection...
2025-08-04 17:06:12,372 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:06:12,764 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:06:12,768 | INFO | Qdrant collection created.
2025-08-04 17:06:48,583 | INFO | Creating Qdrant collection...
2025-08-04 17:06:49,553 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:06:49,945 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:06:49,945 | INFO | Qdrant collection created.
2025-08-04 17:07:10,760 | INFO | Creating Qdrant collection...
2025-08-04 17:07:11,557 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:07:11,929 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:07:11,933 | INFO | Qdrant collection created.
2025-08-04 17:07:31,839 | INFO | Creating Qdrant collection...
2025-08-04 17:07:32,654 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:07:33,028 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:07:33,048 | INFO | Qdrant collection created.
2025-08-04 17:07:56,796 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:07:56,796 | WARNING | File already exists.
2025-08-04 17:07:57,579 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:07:57,579 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 17:08:08,996 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 17:08:17,479 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:08:17,479 | WARNING | File already exists.
2025-08-04 17:08:18,279 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:08:18,279 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:08:19,546 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Order ID\", \"Shipping Status\"], \"table_name\": \"Order_Details\", \"whereClause\": \"Order ID = 'ORD104'\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.03993756771087646
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 60,
        "total_token_count": 1512
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 17:08:19,546 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}}}
2025-08-04 17:08:19,546 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-04 17:08:19,546 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 68, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-04 17:11:43,600 | INFO | Creating Qdrant collection...
2025-08-04 17:11:44,431 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:11:44,812 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:11:44,828 | INFO | Qdrant collection created.
2025-08-04 17:12:05,265 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:12:05,265 | WARNING | File already exists.
2025-08-04 17:12:06,097 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:12:06,098 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 17:12:17,536 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 17:12:24,350 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:12:24,350 | WARNING | File already exists.
2025-08-04 17:12:25,164 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:12:25,164 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:12:26,398 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Order ID\",\n    \"Shipping Status\"\n   ],\n   \"table_name\": \"Order_Details\",\n   \"whereClause\": \"Order ID = 'ORD104'\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.014131700450723822
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 88,
        "total_token_count": 1540
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 17:12:26,415 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}}}
2025-08-04 17:12:26,415 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-04 17:12:26,415 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 68, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-04 17:12:30,735 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:12:30,737 | WARNING | File already exists.
2025-08-04 17:12:31,566 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:12:31,566 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:15:32,898 | INFO | Creating Qdrant collection...
2025-08-04 17:15:33,728 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:15:34,152 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:15:34,156 | INFO | Qdrant collection created.
2025-08-04 17:19:40,124 | INFO | Creating Qdrant collection...
2025-08-04 17:19:40,957 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:19:41,344 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:19:41,348 | INFO | Qdrant collection created.
2025-08-04 17:21:51,239 | INFO | Creating Qdrant collection...
2025-08-04 17:21:52,036 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:21:52,414 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:21:52,414 | INFO | Qdrant collection created.
2025-08-04 17:23:05,793 | INFO | Creating Qdrant collection...
2025-08-04 17:23:06,640 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:23:07,035 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:23:07,051 | INFO | Qdrant collection created.
2025-08-04 17:33:26,198 | INFO | Creating Qdrant collection...
2025-08-04 17:33:27,023 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:33:27,395 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:33:27,411 | INFO | Qdrant collection created.
2025-08-04 17:33:57,880 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:33:57,880 | WARNING | File already exists.
2025-08-04 17:33:58,663 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:33:58,680 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 17:34:10,996 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 17:34:18,096 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:34:18,096 | WARNING | File already exists.
2025-08-04 17:34:18,879 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:34:18,879 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:34:20,031 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\"], \"table_name\": \"Order_Details\", \"whereClause\": \"Order ID = 'ORD104' \"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.03725097053929379
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 57,
        "total_token_count": 1509
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 17:34:20,047 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104' "}}}
2025-08-04 17:34:20,047 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104' "}
2025-08-04 17:34:20,097 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 68, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-04 17:34:26,237 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:34:26,246 | WARNING | File already exists.
2025-08-04 17:34:27,030 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:34:27,030 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:38:59,820 | INFO | Creating Qdrant collection...
2025-08-04 17:39:00,932 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:39:01,333 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:39:01,333 | INFO | Qdrant collection created.
2025-08-04 17:39:27,305 | INFO | Creating Qdrant collection...
2025-08-04 17:39:28,120 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:39:28,487 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:39:28,491 | INFO | Qdrant collection created.
2025-08-04 17:39:50,265 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:39:50,265 | WARNING | File already exists.
2025-08-04 17:39:51,049 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:39:51,066 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 17:40:02,532 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 17:40:09,999 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:40:09,999 | WARNING | File already exists.
2025-08-04 17:40:10,816 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:40:10,816 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:40:12,132 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Order ID\",\n    \"Shipping Status\"\n   ],\n   \"table_name\": \"Order_Details\",\n   \"whereClause\": \"Order ID = 'ORD104'\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.012914799831130287
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 88,
        "total_token_count": 1540
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 17:40:12,132 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}}}
2025-08-04 17:40:12,132 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-04 17:40:12,132 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 68, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-04 17:40:17,101 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 17:40:17,115 | WARNING | File already exists.
2025-08-04 17:40:17,919 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 17:40:17,919 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 17:46:49,450 | INFO | Creating Qdrant collection...
2025-08-04 17:46:50,300 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:46:50,683 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:46:50,683 | INFO | Qdrant collection created.
2025-08-04 17:49:03,237 | INFO | Creating Qdrant collection...
2025-08-04 17:49:04,005 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:49:04,382 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 17:49:04,382 | INFO | Qdrant collection created.
2025-08-04 18:03:29,296 | INFO | Creating Qdrant collection...
2025-08-04 18:03:30,111 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 18:03:30,519 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 18:03:30,519 | INFO | Qdrant collection created.
2025-08-04 18:26:54,465 | INFO | Creating Qdrant collection...
2025-08-04 18:26:55,279 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 18:26:55,703 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 18:26:55,703 | INFO | Qdrant collection created.
2025-08-04 18:55:56,063 | INFO | Creating Qdrant collection...
2025-08-04 18:55:56,927 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 18:55:57,318 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 18:55:57,333 | INFO | Qdrant collection created.
2025-08-04 19:01:08,597 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 19:01:08,597 | WARNING | File already exists.
2025-08-04 19:01:09,614 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 19:01:09,614 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 19:01:21,648 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 19:02:03,631 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 19:02:03,631 | WARNING | File already exists.
2025-08-04 19:02:04,414 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 19:02:04,414 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 19:02:06,664 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Order ID\",\n    \"Shipping Status\"\n   ],\n   \"table_name\": \"Order_Details\",\n   \"whereClause\": \"Order ID = 'ORD104'\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.014112677086483349
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 88,
        "total_token_count": 1540
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 19:02:06,681 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}}}
2025-08-04 19:02:06,681 | INFO | ⚙️ Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-04 19:02:06,714 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 68, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-04 19:02:11,014 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 19:02:11,014 | WARNING | File already exists.
2025-08-04 19:02:11,947 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 19:02:11,947 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 19:39:57,252 | INFO | Creating Qdrant collection...
2025-08-04 19:39:58,062 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:39:58,455 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:39:58,470 | INFO | Qdrant collection created.
2025-08-04 19:56:35,491 | INFO | Creating Qdrant collection...
2025-08-04 19:56:36,307 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:56:36,683 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:56:36,699 | INFO | Qdrant collection created.
2025-08-04 19:58:36,779 | INFO | Creating Qdrant collection...
2025-08-04 19:58:37,557 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:58:37,933 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:58:37,949 | INFO | Qdrant collection created.
2025-08-04 19:58:55,275 | INFO | Creating Qdrant collection...
2025-08-04 19:58:56,091 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:58:56,465 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 19:58:56,465 | INFO | Qdrant collection created.
2025-08-04 20:01:02,158 | INFO | Creating Qdrant collection...
2025-08-04 20:01:02,994 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:01:03,392 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:01:03,404 | INFO | Qdrant collection created.
2025-08-04 20:05:26,087 | INFO | Creating Qdrant collection...
2025-08-04 20:05:26,927 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:05:27,310 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:05:27,326 | INFO | Qdrant collection created.
2025-08-04 20:22:51,220 | INFO | Creating Qdrant collection...
2025-08-04 20:22:52,082 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:22:52,491 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:22:52,491 | INFO | Qdrant collection created.
2025-08-04 20:59:29,212 | INFO | Creating Qdrant collection...
2025-08-04 20:59:30,028 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:59:30,404 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 20:59:30,419 | INFO | Qdrant collection created.
2025-08-04 21:00:21,913 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 21:00:21,929 | WARNING | File already exists.
2025-08-04 21:00:22,796 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 21:00:22,829 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-04 21:00:36,829 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-04 21:00:59,796 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 21:00:59,800 | WARNING | File already exists.
2025-08-04 21:01:00,630 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 21:01:00,630 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 21:01:02,030 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n \"function_call\": {\n  \"name\": \"get_order_details\",\n  \"arguments\": {\n   \"columns\": [\n    \"Order ID\",\n    \"Shipping Status\"\n   ],\n   \"table_name\": \"Order_Details\",\n   \"whereClause\": \"Order ID = 'ORD104'\"\n  }\n }\n}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.012396473776210438
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 88,
        "total_token_count": 1540
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-04 21:01:02,047 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}}}
2025-08-04 21:01:02,063 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-04 21:01:02,096 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 68, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-04 21:01:10,814 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-04 21:01:10,814 | WARNING | File already exists.
2025-08-04 21:01:11,644 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-04 21:01:11,663 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-04 21:26:00,893 | INFO | Creating Qdrant collection...
2025-08-04 21:26:01,873 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:26:02,316 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:26:02,316 | INFO | Qdrant collection created.
2025-08-04 21:26:21,264 | INFO | Creating Qdrant collection...
2025-08-04 21:26:22,221 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:26:22,623 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:26:22,623 | INFO | Qdrant collection created.
2025-08-04 21:27:04,391 | INFO | Creating Qdrant collection...
2025-08-04 21:27:05,358 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:27:05,774 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:27:05,774 | INFO | Qdrant collection created.
2025-08-04 21:29:03,974 | INFO | Creating Qdrant collection...
2025-08-04 21:29:04,853 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:29:05,300 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-04 21:29:05,308 | INFO | Qdrant collection created.
2025-08-05 11:29:36,876 | INFO | Creating Qdrant collection...
2025-08-05 11:29:37,702 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:29:38,096 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:29:38,112 | INFO | Qdrant collection created.
2025-08-05 11:30:51,283 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 11:30:51,301 | WARNING | File already exists.
2025-08-05 11:30:52,150 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 11:30:52,183 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 11:31:05,667 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 11:31:53,550 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 11:31:53,567 | WARNING | File already exists.
2025-08-05 11:31:54,383 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 11:31:54,401 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 11:31:55,917 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\"], \"table_name\": \"Order_Details\", \"whereClause\": \"Order ID = 'ORD104' \"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.03511584432501542
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 57,
        "total_token_count": 1509
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 11:31:55,933 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104' "}}}
2025-08-05 11:31:55,933 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104' "}
2025-08-05 11:31:56,000 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 69, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-05 11:32:04,750 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 11:32:04,767 | WARNING | File already exists.
2025-08-05 11:32:05,901 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 11:32:05,901 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 11:39:22,879 | INFO | Creating Qdrant collection...
2025-08-05 11:39:23,727 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:39:24,162 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:39:24,162 | INFO | Qdrant collection created.
2025-08-05 11:39:50,743 | INFO | Creating Qdrant collection...
2025-08-05 11:39:51,603 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:39:51,997 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:39:51,999 | INFO | Qdrant collection created.
2025-08-05 11:40:12,973 | INFO | Creating Qdrant collection...
2025-08-05 11:40:13,837 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:40:14,337 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:40:14,337 | INFO | Qdrant collection created.
2025-08-05 11:46:33,581 | INFO | Creating Qdrant collection...
2025-08-05 11:46:34,444 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:46:34,853 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 11:46:34,853 | INFO | Qdrant collection created.
2025-08-05 12:00:27,346 | INFO | Creating Qdrant collection...
2025-08-05 12:00:28,374 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:00:28,782 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:00:28,782 | INFO | Qdrant collection created.
2025-08-05 12:01:01,084 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 12:01:01,101 | WARNING | File already exists.
2025-08-05 12:01:03,034 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 12:01:03,067 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 12:01:22,251 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 12:01:33,884 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 12:01:33,884 | WARNING | File already exists.
2025-08-05 12:01:34,701 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 12:01:34,717 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 12:01:35,884 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "text": "```json\n{\"function_call\": {\"name\": \"get_order_details\", \"arguments\": {\"columns\": [\"Shipping Status\"], \"table_name\": \"Order_Details\", \"whereClause\": \"Order ID = 'ORD104'\"}}}\n```\n"
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "avg_logprobs": -0.03170920056956155
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1452,
        "candidates_token_count": 56,
        "total_token_count": 1508
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 12:01:35,901 | INFO | ✅ Parsed fallback function_call: {'function_call': {'name': 'get_order_details', 'arguments': {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}}}
2025-08-05 12:01:35,918 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-05 12:01:35,968 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 69, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-05 12:01:44,817 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 12:01:44,817 | WARNING | File already exists.
2025-08-05 12:01:46,951 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 12:01:46,968 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 12:16:12,126 | INFO | Creating Qdrant collection...
2025-08-05 12:16:13,113 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:16:13,727 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:16:13,743 | INFO | Qdrant collection created.
2025-08-05 12:39:44,311 | INFO | Creating Qdrant collection...
2025-08-05 12:39:45,189 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:39:45,584 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:39:45,584 | INFO | Qdrant collection created.
2025-08-05 12:45:08,846 | INFO | Creating Qdrant collection...
2025-08-05 12:45:12,939 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:45:13,567 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 12:45:13,833 | INFO | Qdrant collection created.
2025-08-05 14:11:07,477 | INFO | Creating Qdrant collection...
2025-08-05 14:11:08,355 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 14:11:08,763 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 14:11:08,763 | INFO | Qdrant collection created.
2025-08-05 14:15:43,408 | INFO | Creating Qdrant collection...
2025-08-05 14:15:44,224 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 14:15:44,628 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 14:15:44,639 | INFO | Qdrant collection created.
2025-08-05 14:16:28,266 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 14:16:28,282 | WARNING | File already exists.
2025-08-05 14:16:29,265 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 14:16:29,282 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 14:16:41,365 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 14:16:59,316 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 14:16:59,316 | WARNING | File already exists.
2025-08-05 14:17:00,082 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 14:17:00,082 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 14:17:57,300 | WARNING | ❌ Exception in decide_tool_call:
2025-08-05 14:17:57,300 | ERROR | 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 48
}
]
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\decision.py", line 22, in decide_tool_call
    response = model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 48
}
]
2025-08-05 14:18:02,016 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 14:18:02,016 | WARNING | File already exists.
2025-08-05 14:18:02,817 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 14:18:02,817 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:07:44,410 | INFO | Creating Qdrant collection...
2025-08-05 15:07:45,226 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:07:45,621 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:07:45,637 | INFO | Qdrant collection created.
2025-08-05 15:11:30,458 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:11:30,458 | WARNING | File already exists.
2025-08-05 15:11:31,258 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:11:31,258 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 15:11:42,974 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 15:11:57,291 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:11:57,291 | WARNING | File already exists.
2025-08-05 15:11:58,109 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:11:58,109 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:12:06,008 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status",
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 31,
        "total_token_count": 2936
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 15:12:06,025 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
        values {
          string_value: "Order ID"
        }
      }
    }
  }
}

2025-08-05 15:12:06,025 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 84, in handle_query
    function_call = tool_call["function_call"]
                    ~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'function_call'
2025-08-05 15:12:10,408 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:12:10,408 | WARNING | File already exists.
2025-08-05 15:12:11,208 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:12:11,208 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:27:09,857 | INFO | Creating Qdrant collection...
2025-08-05 15:27:10,665 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:27:11,048 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:27:11,048 | INFO | Qdrant collection created.
2025-08-05 15:27:29,565 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:27:29,565 | WARNING | File already exists.
2025-08-05 15:27:30,481 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:27:30,481 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 15:27:42,016 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 15:27:50,732 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:27:50,732 | WARNING | File already exists.
2025-08-05 15:27:51,532 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:27:51,532 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:27:52,965 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 42,
        "total_token_count": 1700
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 15:27:52,982 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 15:27:52,982 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000027CB7993790>
2025-08-05 15:27:53,031 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 97, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 69, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: no such column: Shipping
2025-08-05 15:27:57,433 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:27:57,433 | WARNING | File already exists.
2025-08-05 15:27:58,222 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:27:58,233 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:36:23,545 | INFO | Creating Qdrant collection...
2025-08-05 15:36:24,375 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:36:24,767 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:36:24,783 | INFO | Qdrant collection created.
2025-08-05 15:36:48,352 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:36:48,352 | WARNING | File already exists.
2025-08-05 15:36:49,136 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:36:49,136 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 15:37:00,772 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 15:37:07,953 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:37:07,953 | WARNING | File already exists.
2025-08-05 15:37:08,736 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:37:08,736 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:37:10,153 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 42,
        "total_token_count": 1696
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 15:37:10,153 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 15:37:10,153 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C2E9ADAED0>
2025-08-05 15:37:10,170 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-05 15:37:14,502 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:37:14,502 | WARNING | File already exists.
2025-08-05 15:37:15,302 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:37:15,302 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:40:13,996 | INFO | Creating Qdrant collection...
2025-08-05 15:40:14,839 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:40:15,269 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:40:15,269 | INFO | Qdrant collection created.
2025-08-05 15:41:47,721 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:41:47,721 | WARNING | File already exists.
2025-08-05 15:41:48,621 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:41:48,621 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 15:42:00,022 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 15:42:16,505 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:42:16,505 | WARNING | File already exists.
2025-08-05 15:42:17,272 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:42:17,272 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:42:18,922 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1706
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 15:42:18,940 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 15:42:18,940 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001594C525A10>
2025-08-05 15:42:18,956 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID "= 'ORD104'
2025-08-05 15:42:23,238 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:42:23,238 | WARNING | File already exists.
2025-08-05 15:42:24,039 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:42:24,039 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:50:12,136 | INFO | Creating Qdrant collection...
2025-08-05 15:50:12,952 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:50:13,341 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 15:50:13,341 | INFO | Qdrant collection created.
2025-08-05 15:50:36,309 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:50:36,309 | WARNING | File already exists.
2025-08-05 15:50:37,092 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:50:37,092 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 15:50:48,992 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 15:50:56,426 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:50:56,426 | WARNING | File already exists.
2025-08-05 15:50:57,192 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:50:57,192 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 15:50:58,876 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1715
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 15:50:58,892 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 15:50:58,892 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000022AB14CB750>
2025-08-05 15:50:58,892 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104'
2025-08-05 15:51:03,142 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 15:51:03,142 | WARNING | File already exists.
2025-08-05 15:51:03,910 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 15:51:03,910 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 16:02:15,125 | INFO | Creating Qdrant collection...
2025-08-05 16:02:15,972 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 16:02:16,379 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 16:02:16,394 | INFO | Qdrant collection created.
2025-08-05 16:02:52,065 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 16:02:52,065 | WARNING | File already exists.
2025-08-05 16:02:52,881 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 16:02:52,898 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 16:03:05,048 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 16:04:36,182 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 16:04:36,182 | WARNING | File already exists.
2025-08-05 16:04:36,982 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 16:04:36,982 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 16:04:38,382 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1679
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 16:04:38,382 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 16:04:38,398 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001D9C16C44D0>
2025-08-05 16:04:38,399 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104'
2025-08-05 16:04:42,549 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 16:04:42,549 | WARNING | File already exists.
2025-08-05 16:04:43,365 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 16:04:43,365 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 16:58:53,290 | INFO | Creating Qdrant collection...
2025-08-05 16:58:54,103 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 16:58:54,481 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 16:58:54,481 | INFO | Qdrant collection created.
2025-08-05 16:59:38,791 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 16:59:38,791 | WARNING | File already exists.
2025-08-05 16:59:39,624 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 16:59:39,641 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 16:59:51,491 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 17:00:07,491 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:00:07,491 | WARNING | File already exists.
2025-08-05 17:00:08,274 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:00:08,274 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 17:00:09,774 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1697
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 17:00:09,774 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 17:00:09,774 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000023330D92F90>
2025-08-05 17:00:09,793 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104'
2025-08-05 17:00:14,039 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:00:14,039 | WARNING | File already exists.
2025-08-05 17:00:14,816 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:00:14,816 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 17:10:46,862 | INFO | Creating Qdrant collection...
2025-08-05 17:10:47,663 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 17:10:48,037 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 17:10:48,037 | INFO | Qdrant collection created.
2025-08-05 17:11:59,563 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:11:59,563 | WARNING | File already exists.
2025-08-05 17:12:00,363 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:12:00,363 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 17:12:11,597 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 17:12:17,930 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:12:17,930 | WARNING | File already exists.
2025-08-05 17:12:18,714 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:12:18,714 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 17:12:20,180 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 42,
        "total_token_count": 1697
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 17:12:20,180 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 17:12:20,180 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002225311FFD0>
2025-08-05 17:12:20,199 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-05 17:12:24,446 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:12:24,446 | WARNING | File already exists.
2025-08-05 17:12:25,223 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:12:25,226 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 17:17:43,240 | INFO | Creating Qdrant collection...
2025-08-05 17:17:44,065 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 17:17:44,455 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 17:17:44,471 | INFO | Qdrant collection created.
2025-08-05 17:18:11,366 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:18:11,366 | WARNING | File already exists.
2025-08-05 17:18:12,166 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:18:12,166 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 17:18:23,500 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 17:18:57,550 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:18:57,550 | WARNING | File already exists.
2025-08-05 17:18:58,350 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:18:58,350 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 17:19:00,100 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ORD104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1775
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 17:19:00,117 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ORD104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 17:19:00,117 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001F0CDF02CD0>
2025-08-05 17:19:00,117 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 98, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 5, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 72, in get_selected_columns
    where_clause = re.sub(r"([\w\s]+)(\s*=\s*)", r'"\1"\2', where_clause)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\re\__init__.py", line 185, in sub
    return _compile(pattern, flags).sub(repl, string, count)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: expected string or bytes-like object, got 'MapComposite'
2025-08-05 17:19:04,368 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:19:04,368 | WARNING | File already exists.
2025-08-05 17:19:05,133 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:19:05,149 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 17:29:12,612 | INFO | Creating Qdrant collection...
2025-08-05 17:29:13,640 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 17:29:14,924 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-05 17:29:14,928 | INFO | Qdrant collection created.
2025-08-05 17:30:12,522 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:30:12,522 | WARNING | File already exists.
2025-08-05 17:30:13,422 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:30:13,422 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-05 17:30:25,222 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-05 17:31:10,389 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:31:10,396 | WARNING | File already exists.
2025-08-05 17:31:11,172 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:31:11,172 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-05 17:31:12,988 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 27,
        "total_token_count": 1662
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-05 17:31:12,988 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-05 17:31:13,004 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002247E4DDA90>
2025-08-05 17:31:13,005 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-05 17:31:17,112 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-05 17:31:17,112 | WARNING | File already exists.
2025-08-05 17:31:17,897 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-05 17:31:17,897 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:02:19,903 | INFO | Creating Qdrant collection...
2025-08-06 16:02:20,735 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:02:21,138 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:02:21,138 | INFO | Qdrant collection created.
2025-08-06 16:03:30,203 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:03:30,203 | WARNING | File already exists.
2025-08-06 16:03:31,006 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:03:31,023 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:03:44,506 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:03:57,274 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:03:57,274 | WARNING | File already exists.
2025-08-06 16:03:58,624 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:03:58,639 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:03:59,990 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 27,
        "total_token_count": 1657
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 16:04:00,024 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-06 16:04:00,024 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000024CC2360310>
2025-08-06 16:04:00,107 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-06 16:04:05,598 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:04:05,598 | WARNING | File already exists.
2025-08-06 16:04:06,383 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:04:06,399 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:19:09,104 | INFO | Creating Qdrant collection...
2025-08-06 16:19:09,950 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:19:10,360 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:19:10,360 | INFO | Qdrant collection created.
2025-08-06 16:19:56,864 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:19:56,864 | WARNING | File already exists.
2025-08-06 16:19:57,664 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:19:57,681 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:20:09,629 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:20:29,664 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:20:29,664 | WARNING | File already exists.
2025-08-06 16:20:30,464 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:20:30,464 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:20:32,014 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 42,
        "total_token_count": 1692
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 16:20:32,030 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-06 16:20:32,030 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001AB735D5550>
2025-08-06 16:20:32,064 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-06 16:20:34,137 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:20:34,147 | WARNING | File already exists.
2025-08-06 16:20:34,413 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:20:34,413 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:41:19,694 | INFO | Creating Qdrant collection...
2025-08-06 16:41:20,549 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:41:20,939 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:41:20,955 | INFO | Qdrant collection created.
2025-08-06 16:41:58,457 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:41:58,457 | WARNING | File already exists.
2025-08-06 16:41:59,211 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:41:59,233 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:42:11,325 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:42:18,440 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:42:18,440 | WARNING | File already exists.
2025-08-06 16:42:19,224 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:42:19,224 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:42:20,540 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1685
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 16:42:20,540 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-06 16:42:20,540 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000027431289350>
2025-08-06 16:42:20,557 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 98, in handle_query
    result = FUNCTION_REGISTRY[function_name](args, sql_query=sql_query)
                                                              ^^^^^^^^^
UnboundLocalError: cannot access local variable 'sql_query' where it is not associated with a value
2025-08-06 16:42:24,857 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:42:24,857 | WARNING | File already exists.
2025-08-06 16:42:25,657 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:42:25,657 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:48:26,548 | INFO | Creating Qdrant collection...
2025-08-06 16:48:27,380 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:48:27,757 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 16:48:27,773 | INFO | Qdrant collection created.
2025-08-06 16:48:59,977 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:48:59,977 | WARNING | File already exists.
2025-08-06 16:49:00,828 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:49:00,828 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:49:12,577 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:49:20,110 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:49:20,110 | WARNING | File already exists.
2025-08-06 16:49:20,927 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:49:20,927 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:49:23,010 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1781
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 16:49:23,027 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-06 16:49:23,027 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C159E1D250>
2025-08-06 16:49:23,027 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-06 16:49:25,094 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:49:25,094 | WARNING | File already exists.
2025-08-06 16:49:25,378 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:49:25,378 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:51:29,195 | INFO | Starting upload for file: Policy.pdf
2025-08-06 16:51:29,195 | WARNING | File already exists.
2025-08-06 16:51:30,011 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:51:30,011 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:51:30,828 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:51:40,179 | INFO | Starting upload for file: Policy.pdf
2025-08-06 16:51:40,179 | WARNING | File already exists.
2025-08-06 16:51:40,995 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:51:40,995 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:51:41,780 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:51:43,378 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "This query is outside the scope of order or policy related questions."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 28,
        "total_token_count": 1653
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 16:51:43,395 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "This query is outside the scope of order or policy related questions."
    }
  }
}

2025-08-06 16:51:43,395 | INFO | Dispatching function: handle_unknown_query with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C15E32A290>
2025-08-06 16:51:45,461 | INFO | Starting upload for file: Policy.pdf
2025-08-06 16:51:45,461 | WARNING | File already exists.
2025-08-06 16:51:45,744 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:51:45,744 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 16:52:18,737 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:52:18,737 | WARNING | File already exists.
2025-08-06 16:52:19,562 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:52:19,562 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:52:30,829 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:52:42,079 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:52:42,079 | WARNING | File already exists.
2025-08-06 16:52:42,895 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:52:42,895 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:52:54,262 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 16:52:55,579 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1669
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 16:52:55,579 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-06 16:52:55,579 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C15E371910>
2025-08-06 16:52:55,596 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-06 16:52:57,679 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 16:52:57,679 | WARNING | File already exists.
2025-08-06 16:52:57,962 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 16:52:57,962 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 16:53:09,312 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:01:30,691 | INFO | Creating Qdrant collection...
2025-08-06 17:01:31,507 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 17:01:31,885 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 17:01:31,901 | INFO | Qdrant collection created.
2025-08-06 17:02:00,536 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:02:00,536 | WARNING | File already exists.
2025-08-06 17:02:01,366 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:02:01,382 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:02:13,400 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:02:21,700 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:02:21,700 | WARNING | File already exists.
2025-08-06 17:02:22,516 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:02:22,516 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:02:25,000 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1729
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 17:02:25,017 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-06 17:02:25,017 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001E7B5515F50>
2025-08-06 17:02:25,017 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-06 17:02:27,083 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:02:27,083 | WARNING | File already exists.
2025-08-06 17:02:27,366 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:02:27,366 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:02:43,467 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:02:43,467 | WARNING | File already exists.
2025-08-06 17:02:44,317 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:02:44,317 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:02:45,133 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:02:55,000 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:02:55,000 | WARNING | File already exists.
2025-08-06 17:02:55,833 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:02:55,833 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:02:56,589 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:02:58,833 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The user is asking about file upload limitations, which is not related to order details or policy information."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 35,
        "total_token_count": 1659
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 17:02:58,833 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The user is asking about file upload limitations, which is not related to order details or policy information."
    }
  }
}

2025-08-06 17:02:58,833 | INFO | Dispatching function: handle_unknown_query with args: <proto.marshal.collections.maps.MapComposite object at 0x000001E7B982DA50>
2025-08-06 17:03:00,917 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:03:00,917 | WARNING | File already exists.
2025-08-06 17:03:01,200 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:03:01,200 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:03:01,918 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:03:32,689 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:03:32,691 | WARNING | File already exists.
2025-08-06 17:03:33,506 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:03:33,509 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:03:57,206 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:03:57,207 | WARNING | File already exists.
2025-08-06 17:03:58,039 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:03:58,042 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:03:59,419 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1530,
        "candidates_token_count": 31,
        "total_token_count": 1646
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 17:03:59,423 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-06 17:03:59,424 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001E7B9858C90>
2025-08-06 17:03:59,428 | INFO | 🧠 Final Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-06 17:04:01,505 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:04:01,507 | WARNING | File already exists.
2025-08-06 17:04:01,786 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:04:01,789 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:04:35,223 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:04:35,226 | WARNING | File already exists.
2025-08-06 17:04:36,037 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:04:36,041 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:04:44,572 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:04:44,574 | WARNING | File already exists.
2025-08-06 17:04:45,371 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:04:45,374 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:04:46,096 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:05:01,951 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:05:01,951 | WARNING | File already exists.
2025-08-06 17:05:02,734 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:05:02,734 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:05:03,467 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:05:05,134 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 25,
        "total_token_count": 1662
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 17:05:05,134 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-08-06 17:05:05,134 | INFO | Dispatching function: get_policy_info with args: <proto.marshal.collections.maps.MapComposite object at 0x000001E7B984B950>
2025-08-06 17:05:05,851 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-06 17:05:11,175 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:05:11,175 | WARNING | File already exists.
2025-08-06 17:05:11,975 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:05:11,991 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:05:12,701 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:36:44,131 | INFO | Creating Qdrant collection...
2025-08-06 17:36:44,979 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 17:36:45,381 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-06 17:36:45,381 | INFO | Qdrant collection created.
2025-08-06 17:37:10,515 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:37:10,516 | WARNING | File already exists.
2025-08-06 17:37:11,349 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:37:11,380 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:37:23,782 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:37:32,769 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:37:32,783 | WARNING | File already exists.
2025-08-06 17:37:33,583 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:37:33,583 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:37:35,299 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1713
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 17:37:35,333 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-06 17:37:35,333 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C3822BFD10>
2025-08-06 17:37:35,350 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-06 17:37:37,483 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-06 17:37:37,499 | WARNING | File already exists.
2025-08-06 17:37:37,776 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:37:37,782 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-06 17:37:49,533 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:37:49,533 | WARNING | File already exists.
2025-08-06 17:37:50,349 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:37:50,349 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:37:51,216 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:38:01,583 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:38:01,599 | WARNING | File already exists.
2025-08-06 17:38:02,399 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:38:02,416 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:38:03,366 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 17:38:04,988 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The user is asking a question about file upload limitations, which is not related to order details or policy information."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 37,
        "total_token_count": 1664
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 17:38:05,000 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The user is asking a question about file upload limitations, which is not related to order details or policy information."
    }
  }
}

2025-08-06 17:38:05,000 | INFO | Dispatching function: handle_unknown_query with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C383D9F4D0>
2025-08-06 17:38:07,118 | INFO | Starting upload for file: Policy.pdf
2025-08-06 17:38:07,132 | WARNING | File already exists.
2025-08-06 17:38:07,616 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 17:38:07,616 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 17:38:08,450 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 18:15:18,218 | INFO | Starting upload for file: Policy.pdf
2025-08-06 18:15:18,229 | WARNING | File already exists.
2025-08-06 18:15:19,287 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 18:15:19,302 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 18:15:21,568 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-06 18:15:22,769 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "what are the policies that are mentioned here?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1529,
        "candidates_token_count": 25,
        "total_token_count": 1615
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-06 18:15:22,782 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "what are the policies that are mentioned here?"
    }
  }
}

2025-08-06 18:15:22,787 | INFO | Dispatching function: get_policy_info with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C383A62550>
2025-08-06 18:15:23,642 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-06 18:15:27,431 | INFO | Starting upload for file: Policy.pdf
2025-08-06 18:15:27,436 | WARNING | File already exists.
2025-08-06 18:15:27,723 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-06 18:15:27,735 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-06 18:15:28,615 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 11:44:41,604 | INFO | Creating Qdrant collection...
2025-08-07 11:44:42,419 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 11:44:42,796 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 11:44:42,796 | INFO | Qdrant collection created.
2025-08-07 11:45:35,962 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 11:45:35,962 | WARNING | File already exists.
2025-08-07 11:45:36,946 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 11:45:36,962 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 11:45:51,493 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 11:46:08,445 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 11:46:08,463 | WARNING | File already exists.
2025-08-07 11:46:09,295 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 11:46:09,295 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 11:46:10,628 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 27,
        "total_token_count": 1649
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 11:46:10,645 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-07 11:46:10,662 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001C5D5993010>
2025-08-07 11:46:10,747 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-07 11:46:12,878 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 11:46:12,895 | WARNING | File already exists.
2025-08-07 11:46:13,178 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 11:46:13,195 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 11:57:42,184 | INFO | Creating Qdrant collection...
2025-08-07 11:57:43,154 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 11:57:43,572 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 11:57:43,572 | INFO | Qdrant collection created.
2025-08-07 11:58:45,876 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 11:58:45,893 | WARNING | File already exists.
2025-08-07 11:58:46,828 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 11:58:46,860 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 11:59:00,277 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 11:59:27,860 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 11:59:27,860 | WARNING | File already exists.
2025-08-07 11:59:28,660 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 11:59:28,660 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 11:59:30,010 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 27,
        "total_token_count": 1663
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 11:59:30,044 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-07 11:59:30,060 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001D2C7D94090>
2025-08-07 11:59:30,127 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-07 11:59:32,276 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 11:59:32,293 | WARNING | File already exists.
2025-08-07 11:59:32,560 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 11:59:32,576 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:42:01,536 | INFO | Creating Qdrant collection...
2025-08-07 12:42:03,623 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 12:42:04,641 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 12:42:04,641 | INFO | Qdrant collection created.
2025-08-07 12:42:34,030 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:42:34,030 | WARNING | File already exists.
2025-08-07 12:42:35,296 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:42:35,313 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 12:42:49,196 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 12:43:02,696 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:43:02,713 | WARNING | File already exists.
2025-08-07 12:43:03,830 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:43:03,844 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:43:07,630 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "total_token_count": 1725
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 12:43:07,646 | WARNING | ⚠️ No structured tool call. Trying fallback.
2025-08-07 12:43:07,646 | ERROR | list index out of range
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\decision.py", line 31, in decide_tool_call
    tool_call = response.candidates[0].content.parts[0].function_call
                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\collections\repeated.py", line 130, in __getitem__
    return self._marshal.to_python(self._pb_type, self.pb[key])
                                                  ~~~~~~~^^^^^
IndexError: list index out of range
2025-08-07 12:43:07,680 | WARNING | ⚠️ Fallback parsing failed.
2025-08-07 12:43:07,697 | ERROR | list index out of range
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\decision.py", line 45, in decide_tool_call
    text = response.candidates[0].content.parts[0].text
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\proto\marshal\collections\repeated.py", line 130, in __getitem__
    return self._marshal.to_python(self._pb_type, self.pb[key])
                                                  ~~~~~~~^^^^^
IndexError: list index out of range
2025-08-07 12:43:09,813 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:43:09,830 | WARNING | File already exists.
2025-08-07 12:43:10,796 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:43:10,813 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:49:34,673 | INFO | Creating Qdrant collection...
2025-08-07 12:49:35,518 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 12:49:35,896 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 12:49:35,896 | INFO | Qdrant collection created.
2025-08-07 12:50:00,566 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:50:00,566 | WARNING | File already exists.
2025-08-07 12:50:01,450 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:50:01,483 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 12:50:16,083 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 12:50:38,667 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:50:38,685 | WARNING | File already exists.
2025-08-07 12:50:39,624 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:50:39,633 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:50:41,101 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 41,
        "total_token_count": 1675
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 12:50:41,121 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-07 12:50:41,133 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002506E668050>
2025-08-07 12:50:41,166 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-07 12:50:43,300 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:50:43,316 | WARNING | File already exists.
2025-08-07 12:50:43,832 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:50:43,833 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:51:25,185 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1530,
        "candidates_token_count": 31,
        "total_token_count": 1658
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 12:51:25,203 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-07 12:51:25,211 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000025071653690>
2025-08-07 12:51:25,236 | INFO | 🧠 Final Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-07 12:51:25,252 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:51:25,260 | WARNING | File already exists.
2025-08-07 12:51:26,326 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:51:26,335 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:51:27,611 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:51:27,619 | WARNING | File already exists.
2025-08-07 12:51:28,061 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:51:28,070 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:51:54,634 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:51:54,651 | WARNING | File already exists.
2025-08-07 12:51:55,617 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:51:55,617 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:51:57,851 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Quantity"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1529,
        "candidates_token_count": 26,
        "total_token_count": 1793
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 12:51:57,867 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Quantity"
        }
      }
    }
  }
}

2025-08-07 12:51:57,884 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002507165AB90>
2025-08-07 12:51:57,901 | INFO | 🧠 Final Query --> SELECT "Quantity" FROM "Sales_Details"
2025-08-07 12:52:00,017 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:52:00,034 | WARNING | File already exists.
2025-08-07 12:52:00,417 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:52:00,417 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:52:35,034 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:52:35,051 | WARNING | File already exists.
2025-08-07 12:52:35,984 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:52:36,001 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:52:37,534 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Quantity",
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1527,
        "candidates_token_count": 30,
        "total_token_count": 1686
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 12:52:37,551 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-08-07 12:52:37,551 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000025071378390>
2025-08-07 12:52:37,569 | INFO | 🧠 Final Query --> SELECT "Quantity", "Product Name" FROM "Sales_Details"
2025-08-07 12:52:39,801 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:52:39,818 | WARNING | File already exists.
2025-08-07 12:52:40,151 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:52:40,151 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 12:59:04,478 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 12:59:04,478 | WARNING | File already exists.
2025-08-07 12:59:05,712 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 12:59:05,717 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 13:51:33,061 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 13:51:33,078 | WARNING | File already exists.
2025-08-07 13:51:34,612 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 13:51:34,628 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 13:51:45,746 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 13:51:45,762 | WARNING | File already exists.
2025-08-07 13:51:46,696 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 13:51:46,696 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 13:51:49,863 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1531,
        "candidates_token_count": 42,
        "total_token_count": 1715
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 13:51:49,879 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-07 13:51:49,895 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x00000250715C55D0>
2025-08-07 13:51:49,896 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-07 13:51:52,028 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 13:51:52,045 | WARNING | File already exists.
2025-08-07 13:51:53,345 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 13:51:53,362 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 13:52:25,429 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 13:52:25,445 | WARNING | File already exists.
2025-08-07 13:52:26,412 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 13:52:26,429 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 13:52:31,412 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The query \"sum of products\" is ambiguous. Please specify if you are looking for the total quantity of products, total sales, or another specific metric."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1524,
        "candidates_token_count": 46,
        "total_token_count": 2339
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 13:52:31,429 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The query \"sum of products\" is ambiguous. Please specify if you are looking for the total quantity of products, total sales, or another specific metric."
    }
  }
}

2025-08-07 13:52:31,445 | INFO | Dispatching function: handle_unknown_query with args: <proto.marshal.collections.maps.MapComposite object at 0x000002506D1C5B10>
2025-08-07 13:52:33,562 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 13:52:33,579 | WARNING | File already exists.
2025-08-07 13:52:34,445 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 13:52:34,461 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 13:52:48,079 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 13:52:48,079 | WARNING | File already exists.
2025-08-07 13:52:48,948 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 13:52:48,963 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 14:02:55,933 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 14:02:55,950 | WARNING | File already exists.
2025-08-07 14:02:57,083 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 14:02:57,083 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 14:03:04,150 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The query requires aggregation and filtering by category, which is not supported by the available functions for retrieving order details."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1526,
        "candidates_token_count": 37,
        "total_token_count": 2606
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 14:03:04,167 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The query requires aggregation and filtering by category, which is not supported by the available functions for retrieving order details."
    }
  }
}

2025-08-07 14:03:04,182 | INFO | Dispatching function: handle_unknown_query with args: <proto.marshal.collections.maps.MapComposite object at 0x00000250716824D0>
2025-08-07 14:03:06,317 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 14:03:06,333 | WARNING | File already exists.
2025-08-07 14:03:07,467 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 14:03:07,483 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 16:43:06,484 | INFO | Creating Qdrant collection...
2025-08-07 16:43:07,331 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 16:43:07,755 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 16:43:07,755 | INFO | Qdrant collection created.
2025-08-07 16:43:37,240 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:43:37,240 | WARNING | File already exists.
2025-08-07 16:43:38,023 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:43:38,040 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 16:43:50,445 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 16:44:59,275 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:44:59,275 | WARNING | File already exists.
2025-08-07 16:45:00,109 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:45:00,109 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 16:45:41,441 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:45:41,457 | WARNING | File already exists.
2025-08-07 16:45:42,241 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:45:42,258 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 16:46:23,091 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:46:23,091 | WARNING | File already exists.
2025-08-07 16:46:23,841 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:46:23,857 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 16:46:25,457 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1574,
        "candidates_token_count": 41,
        "total_token_count": 1735
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 16:46:25,474 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 16:46:25,491 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000016D2CC71F10>
2025-08-07 16:46:25,541 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 116, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 17, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 82, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-07 16:46:27,624 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:46:27,624 | WARNING | File already exists.
2025-08-07 16:46:27,891 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:46:27,891 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 16:52:38,914 | INFO | Creating Qdrant collection...
2025-08-07 16:52:39,726 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 16:52:40,135 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 16:52:40,151 | INFO | Qdrant collection created.
2025-08-07 16:53:16,577 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:53:16,577 | WARNING | File already exists.
2025-08-07 16:53:17,361 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:53:17,378 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 16:53:29,294 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 16:54:02,511 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:54:02,511 | WARNING | File already exists.
2025-08-07 16:54:03,294 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:54:03,294 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 16:54:04,678 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 41,
        "total_token_count": 1744
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 16:54:04,678 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 16:54:04,678 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001AB1F403010>
2025-08-07 16:54:04,694 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 116, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 17, in <lambda>
    "get_order_details": lambda args: get_selected_columns(
                                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\sql_handler.py", line 79, in get_selected_columns
    cursor.execute(query)
sqlite3.OperationalError: near "Order": syntax error
2025-08-07 16:54:06,779 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:54:06,779 | WARNING | File already exists.
2025-08-07 16:54:07,046 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:54:07,046 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 16:59:13,780 | INFO | Creating Qdrant collection...
2025-08-07 16:59:14,598 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 16:59:14,994 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 16:59:14,994 | INFO | Qdrant collection created.
2025-08-07 16:59:35,864 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 16:59:35,874 | WARNING | File already exists.
2025-08-07 16:59:36,647 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 16:59:36,664 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 16:59:49,181 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 17:00:05,680 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:00:05,680 | WARNING | File already exists.
2025-08-07 17:00:06,463 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:00:06,464 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 17:00:08,080 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 41,
        "total_token_count": 1745
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 17:00:08,097 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 17:00:08,097 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002D67881F110>
2025-08-07 17:00:08,130 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 17:00:10,197 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:00:10,197 | WARNING | File already exists.
2025-08-07 17:00:10,464 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:00:10,464 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 17:26:25,968 | INFO | Creating Qdrant collection...
2025-08-07 17:26:26,752 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 17:26:27,131 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 17:26:27,147 | INFO | Qdrant collection created.
2025-08-07 17:26:47,142 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:26:47,159 | WARNING | File already exists.
2025-08-07 17:26:47,942 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:26:47,942 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 17:26:59,610 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 17:27:11,593 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:27:11,593 | WARNING | File already exists.
2025-08-07 17:27:12,393 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:27:12,393 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 17:27:14,465 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 41,
        "total_token_count": 1842
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 17:27:14,465 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 17:27:14,477 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002A097E5C050>
2025-08-07 17:27:14,492 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 17:27:16,560 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:27:16,560 | WARNING | File already exists.
2025-08-07 17:27:16,826 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:27:16,826 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 17:46:29,000 | INFO | Creating Qdrant collection...
2025-08-07 17:46:29,863 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 17:46:30,282 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 17:46:30,282 | INFO | Qdrant collection created.
2025-08-07 17:46:51,669 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:46:51,669 | WARNING | File already exists.
2025-08-07 17:46:52,452 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:46:52,452 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 17:47:05,903 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 17:47:17,735 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:47:17,735 | WARNING | File already exists.
2025-08-07 17:47:18,702 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:47:18,736 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 17:47:20,420 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 41,
        "total_token_count": 1735
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 17:47:20,436 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 17:47:20,436 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000023F5B7BAF50>
2025-08-07 17:47:20,454 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= "USA"
2025-08-07 17:47:22,535 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:47:22,535 | WARNING | File already exists.
2025-08-07 17:47:22,802 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:47:22,802 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 17:55:53,012 | INFO | Creating Qdrant collection...
2025-08-07 17:55:53,822 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 17:55:54,242 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 17:55:54,242 | INFO | Qdrant collection created.
2025-08-07 17:56:13,898 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:56:13,898 | WARNING | File already exists.
2025-08-07 17:56:14,689 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:56:14,706 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 17:56:26,756 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 17:56:40,807 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:56:40,807 | WARNING | File already exists.
2025-08-07 17:56:41,606 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:56:41,606 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 17:56:43,673 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 40,
        "total_token_count": 1885
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 17:56:43,673 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 17:56:43,690 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x00000206F22E4810>
2025-08-07 17:56:43,690 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 17:56:45,768 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 17:56:45,776 | WARNING | File already exists.
2025-08-07 17:56:46,040 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 17:56:46,040 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:16:07,047 | INFO | Creating Qdrant collection...
2025-08-07 19:16:07,893 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:16:08,338 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:16:08,338 | INFO | Qdrant collection created.
2025-08-07 19:16:27,577 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:16:27,593 | WARNING | File already exists.
2025-08-07 19:16:28,393 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:16:28,410 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 19:16:40,582 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 19:16:50,726 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:16:50,726 | WARNING | File already exists.
2025-08-07 19:16:51,494 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:16:51,503 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:16:53,204 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 40,
        "total_token_count": 1780
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 19:16:53,210 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 19:16:53,210 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001EB390294D0>
2025-08-07 19:16:53,228 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= "USA"
2025-08-07 19:16:55,281 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:16:55,281 | WARNING | File already exists.
2025-08-07 19:16:55,545 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:16:55,562 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:19:21,788 | INFO | Creating Qdrant collection...
2025-08-07 19:19:22,588 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:19:22,947 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:19:22,947 | INFO | Qdrant collection created.
2025-08-07 19:19:40,665 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:19:40,665 | WARNING | File already exists.
2025-08-07 19:19:41,472 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:19:41,486 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 19:19:53,298 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 19:20:17,661 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:20:17,661 | WARNING | File already exists.
2025-08-07 19:20:18,435 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:20:18,445 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:20:19,995 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 40,
        "total_token_count": 1746
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 19:20:20,012 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 19:20:20,012 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001A14F064FD0>
2025-08-07 19:20:20,029 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 19:20:22,096 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:20:22,096 | WARNING | File already exists.
2025-08-07 19:20:22,363 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:20:22,368 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:22:16,046 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:22:16,046 | WARNING | File already exists.
2025-08-07 19:22:17,079 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:22:17,079 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:22:25,146 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:22:25,146 | WARNING | File already exists.
2025-08-07 19:22:25,962 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:22:25,962 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:22:29,014 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 40,
        "total_token_count": 2035
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 19:22:29,014 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 19:22:29,014 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001A153661250>
2025-08-07 19:22:29,029 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 19:22:33,294 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:22:33,294 | WARNING | File already exists.
2025-08-07 19:22:34,079 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:22:34,079 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:25:32,380 | INFO | Creating Qdrant collection...
2025-08-07 19:25:33,195 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:25:33,620 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:25:33,620 | INFO | Qdrant collection created.
2025-08-07 19:25:56,598 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:25:56,598 | WARNING | File already exists.
2025-08-07 19:25:57,416 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:25:57,416 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 19:26:09,015 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 19:26:16,081 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:26:16,081 | WARNING | File already exists.
2025-08-07 19:26:16,864 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:26:16,864 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:26:18,817 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 41,
        "total_token_count": 1821
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 19:26:18,817 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 19:26:18,817 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000028B2C51FC50>
2025-08-07 19:26:18,831 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-07 19:26:23,014 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:26:23,014 | WARNING | File already exists.
2025-08-07 19:26:23,821 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:26:23,821 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:35:44,820 | INFO | Creating Qdrant collection...
2025-08-07 19:35:45,641 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:35:46,035 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 19:35:46,051 | INFO | Qdrant collection created.
2025-08-07 19:36:06,336 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:36:06,336 | WARNING | File already exists.
2025-08-07 19:36:07,152 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:36:07,152 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 19:36:19,286 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 19:36:26,186 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:36:26,186 | WARNING | File already exists.
2025-08-07 19:36:26,986 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:36:26,986 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 19:36:28,603 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 41,
        "total_token_count": 1750
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 19:36:28,619 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 19:36:28,619 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001818A469350>
2025-08-07 19:36:28,628 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 19:36:32,852 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 19:36:32,852 | WARNING | File already exists.
2025-08-07 19:36:33,636 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 19:36:33,636 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 20:28:03,635 | INFO | Creating Qdrant collection...
2025-08-07 20:28:04,466 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 20:28:04,842 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 20:28:04,858 | INFO | Qdrant collection created.
2025-08-07 20:28:23,832 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 20:28:23,833 | WARNING | File already exists.
2025-08-07 20:28:24,650 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 20:28:24,685 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 20:28:37,666 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 20:28:46,716 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 20:28:46,733 | WARNING | File already exists.
2025-08-07 20:28:47,567 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 20:28:47,567 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 20:28:49,266 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 40,
        "total_token_count": 1733
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 20:28:49,283 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 20:28:49,299 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001ADD6FCF710>
2025-08-07 20:28:49,316 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 20:28:57,132 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 20:28:57,134 | WARNING | File already exists.
2025-08-07 20:28:57,933 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 20:28:57,949 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 20:40:22,171 | INFO | Creating Qdrant collection...
2025-08-07 20:40:23,135 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 20:40:23,581 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 20:40:24,069 | INFO | Qdrant collection created.
2025-08-07 20:40:44,632 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 20:40:44,638 | WARNING | File already exists.
2025-08-07 20:40:45,435 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 20:40:45,457 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 20:40:58,005 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 20:41:05,755 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 20:41:05,771 | WARNING | File already exists.
2025-08-07 20:41:07,538 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 20:41:07,538 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 20:41:27,288 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 30,
        "total_token_count": 5163
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 20:41:27,305 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 20:41:27,305 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002D8E57D6ED0>
2025-08-07 20:41:27,322 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details"
2025-08-07 20:41:35,135 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 20:41:35,150 | WARNING | File already exists.
2025-08-07 20:41:35,970 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 20:41:35,970 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 23:41:43,784 | INFO | Creating Qdrant collection...
2025-08-07 23:41:44,629 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 23:41:45,022 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 23:41:45,038 | INFO | Qdrant collection created.
2025-08-07 23:42:10,399 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:42:10,399 | WARNING | File already exists.
2025-08-07 23:42:11,199 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:42:11,232 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 23:42:24,216 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 23:42:34,798 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:42:34,816 | WARNING | File already exists.
2025-08-07 23:42:35,648 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:42:35,648 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 23:42:37,082 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1577,
        "candidates_token_count": 41,
        "total_token_count": 1764
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 23:42:37,099 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-07 23:42:37,099 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000020A9B245C10>
2025-08-07 23:42:37,132 | INFO | 🧠 Final Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID"= 'ORD104'
2025-08-07 23:42:44,911 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:42:44,926 | WARNING | File already exists.
2025-08-07 23:42:45,712 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:42:45,727 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 23:43:00,616 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:43:00,632 | WARNING | File already exists.
2025-08-07 23:43:01,432 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:43:01,448 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 23:43:03,072 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 40,
        "total_token_count": 1750
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 23:43:03,082 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 23:43:03,082 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000020A9F845590>
2025-08-07 23:43:03,100 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 23:43:05,247 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:43:05,247 | WARNING | File already exists.
2025-08-07 23:43:05,516 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:43:05,532 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 23:53:34,041 | INFO | Creating Qdrant collection...
2025-08-07 23:53:34,867 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 23:53:35,526 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-07 23:53:35,526 | INFO | Qdrant collection created.
2025-08-07 23:53:57,104 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:53:57,104 | WARNING | File already exists.
2025-08-07 23:53:58,054 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:53:58,087 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-07 23:54:11,002 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-07 23:54:20,538 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:54:20,554 | WARNING | File already exists.
2025-08-07 23:54:21,406 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:54:21,406 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-07 23:54:22,704 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 1573,
        "candidates_token_count": 41,
        "total_token_count": 1725
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-07 23:54:22,722 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-07 23:54:22,722 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x00000112B1F6B1D0>
2025-08-07 23:54:22,754 | INFO | 🧠 Final Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-07 23:54:31,286 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-07 23:54:31,302 | WARNING | File already exists.
2025-08-07 23:54:32,133 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-07 23:54:32,133 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 00:12:46,606 | INFO | Creating Qdrant collection...
2025-08-08 00:12:47,437 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 00:12:47,828 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 00:12:47,828 | INFO | Qdrant collection created.
2025-08-08 00:14:07,013 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 00:14:07,013 | WARNING | File already exists.
2025-08-08 00:14:07,830 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 00:14:07,863 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 00:14:22,963 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 00:14:44,297 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 00:14:44,313 | WARNING | File already exists.
2025-08-08 00:14:45,146 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 00:14:45,154 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 00:14:46,530 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2283
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 00:14:46,554 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 00:14:46,562 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000018E5A2A8290>
2025-08-08 00:14:46,579 | INFO | 🧠 Final SQL Query --> SELECT "COUNT(Order ID)" FROM "Sales_Details" WHERE "Country"= "USA"
2025-08-08 00:14:54,214 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 00:14:54,230 | WARNING | File already exists.
2025-08-08 00:14:55,082 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 00:14:55,082 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 00:17:39,265 | INFO | Creating Qdrant collection...
2025-08-08 00:17:40,105 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 00:17:40,521 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 00:17:40,537 | INFO | Qdrant collection created.
2025-08-08 00:18:03,332 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 00:18:03,332 | WARNING | File already exists.
2025-08-08 00:18:04,489 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 00:18:04,522 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 00:18:17,381 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 00:18:45,315 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 00:18:45,315 | WARNING | File already exists.
2025-08-08 00:18:46,182 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 00:18:46,182 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 00:18:47,997 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2351
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 00:18:48,017 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 00:18:48,017 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x00000262D29C23D0>
2025-08-08 00:18:48,040 | INFO | 🧠 Final SQL Query --> SELECT COUNT(Order ID) FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-08 00:18:55,706 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 00:18:55,714 | WARNING | File already exists.
2025-08-08 00:18:56,531 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 00:18:56,539 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 12:56:23,280 | INFO | Creating Qdrant collection...
2025-08-08 12:56:24,124 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 12:56:24,532 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 12:56:24,532 | INFO | Qdrant collection created.
2025-08-08 12:57:36,175 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 12:57:36,179 | WARNING | File already exists.
2025-08-08 12:57:36,960 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 12:57:36,976 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 12:57:48,710 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 12:58:10,194 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 12:58:10,194 | WARNING | File already exists.
2025-08-08 12:58:11,027 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 12:58:11,027 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 12:58:12,846 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 41,
        "total_token_count": 2303
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 12:58:12,862 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 12:58:12,862 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000022452E94990>
2025-08-08 12:58:12,944 | INFO | 🧠 Final SQL Query --> SELECT COUNT(Order ID) FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-08 12:58:24,344 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 12:58:24,344 | WARNING | File already exists.
2025-08-08 12:58:25,144 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 12:58:25,161 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:21:13,187 | INFO | Creating Qdrant collection...
2025-08-08 13:21:14,008 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:21:14,388 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:21:14,388 | INFO | Qdrant collection created.
2025-08-08 13:30:26,876 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:30:26,884 | WARNING | File already exists.
2025-08-08 13:30:27,826 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:30:27,843 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 13:30:40,411 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 13:31:42,709 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:31:42,709 | WARNING | File already exists.
2025-08-08 13:31:43,543 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:31:43,543 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:31:46,026 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2361
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 13:31:46,043 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 13:31:46,043 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x0000019EC0598A50>
2025-08-08 13:31:46,109 | INFO | 🧠 Final SQL Query --> SELECT COUNT(Order ID) FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-08 13:31:51,509 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:31:51,509 | WARNING | File already exists.
2025-08-08 13:31:52,376 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:31:52,376 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:45:28,941 | INFO | Creating Qdrant collection...
2025-08-08 13:45:29,771 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:45:30,179 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:45:30,195 | INFO | Qdrant collection created.
2025-08-08 13:47:29,500 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:47:29,500 | WARNING | File already exists.
2025-08-08 13:47:30,284 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:47:30,301 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 13:47:42,351 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 13:47:51,136 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:47:51,136 | WARNING | File already exists.
2025-08-08 13:47:51,950 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:47:51,959 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:47:53,684 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2315
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 13:47:53,701 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 13:47:53,701 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x00000207901210D0>
2025-08-08 13:47:53,717 | INFO | 🧠 Final SQL Query --> SELECT COUNT(Order ID) FROM "Sales_Details"
2025-08-08 13:48:04,687 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:48:04,687 | WARNING | File already exists.
2025-08-08 13:48:05,534 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:48:05,534 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:52:55,160 | INFO | Creating Qdrant collection...
2025-08-08 13:52:56,007 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:52:56,418 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:52:56,433 | INFO | Qdrant collection created.
2025-08-08 13:53:17,520 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:53:17,520 | WARNING | File already exists.
2025-08-08 13:53:18,336 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:53:18,338 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 13:53:30,436 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 13:53:37,969 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:53:37,969 | WARNING | File already exists.
2025-08-08 13:53:38,753 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:53:38,753 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:53:40,654 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2334
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 13:53:40,654 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 13:53:40,669 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x00000211E294DC50>
2025-08-08 13:53:40,672 | INFO | 🧠 Final SQL Query --> SELECT COUNT(Order ID) FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-08 13:53:45,438 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:53:45,438 | WARNING | File already exists.
2025-08-08 13:53:46,219 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:53:46,236 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:57:53,430 | INFO | Creating Qdrant collection...
2025-08-08 13:57:54,483 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:57:54,889 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 13:57:54,889 | INFO | Qdrant collection created.
2025-08-08 13:58:16,040 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:58:16,040 | WARNING | File already exists.
2025-08-08 13:58:16,872 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:58:16,889 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 13:58:29,155 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 13:58:36,791 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:58:36,791 | WARNING | File already exists.
2025-08-08 13:58:37,622 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:58:37,622 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 13:58:39,605 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2365
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 13:58:39,622 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 13:58:39,622 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002897D181C10>
2025-08-08 13:58:39,622 | INFO | 🧠 Final SQL Query --> SELECT COUNT(Order ID) FROM "Sales_Details" WHERE "Country"= 'USA'
2025-08-08 13:58:44,472 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 13:58:44,472 | WARNING | File already exists.
2025-08-08 13:58:45,255 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 13:58:45,255 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 14:08:02,244 | INFO | Creating Qdrant collection...
2025-08-08 14:08:03,065 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 14:08:03,442 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 14:08:03,458 | INFO | Qdrant collection created.
2025-08-08 14:08:22,576 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:08:22,576 | WARNING | File already exists.
2025-08-08 14:08:23,376 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:08:23,395 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 14:08:35,560 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 14:08:43,043 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:08:43,043 | WARNING | File already exists.
2025-08-08 14:08:43,876 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:08:43,877 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 14:08:45,776 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2329
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 14:08:45,776 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 14:08:45,776 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002257B050AD0>
2025-08-08 14:08:45,776 | INFO | 🧠 Final SQL Query --> SELECT COUNT(Order ID) FROM "Sales_Details" WHERE "Country"= "USA"
2025-08-08 14:08:50,310 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:08:50,310 | WARNING | File already exists.
2025-08-08 14:08:51,110 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:08:51,110 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 14:19:42,436 | INFO | Creating Qdrant collection...
2025-08-08 14:19:43,214 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 14:19:43,607 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 14:19:43,607 | INFO | Qdrant collection created.
2025-08-08 14:21:38,822 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:21:38,822 | WARNING | File already exists.
2025-08-08 14:21:39,600 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:21:39,600 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 14:21:51,233 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 14:22:40,500 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:22:40,500 | WARNING | File already exists.
2025-08-08 14:22:41,283 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:22:41,283 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 14:22:43,083 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT('Order ID')"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 42,
        "total_token_count": 2274
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 14:22:43,099 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(\'Order ID\')"
        }
      }
    }
  }
}

2025-08-08 14:22:43,100 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001FA7DB66710>
2025-08-08 14:22:43,100 | INFO | 🧠 Final SQL Query --> SELECT COUNT("'Order ID'") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 14:36:54,449 | INFO | Creating Qdrant collection...
2025-08-08 14:36:55,280 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 14:36:55,656 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 14:36:55,656 | INFO | Qdrant collection created.
2025-08-08 14:37:33,807 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:37:33,807 | WARNING | File already exists.
2025-08-08 14:37:34,773 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:37:34,773 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 14:37:46,706 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 14:38:09,123 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:38:09,123 | WARNING | File already exists.
2025-08-08 14:38:09,907 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:38:09,923 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 14:38:14,245 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 14:38:14,247 | WARNING | File already exists.
2025-08-08 14:38:14,505 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 14:38:14,505 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 15:33:59,762 | INFO | Creating Qdrant collection...
2025-08-08 15:34:00,593 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:34:00,966 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:34:00,981 | INFO | Qdrant collection created.
2025-08-08 15:34:24,749 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:34:24,749 | WARNING | File already exists.
2025-08-08 15:34:25,563 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:34:25,579 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 15:34:37,300 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 15:34:46,832 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:34:46,832 | WARNING | File already exists.
2025-08-08 15:34:47,649 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:34:47,649 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 15:34:49,749 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2399
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 15:34:49,749 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 15:34:49,765 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000001B75595B050>
2025-08-08 15:34:49,766 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 15:36:17,167 | INFO | Creating Qdrant collection...
2025-08-08 15:36:17,968 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:36:18,332 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:36:18,332 | INFO | Qdrant collection created.
2025-08-08 15:36:39,018 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:36:39,018 | WARNING | File already exists.
2025-08-08 15:36:39,818 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:36:39,834 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 15:36:51,568 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 15:37:11,650 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:37:11,650 | WARNING | File already exists.
2025-08-08 15:37:12,484 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:37:12,484 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 15:37:15,217 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2382,
        "cached_content_token_count": 1712
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 15:37:15,217 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 15:37:15,217 | INFO | Dispatching function: get_order_details with args: <proto.marshal.collections.maps.MapComposite object at 0x000002677E5293D0>
2025-08-08 15:37:15,217 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 15:45:43,503 | INFO | Creating Qdrant collection...
2025-08-08 15:45:44,318 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:45:44,709 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:45:44,709 | INFO | Qdrant collection created.
2025-08-08 15:46:07,127 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:46:07,135 | WARNING | File already exists.
2025-08-08 15:46:07,925 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:46:07,939 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 15:46:20,145 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 15:46:27,772 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:46:27,772 | WARNING | File already exists.
2025-08-08 15:46:28,572 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:46:28,572 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 15:46:30,440 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2281
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 15:46:30,457 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 15:46:30,457 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 93, in handle_query
    args = MessageToDict(args)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\google\protobuf\json_format.py", line 145, in MessageToDict
    return printer._MessageToJsonObject(message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Roaming\Python\Python311\site-packages\google\protobuf\json_format.py", line 180, in _MessageToJsonObject
    message_descriptor = message.DESCRIPTOR
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'MapComposite' object has no attribute 'DESCRIPTOR'
2025-08-08 15:46:35,371 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:46:35,371 | WARNING | File already exists.
2025-08-08 15:46:36,159 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:46:36,159 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 15:48:46,804 | INFO | Creating Qdrant collection...
2025-08-08 15:48:47,620 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:48:48,035 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:48:48,051 | INFO | Qdrant collection created.
2025-08-08 15:49:13,590 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:49:13,590 | WARNING | File already exists.
2025-08-08 15:49:14,381 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:49:14,389 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 15:49:26,373 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 15:49:39,056 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:49:39,056 | WARNING | File already exists.
2025-08-08 15:49:39,856 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:49:39,872 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 15:49:41,922 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2346
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 15:49:41,923 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 15:49:41,923 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-08 15:49:41,923 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 15:53:58,136 | INFO | Creating Qdrant collection...
2025-08-08 15:53:58,999 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:53:59,377 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 15:53:59,377 | INFO | Qdrant collection created.
2025-08-08 15:54:25,842 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:54:25,842 | WARNING | File already exists.
2025-08-08 15:54:26,726 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:54:26,726 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 15:54:39,022 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 15:54:48,775 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 15:54:48,775 | WARNING | File already exists.
2025-08-08 15:54:49,592 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 15:54:49,592 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 15:54:51,342 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2299
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 15:54:51,359 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 15:54:51,359 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-08 15:54:51,359 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 16:04:32,711 | INFO | Creating Qdrant collection...
2025-08-08 16:04:33,558 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:04:33,946 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:04:33,946 | INFO | Qdrant collection created.
2025-08-08 16:05:03,513 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:05:03,513 | WARNING | File already exists.
2025-08-08 16:05:04,330 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:05:04,330 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:05:15,780 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:05:22,097 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:05:22,097 | WARNING | File already exists.
2025-08-08 16:05:22,914 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:05:22,914 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:05:25,348 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 40,
        "total_token_count": 2391
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:05:25,348 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 16:05:25,364 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-08 16:05:25,364 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 16:05:29,847 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:05:29,847 | WARNING | File already exists.
2025-08-08 16:05:30,647 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:05:30,665 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:06:03,314 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:06:03,314 | WARNING | File already exists.
2025-08-08 16:06:04,081 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:06:04,081 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:06:05,430 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2123,
        "candidates_token_count": 31,
        "total_token_count": 2244
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:06:05,432 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-08 16:06:05,432 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-08 16:06:05,432 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-08 16:06:07,666 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:06:07,666 | WARNING | File already exists.
2025-08-08 16:06:07,932 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:06:07,932 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:06:23,081 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:06:23,081 | WARNING | File already exists.
2025-08-08 16:06:23,864 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:06:23,882 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:06:25,599 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2124,
        "candidates_token_count": 41,
        "total_token_count": 2283
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:06:25,603 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-08 16:06:25,603 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-08 16:06:25,603 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104'
2025-08-08 16:06:27,667 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:06:27,667 | WARNING | File already exists.
2025-08-08 16:06:27,936 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:06:27,952 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:09:06,839 | INFO | Creating Qdrant collection...
2025-08-08 16:09:07,701 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:09:08,203 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:09:08,219 | INFO | Qdrant collection created.
2025-08-08 16:09:35,373 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:09:35,373 | WARNING | File already exists.
2025-08-08 16:09:36,415 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:09:36,432 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:09:47,880 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:09:57,650 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:09:57,650 | WARNING | File already exists.
2025-08-08 16:09:58,416 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:09:58,416 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:10:00,034 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2120,
        "candidates_token_count": 41,
        "total_token_count": 2275
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:10:00,051 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 16:10:00,051 | INFO | Dispatching function: get_order_details with args: {'where_clause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-08 16:10:00,051 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 16:10:04,449 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:10:04,449 | WARNING | File already exists.
2025-08-08 16:10:05,234 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:10:05,252 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:10:28,132 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:10:28,132 | WARNING | File already exists.
2025-08-08 16:10:28,916 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:10:28,916 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:10:30,451 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Order ID = \"ORD104\"",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2124,
        "candidates_token_count": 42,
        "total_token_count": 2293
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:10:30,452 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Order ID = \"ORD104\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-08 16:10:30,452 | INFO | Dispatching function: get_order_details with args: {'where_clause': 'Order ID = "ORD104"', 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-08 16:10:30,452 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = "ORD104"
2025-08-08 16:10:32,532 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:10:32,532 | WARNING | File already exists.
2025-08-08 16:10:32,799 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:10:32,799 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:10:46,199 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:10:46,199 | WARNING | File already exists.
2025-08-08 16:10:46,999 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:10:46,999 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:10:48,183 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2123,
        "candidates_token_count": 31,
        "total_token_count": 2249
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:10:48,183 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-08 16:10:48,183 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-08 16:10:48,183 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-08 16:10:50,339 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:10:50,340 | WARNING | File already exists.
2025-08-08 16:10:50,605 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:10:50,617 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:11:01,868 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:11:01,868 | WARNING | File already exists.
2025-08-08 16:11:02,662 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:11:02,678 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:11:10,499 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:11:10,499 | WARNING | File already exists.
2025-08-08 16:11:11,317 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:11:11,333 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:11:12,183 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:11:19,250 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:11:19,250 | WARNING | File already exists.
2025-08-08 16:11:20,084 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:11:20,084 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:11:20,817 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:11:22,783 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {}
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2124,
        "candidates_token_count": 12,
        "total_token_count": 2275
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:11:22,783 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
}

2025-08-08 16:11:22,783 | INFO | Dispatching function: handle_unknown_query with args: {}
2025-08-08 16:11:24,899 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:11:24,899 | WARNING | File already exists.
2025-08-08 16:11:25,183 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:11:25,183 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:11:25,952 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:12:19,267 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:12:19,267 | WARNING | File already exists.
2025-08-08 16:12:20,066 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:12:20,067 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:12:20,817 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:12:22,350 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "what are policies that are mentioned here?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2121,
        "candidates_token_count": 24,
        "total_token_count": 2201
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:12:22,350 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "what are policies that are mentioned here?"
    }
  }
}

2025-08-08 16:12:22,350 | INFO | Dispatching function: get_policy_info with args: {'query': 'what are policies that are mentioned here?'}
2025-08-08 16:12:23,050 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-08 16:12:26,715 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:12:26,715 | WARNING | File already exists.
2025-08-08 16:12:28,371 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:12:28,374 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:12:29,831 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:12:54,418 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:12:54,418 | WARNING | File already exists.
2025-08-08 16:12:55,234 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:12:55,251 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:12:56,017 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:12:57,650 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "policy to upload a document"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2121,
        "candidates_token_count": 21,
        "total_token_count": 2202
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:12:57,650 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "policy to upload a document"
    }
  }
}

2025-08-08 16:12:57,650 | INFO | Dispatching function: get_policy_info with args: {'query': 'policy to upload a document'}
2025-08-08 16:12:58,350 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-08 16:13:03,317 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:13:03,317 | WARNING | File already exists.
2025-08-08 16:13:03,598 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:13:03,598 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:13:04,343 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:13:54,035 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:13:54,035 | WARNING | File already exists.
2025-08-08 16:13:54,834 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:13:54,834 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:13:55,601 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:13:57,567 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "This query is beyond the scope of my current capabilities. I can only provide information about orders and policies."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2124,
        "candidates_token_count": 36,
        "total_token_count": 2255,
        "cached_content_token_count": 1712
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:13:57,584 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "This query is beyond the scope of my current capabilities. I can only provide information about orders and policies."
    }
  }
}

2025-08-08 16:13:57,584 | INFO | Dispatching function: handle_unknown_query with args: {'message': 'This query is beyond the scope of my current capabilities. I can only provide information about orders and policies.'}
2025-08-08 16:13:59,634 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:13:59,634 | WARNING | File already exists.
2025-08-08 16:13:59,900 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:13:59,900 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:14:00,644 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:27:09,809 | INFO | Creating Qdrant collection...
2025-08-08 16:27:10,641 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:27:11,019 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:27:11,019 | INFO | Qdrant collection created.
2025-08-08 16:27:31,274 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:27:31,291 | WARNING | File already exists.
2025-08-08 16:27:32,124 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:27:32,157 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:27:33,490 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:27:40,790 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:27:40,807 | WARNING | File already exists.
2025-08-08 16:27:41,590 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:27:41,590 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:27:42,973 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2154,
        "candidates_token_count": 25,
        "total_token_count": 2249
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:27:42,990 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-08-08 16:27:43,007 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-08-08 16:27:43,957 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-08 16:27:55,674 | INFO | Starting upload for file: Policy.pdf
2025-08-08 16:27:55,690 | WARNING | File already exists.
2025-08-08 16:27:56,565 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:27:56,574 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:35:05,261 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:35:05,277 | WARNING | File already exists.
2025-08-08 16:35:06,447 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:35:06,461 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:35:19,094 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:35:42,661 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:35:42,678 | WARNING | File already exists.
2025-08-08 16:35:43,569 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:35:43,577 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:35:45,094 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Sale Date = \"2025-07-04\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2161,
        "candidates_token_count": 50,
        "total_token_count": 2337
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:35:45,112 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Sale Date = \"2025-07-04\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 16:35:45,112 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Sale Date = "2025-07-04"', 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-08 16:35:45,127 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = "2025-07-04"
2025-08-08 16:35:47,271 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:35:47,286 | WARNING | File already exists.
2025-08-08 16:35:47,575 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:35:47,575 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:37:25,345 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:37:25,345 | WARNING | File already exists.
2025-08-08 16:37:26,345 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:37:26,345 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:37:28,195 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Customer Name = \"Priya Sharma\"",
                    "table_name": "Customer_Info",
                    "columns": [
                      "Join Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2154,
        "candidates_token_count": 40,
        "total_token_count": 2380
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:37:28,195 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Customer Name = \"Priya Sharma\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Customer_Info"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Join Date"
        }
      }
    }
  }
}

2025-08-08 16:37:28,195 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Customer Name = "Priya Sharma"', 'table_name': 'Customer_Info', 'columns': ['Join Date']}
2025-08-08 16:37:28,195 | INFO | 🧠 Final SQL Query --> SELECT "Join Date" FROM "Customer_Info" WHERE "Customer Name" = "Priya Sharma"
2025-08-08 16:37:30,262 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:37:30,262 | WARNING | File already exists.
2025-08-08 16:37:30,528 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:37:30,528 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:41:49,700 | INFO | Creating Qdrant collection...
2025-08-08 16:41:50,626 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:41:51,002 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:41:51,018 | INFO | Qdrant collection created.
2025-08-08 16:42:21,330 | INFO | Starting upload for file: policy details.pdf
2025-08-08 16:42:21,331 | INFO | File saved at: uploads\policy details.pdf
2025-08-08 16:42:21,331 | INFO | Extracting PDF...
2025-08-08 16:42:21,447 | ERROR | Upload error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 177, in upload_file
    embedding.index_document(text.split(". "))
TypeError: index_document() missing 1 required positional argument: 'file_name'
2025-08-08 16:44:32,393 | INFO | Creating Qdrant collection...
2025-08-08 16:44:33,223 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:44:33,617 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 16:44:33,617 | INFO | Qdrant collection created.
2025-08-08 16:44:51,514 | INFO | Starting upload for file: policy details.pdf
2025-08-08 16:44:51,515 | WARNING | File already exists.
2025-08-08 16:44:52,349 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:44:52,382 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:44:55,882 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:45:17,765 | INFO | Starting upload for file: policy details.pdf
2025-08-08 16:45:17,782 | WARNING | File already exists.
2025-08-08 16:45:18,610 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:45:18,615 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:45:20,500 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2308
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:45:20,515 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-08 16:45:20,515 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-08 16:45:21,434 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-08 16:45:32,299 | INFO | Starting upload for file: policy details.pdf
2025-08-08 16:45:32,314 | WARNING | File already exists.
2025-08-08 16:45:33,216 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:45:33,216 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:46:04,981 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:46:04,999 | WARNING | File already exists.
2025-08-08 16:46:05,849 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:46:05,866 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 16:46:19,099 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 16:46:30,616 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:46:30,633 | WARNING | File already exists.
2025-08-08 16:46:31,483 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:46:31,499 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 16:46:35,300 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2381
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 16:46:35,316 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 16:46:35,316 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-08 16:46:35,333 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 16:46:37,499 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 16:46:37,516 | WARNING | File already exists.
2025-08-08 16:46:38,399 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 16:46:38,399 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 17:28:00,035 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 17:28:00,035 | WARNING | File already exists.
2025-08-08 17:28:01,252 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:28:01,252 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 17:28:04,185 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2314
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 17:28:04,185 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-08 17:28:04,202 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-08 17:28:04,202 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-08 17:28:06,335 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 17:28:06,335 | WARNING | File already exists.
2025-08-08 17:28:07,218 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:28:07,218 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 17:36:53,331 | INFO | Creating Qdrant collection...
2025-08-08 17:36:54,139 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 17:36:54,527 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 17:36:54,527 | INFO | Qdrant collection created.
2025-08-08 17:37:14,257 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 17:37:14,257 | WARNING | File already exists.
2025-08-08 17:37:15,390 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:37:15,390 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 17:37:28,390 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 17:37:34,889 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 17:37:34,889 | WARNING | File already exists.
2025-08-08 17:37:35,689 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:37:35,689 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 17:37:37,607 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2364
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 17:37:37,623 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-08 17:37:37,623 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-08 17:37:37,629 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-08 17:37:41,890 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-08 17:37:41,890 | WARNING | File already exists.
2025-08-08 17:37:42,806 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:37:42,806 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 17:42:21,593 | INFO | Creating Qdrant collection...
2025-08-08 17:42:22,434 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 17:42:22,883 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-08 17:42:22,883 | INFO | Qdrant collection created.
2025-08-08 17:43:16,762 | INFO | Starting upload for file: policy details.pdf
2025-08-08 17:43:16,762 | WARNING | File already exists.
2025-08-08 17:43:17,604 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:43:17,604 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-08 17:43:20,225 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-08 17:43:27,225 | INFO | Starting upload for file: policy details.pdf
2025-08-08 17:43:27,225 | WARNING | File already exists.
2025-08-08 17:43:28,042 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:43:28,042 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-08 17:43:29,759 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 25,
        "total_token_count": 2287
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-08 17:43:29,776 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-08-08 17:43:29,776 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-08-08 17:43:30,642 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-08 17:43:37,294 | INFO | Starting upload for file: policy details.pdf
2025-08-08 17:43:37,294 | WARNING | File already exists.
2025-08-08 17:43:38,109 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-08 17:43:38,109 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 11:53:46,842 | INFO | Creating Qdrant collection...
2025-08-11 11:53:47,715 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 11:53:48,293 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 11:53:48,309 | INFO | Qdrant collection created.
2025-08-11 11:54:32,581 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 11:54:32,582 | WARNING | File already exists.
2025-08-11 11:54:33,538 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 11:54:33,573 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 11:54:50,006 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 11:55:00,215 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 11:55:00,215 | WARNING | File already exists.
2025-08-11 11:55:01,382 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 11:55:01,390 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 11:55:03,367 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2337
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 11:55:03,399 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-11 11:55:03,399 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-11 11:55:03,421 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-11 11:55:11,948 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 11:55:11,948 | WARNING | File already exists.
2025-08-11 11:55:13,348 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 11:55:13,356 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 12:48:53,765 | INFO | Creating Qdrant collection...
2025-08-11 12:48:54,628 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 12:48:55,036 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 12:48:55,036 | INFO | Qdrant collection created.
2025-08-11 12:50:58,492 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 12:50:58,492 | WARNING | File already exists.
2025-08-11 12:50:59,340 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 12:50:59,355 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 12:51:11,642 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 12:51:47,392 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 12:51:47,392 | WARNING | File already exists.
2025-08-11 12:51:48,259 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 12:51:48,277 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 12:51:50,525 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2486
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 12:51:50,525 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-11 12:51:50,525 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': 'Country = "USA"'}
2025-08-11 12:51:50,545 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA"
2025-08-11 12:51:56,242 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 12:51:56,242 | WARNING | File already exists.
2025-08-11 12:51:57,096 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 12:51:57,096 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:48:06,579 | INFO | Creating Qdrant collection...
2025-08-11 15:48:07,505 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 15:48:07,928 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 15:48:07,928 | INFO | Qdrant collection created.
2025-08-11 15:49:42,424 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:49:42,424 | WARNING | File already exists.
2025-08-11 15:49:43,390 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:49:43,390 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 15:49:57,557 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 15:50:05,174 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:50:05,174 | WARNING | File already exists.
2025-08-11 15:50:06,057 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:50:06,057 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:50:07,908 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 41,
        "total_token_count": 2329
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 15:50:07,924 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-11 15:50:07,924 | INFO | Dispatching function: get_order_details with args: {'where_clause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-11 15:50:07,924 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-11 15:50:12,351 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:50:12,351 | WARNING | File already exists.
2025-08-11 15:50:13,424 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:50:13,441 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:50:55,658 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:50:55,658 | WARNING | File already exists.
2025-08-11 15:50:56,541 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:50:56,541 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:50:58,124 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2327
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 15:50:58,125 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-11 15:50:58,125 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-11 15:50:58,125 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-11 15:51:00,318 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:51:00,318 | WARNING | File already exists.
2025-08-11 15:51:00,757 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:51:00,765 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:51:28,275 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:51:28,275 | WARNING | File already exists.
2025-08-11 15:51:29,292 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:51:29,292 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:51:36,458 | INFO | Starting upload for file: policy details.pdf
2025-08-11 15:51:36,458 | WARNING | File already exists.
2025-08-11 15:51:37,341 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:51:37,341 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 15:51:39,741 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 15:52:01,408 | INFO | Starting upload for file: policy details.pdf
2025-08-11 15:52:01,408 | WARNING | File already exists.
2025-08-11 15:52:02,242 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:52:02,242 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 15:52:04,642 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 15:52:06,142 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2258
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 15:52:06,142 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-11 15:52:06,142 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-11 15:52:06,925 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-11 15:52:11,542 | INFO | Starting upload for file: policy details.pdf
2025-08-11 15:52:11,542 | WARNING | File already exists.
2025-08-11 15:52:11,891 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:52:11,891 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 15:52:13,858 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 15:54:46,978 | INFO | Starting upload for file: policy details.pdf
2025-08-11 15:54:46,978 | WARNING | File already exists.
2025-08-11 15:54:48,662 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:54:48,662 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 15:54:50,961 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 15:55:04,160 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:55:04,160 | WARNING | File already exists.
2025-08-11 15:55:05,277 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:55:05,277 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:55:24,193 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:55:24,193 | WARNING | File already exists.
2025-08-11 15:55:25,826 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:55:25,826 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 15:55:27,643 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 41,
        "total_token_count": 2357
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 15:55:27,643 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-11 15:55:27,662 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-11 15:55:27,665 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104'
2025-08-11 15:55:29,757 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 15:55:29,757 | WARNING | File already exists.
2025-08-11 15:55:30,101 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 15:55:30,101 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 17:19:33,365 | INFO | Creating Qdrant collection...
2025-08-11 17:19:34,259 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 17:19:34,667 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 17:19:34,682 | INFO | Qdrant collection created.
2025-08-11 17:23:16,067 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 17:23:16,067 | WARNING | File already exists.
2025-08-11 17:23:16,967 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 17:23:16,967 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 17:23:30,550 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 17:23:39,602 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 17:23:39,602 | WARNING | File already exists.
2025-08-11 17:23:40,500 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 17:23:40,500 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 17:23:43,250 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT('Order ID')"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 42,
        "total_token_count": 2546
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 17:23:43,250 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(\'Order ID\')"
        }
      }
    }
  }
}

2025-08-11 17:23:43,250 | INFO | Dispatching function: get_order_details with args: {'columns': ["COUNT('Order ID')"], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-11 17:23:43,270 | INFO | 🧠 Final SQL Query --> SELECT COUNT("'Order ID'") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-11 17:23:47,534 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 17:23:47,534 | WARNING | File already exists.
2025-08-11 17:23:48,467 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 17:23:48,467 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:02:34,999 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:02:35,006 | WARNING | File already exists.
2025-08-11 18:02:36,189 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:02:36,195 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:08:52,662 | INFO | Creating Qdrant collection...
2025-08-11 18:08:53,544 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:08:53,966 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:08:53,970 | INFO | Qdrant collection created.
2025-08-11 18:09:50,756 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:09:50,875 | WARNING | File already exists.
2025-08-11 18:09:51,983 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:09:52,030 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 18:10:06,464 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 18:11:02,580 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:11:02,583 | WARNING | File already exists.
2025-08-11 18:11:03,444 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:11:03,450 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:11:05,358 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ord108'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2331
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 18:11:05,383 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord108\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-11 18:11:05,397 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Order ID = 'ord108'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-11 18:11:05,403 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord108'
2025-08-11 18:11:13,628 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:11:13,630 | WARNING | File already exists.
2025-08-11 18:11:14,503 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:11:14,511 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:11:46,932 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:11:46,934 | WARNING | File already exists.
2025-08-11 18:11:47,800 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:11:47,807 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:11:50,679 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ORD108'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2352
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 18:11:50,686 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD108\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-11 18:11:50,694 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Order ID = 'ORD108'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-11 18:11:50,696 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD108'
2025-08-11 18:11:52,801 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:11:52,805 | WARNING | File already exists.
2025-08-11 18:11:53,648 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:11:53,655 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:14:05,307 | INFO | Creating Qdrant collection...
2025-08-11 18:14:06,171 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:14:06,577 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:14:06,593 | INFO | Qdrant collection created.
2025-08-11 18:14:27,959 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:14:27,959 | WARNING | File already exists.
2025-08-11 18:14:28,808 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:14:28,825 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 18:14:41,861 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 18:14:48,841 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:14:48,841 | WARNING | File already exists.
2025-08-11 18:14:49,691 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:14:49,707 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:14:51,491 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2381
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 18:14:51,509 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-11 18:14:51,509 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-11 18:14:51,509 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-11 18:14:55,941 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:14:55,941 | WARNING | File already exists.
2025-08-11 18:14:56,792 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:14:56,796 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:17:10,424 | INFO | Creating Qdrant collection...
2025-08-11 18:17:11,307 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:17:11,712 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:17:11,712 | INFO | Qdrant collection created.
2025-08-11 18:17:45,726 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:17:45,726 | WARNING | File already exists.
2025-08-11 18:17:46,584 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:17:46,592 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 18:17:59,177 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 18:18:07,959 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:18:07,959 | WARNING | File already exists.
2025-08-11 18:18:08,793 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:18:08,793 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:18:10,609 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2359
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 18:18:10,609 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-11 18:18:10,626 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-11 18:18:10,629 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-11 18:18:14,959 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:18:14,959 | WARNING | File already exists.
2025-08-11 18:18:15,796 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:18:15,796 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:20:06,645 | INFO | Creating Qdrant collection...
2025-08-11 18:20:07,540 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:20:07,947 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-11 18:20:07,947 | INFO | Qdrant collection created.
2025-08-11 18:20:50,978 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:20:50,978 | WARNING | File already exists.
2025-08-11 18:20:51,861 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:20:51,861 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-11 18:21:03,627 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-11 18:24:14,596 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:24:14,596 | WARNING | File already exists.
2025-08-11 18:24:15,462 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:24:15,462 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-11 18:24:17,078 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2332
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-11 18:24:17,078 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-11 18:24:17,078 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-11 18:24:17,095 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-11 18:24:21,796 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-11 18:24:21,796 | WARNING | File already exists.
2025-08-11 18:24:22,631 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-11 18:24:22,631 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 11:32:00,264 | INFO | Creating Qdrant collection...
2025-08-12 11:32:01,081 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 11:32:01,487 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 11:32:01,503 | INFO | Qdrant collection created.
2025-08-12 11:33:05,812 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 11:33:05,819 | WARNING | File already exists.
2025-08-12 11:33:06,619 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 11:33:06,653 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-12 11:33:20,819 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-12 11:33:29,984 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 11:33:29,986 | WARNING | File already exists.
2025-08-12 11:33:31,221 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 11:33:31,236 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 11:33:32,821 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2337
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 11:33:32,836 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-12 11:33:32,854 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-12 11:33:32,868 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-12 11:33:41,486 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 11:33:41,504 | WARNING | File already exists.
2025-08-12 11:33:42,320 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 11:33:42,320 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 11:43:16,038 | INFO | Creating Qdrant collection...
2025-08-12 11:43:16,852 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 11:43:17,246 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 11:43:17,246 | INFO | Qdrant collection created.
2025-08-12 11:54:03,662 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 11:54:03,662 | WARNING | File already exists.
2025-08-12 11:54:04,662 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 11:54:04,698 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-12 11:54:18,242 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-12 11:54:27,297 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 11:54:27,312 | WARNING | File already exists.
2025-08-12 11:54:28,112 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 11:54:28,129 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 11:54:30,196 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 41,
        "total_token_count": 2391
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 11:54:30,213 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-12 11:54:30,229 | INFO | Dispatching function: get_order_details with args: {'where_clause': <proto.marshal.collections.maps.MapComposite object at 0x000001D9FE8DE710>, 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-12 11:54:30,229 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details"
2025-08-12 11:54:38,996 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 11:54:38,996 | WARNING | File already exists.
2025-08-12 11:54:39,786 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 11:54:39,796 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 12:12:24,627 | INFO | Creating Qdrant collection...
2025-08-12 12:12:25,425 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 12:12:25,802 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 12:12:25,818 | INFO | Qdrant collection created.
2025-08-12 12:28:00,628 | INFO | Creating Qdrant collection...
2025-08-12 12:28:01,506 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 12:28:01,868 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 12:28:01,868 | INFO | Qdrant collection created.
2025-08-12 12:28:41,004 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 12:28:41,004 | WARNING | File already exists.
2025-08-12 12:28:42,019 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 12:28:42,053 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-12 12:28:57,836 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-12 12:29:07,186 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 12:29:07,205 | WARNING | File already exists.
2025-08-12 12:29:08,370 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 12:29:08,370 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 12:29:10,669 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2475
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 12:29:10,703 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-12 12:29:10,720 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-12 12:29:10,720 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-12 12:29:19,453 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 12:29:19,453 | WARNING | File already exists.
2025-08-12 12:29:20,253 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 12:29:20,253 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:18:24,721 | INFO | Creating Qdrant collection...
2025-08-12 14:18:25,522 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 14:18:25,878 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 14:18:25,893 | INFO | Qdrant collection created.
2025-08-12 14:19:31,511 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:19:31,527 | WARNING | File already exists.
2025-08-12 14:19:32,311 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:19:32,311 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-12 14:19:44,311 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-12 14:19:53,162 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:19:53,162 | WARNING | File already exists.
2025-08-12 14:19:53,944 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:19:53,944 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:20:06,628 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT('Order ID')"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 42,
        "total_token_count": 2366
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 14:20:06,644 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(\'Order ID\')"
        }
      }
    }
  }
}

2025-08-12 14:20:06,644 | INFO | Dispatching function: get_order_details with args: {'columns': ["COUNT('Order ID')"], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-12 14:20:06,661 | INFO | 🧠 Final SQL Query --> SELECT COUNT("'Order ID'") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-12 14:20:11,211 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:20:11,211 | WARNING | File already exists.
2025-08-12 14:20:12,027 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:20:12,027 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:20:24,194 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:20:24,194 | WARNING | File already exists.
2025-08-12 14:20:24,995 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:20:25,013 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:20:41,594 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "I understand you're asking for the total number of orders from a specific country. Unfortunately, my current capabilities do not allow me to filter orders by country."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2167,
        "candidates_token_count": 47,
        "total_token_count": 5110
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 14:20:41,594 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "I understand you\'re asking for the total number of orders from a specific country. Unfortunately, my current capabilities do not allow me to filter orders by country."
    }
  }
}

2025-08-12 14:20:41,594 | INFO | Dispatching function: handle_unknown_query with args: {'message': "I understand you're asking for the total number of orders from a specific country. Unfortunately, my current capabilities do not allow me to filter orders by country."}
2025-08-12 14:20:43,711 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:20:43,711 | WARNING | File already exists.
2025-08-12 14:20:44,480 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:20:44,480 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:21:27,964 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:21:27,964 | WARNING | File already exists.
2025-08-12 14:21:28,762 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:21:28,762 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:21:30,380 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status",
                      "Order ID"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ord04'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 44,
        "total_token_count": 2335
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 14:21:30,380 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord04\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
        values {
          string_value: "Order ID"
        }
      }
    }
  }
}

2025-08-12 14:21:30,398 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status', 'Order ID'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ord04'"}
2025-08-12 14:21:30,398 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status", "Order ID" FROM "Order_Details" WHERE "Order ID" = 'ord04'
2025-08-12 14:21:32,464 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:21:32,464 | WARNING | File already exists.
2025-08-12 14:21:32,745 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:21:32,745 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:21:34,979 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:21:34,979 | WARNING | File already exists.
2025-08-12 14:21:35,245 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:21:35,245 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:21:37,028 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = \"ord104\"",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 41,
        "total_token_count": 2401
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 14:21:37,028 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \"ord104\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-12 14:21:37,028 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Order ID = "ord104"', 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-12 14:21:37,028 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = "ord104"
2025-08-12 14:21:39,112 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:21:39,112 | WARNING | File already exists.
2025-08-12 14:21:39,378 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:21:39,378 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:41:23,603 | INFO | Creating Qdrant collection...
2025-08-12 14:41:24,419 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 14:41:24,793 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 14:41:24,804 | INFO | Qdrant collection created.
2025-08-12 14:42:13,756 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:42:13,756 | WARNING | File already exists.
2025-08-12 14:42:14,589 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:42:14,607 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-12 14:42:26,806 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-12 14:42:40,722 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:42:40,722 | WARNING | File already exists.
2025-08-12 14:42:41,505 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:42:41,505 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:42:43,494 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2359
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 14:42:43,494 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-12 14:42:43,505 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-12 14:42:43,505 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-12 14:42:48,305 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:42:48,305 | WARNING | File already exists.
2025-08-12 14:42:49,088 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:42:49,105 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:55:05,180 | INFO | Creating Qdrant collection...
2025-08-12 14:55:06,020 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 14:55:06,407 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-12 14:55:06,407 | INFO | Qdrant collection created.
2025-08-12 14:58:20,595 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:58:20,595 | WARNING | File already exists.
2025-08-12 14:58:21,413 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:58:21,413 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-12 14:58:32,796 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-12 14:58:48,596 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:58:48,596 | WARNING | File already exists.
2025-08-12 14:58:49,395 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:58:49,412 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-12 14:58:50,746 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2306
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-12 14:58:50,763 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-12 14:58:50,763 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-12 14:58:50,763 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-12 14:58:55,379 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-12 14:58:55,379 | WARNING | File already exists.
2025-08-12 14:58:56,179 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-12 14:58:56,179 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 12:16:39,207 | INFO | Creating Qdrant collection...
2025-08-13 12:16:40,099 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 12:16:40,472 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 12:16:40,488 | INFO | Qdrant collection created.
2025-08-13 12:19:07,239 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 12:19:07,250 | WARNING | File already exists.
2025-08-13 12:19:08,184 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 12:19:08,217 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 12:19:22,050 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 12:19:30,150 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 12:19:30,150 | WARNING | File already exists.
2025-08-13 12:19:31,050 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 12:19:31,050 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 12:19:32,800 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2368
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 12:19:32,834 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 12:19:32,850 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-13 12:19:32,850 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-13 12:19:42,317 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 12:19:42,317 | WARNING | File already exists.
2025-08-13 12:19:43,351 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 12:19:43,351 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 12:26:42,037 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 12:26:42,053 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-13 12:26:42,053 | INFO | Processing Excel with multiple sheets...
2025-08-13 12:26:44,870 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.30s
2025-08-13 12:26:45,004 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-08-13 12:26:45,087 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.08s
2025-08-13 12:26:45,188 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.10s
2025-08-13 12:26:45,270 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.08s
2025-08-13 12:26:58,488 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2415
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 12:26:58,504 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 12:26:58,520 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-13 12:26:58,520 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-13 12:27:00,754 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 12:27:00,754 | WARNING | File already exists.
2025-08-13 12:27:01,720 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 12:27:01,720 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:06:19,979 | INFO | Creating Qdrant collection...
2025-08-13 13:06:21,014 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:06:21,562 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:06:21,562 | INFO | Qdrant collection created.
2025-08-13 13:06:41,456 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:06:41,456 | WARNING | File already exists.
2025-08-13 13:06:42,839 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:06:42,873 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:06:56,689 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:07:06,872 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:07:06,888 | WARNING | File already exists.
2025-08-13 13:07:07,722 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:07:07,741 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:07:09,557 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2351
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 13:07:09,589 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 13:07:09,589 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-13 13:07:09,606 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-13 13:07:17,922 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:07:17,940 | WARNING | File already exists.
2025-08-13 13:07:18,839 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:07:18,855 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:10:28,326 | INFO | Creating Qdrant collection...
2025-08-13 13:10:29,272 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:10:29,752 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:10:29,768 | INFO | Qdrant collection created.
2025-08-13 13:11:22,893 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:11:22,893 | WARNING | File already exists.
2025-08-13 13:11:24,009 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:11:24,043 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:11:37,308 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:11:55,791 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:11:55,808 | WARNING | File already exists.
2025-08-13 13:11:56,791 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:11:56,791 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:11:58,425 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2296
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 13:11:58,457 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-13 13:11:58,460 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-13 13:11:58,460 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-13 13:12:06,858 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:12:06,875 | WARNING | File already exists.
2025-08-13 13:12:07,725 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:12:07,743 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:15:04,009 | INFO | Starting upload for file: policy details.pdf
2025-08-13 13:15:04,026 | INFO | File saved at: uploads\policy details.pdf
2025-08-13 13:15:04,026 | INFO | Extracting PDF...
2025-08-13 13:15:09,759 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:15:20,776 | INFO | Starting upload for file: policy details.pdf
2025-08-13 13:15:20,793 | WARNING | File already exists.
2025-08-13 13:15:21,742 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:15:21,743 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:15:24,260 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:15:25,676 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2260
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 13:15:25,676 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-13 13:15:25,694 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-13 13:15:26,528 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-13 13:15:31,093 | INFO | Starting upload for file: policy details.pdf
2025-08-13 13:15:31,110 | WARNING | File already exists.
2025-08-13 13:15:31,376 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:15:31,393 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:15:33,534 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:22:58,062 | INFO | Creating Qdrant collection...
2025-08-13 13:22:58,897 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:22:59,283 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:22:59,297 | INFO | Qdrant collection created.
2025-08-13 13:23:33,030 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:23:33,030 | WARNING | File already exists.
2025-08-13 13:23:33,995 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:23:34,013 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:23:47,417 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:23:56,630 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:23:56,630 | WARNING | File already exists.
2025-08-13 13:23:57,663 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:23:57,682 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:23:59,847 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2406
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 13:23:59,865 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 13:23:59,880 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-13 13:23:59,880 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-13 13:24:08,345 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:24:08,347 | WARNING | File already exists.
2025-08-13 13:24:09,264 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:24:09,280 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:26:51,913 | INFO | Creating Qdrant collection...
2025-08-13 13:26:53,980 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:26:54,357 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:26:54,357 | INFO | Qdrant collection created.
2025-08-13 13:27:14,332 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:27:14,332 | WARNING | File already exists.
2025-08-13 13:27:15,283 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:27:15,299 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:27:28,432 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:27:44,898 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:27:44,899 | WARNING | File already exists.
2025-08-13 13:27:45,767 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:27:45,767 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:27:47,649 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2369
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 13:27:47,682 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 13:27:47,699 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x00000213604BA250>}
2025-08-13 13:27:47,699 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details"
2025-08-13 13:27:47,717 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: cannot convert dictionary update sequence element #0 to a sequence

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 137, in handle_query
    return jsonable_encoder({
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 333, in jsonable_encoder
    return jsonable_encoder(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError('cannot convert dictionary update sequence element #0 to a sequence'), TypeError('vars() argument must have __dict__ attribute')]
2025-08-13 13:27:50,032 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:27:50,049 | WARNING | File already exists.
2025-08-13 13:27:50,456 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:27:50,463 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:33:30,668 | INFO | Creating Qdrant collection...
2025-08-13 13:33:31,601 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:33:31,978 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:33:31,978 | INFO | Qdrant collection created.
2025-08-13 13:33:53,602 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:33:53,602 | WARNING | File already exists.
2025-08-13 13:33:54,452 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:33:54,490 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:34:07,418 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:34:19,052 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:34:19,052 | WARNING | File already exists.
2025-08-13 13:34:20,085 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:34:20,103 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:34:21,751 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = \"ORD104\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 41,
        "total_token_count": 2351
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 13:34:21,786 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \"ORD104\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-13 13:34:21,786 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': 'Order ID = "ORD104"'}
2025-08-13 13:34:21,802 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = "ORD104"
2025-08-13 13:34:21,819 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: cannot convert dictionary update sequence element #0 to a sequence

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 140, in handle_query
    return jsonable_encoder({
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 333, in jsonable_encoder
    return jsonable_encoder(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError('cannot convert dictionary update sequence element #0 to a sequence'), TypeError('vars() argument must have __dict__ attribute')]
2025-08-13 13:34:24,185 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:34:24,202 | WARNING | File already exists.
2025-08-13 13:34:24,485 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:34:24,503 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:40:47,303 | INFO | Creating Qdrant collection...
2025-08-13 13:40:48,101 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:40:48,538 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 13:40:48,538 | INFO | Qdrant collection created.
2025-08-13 13:41:36,753 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:41:36,753 | WARNING | File already exists.
2025-08-13 13:41:37,637 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:41:37,668 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 13:41:50,821 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 13:41:59,472 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:41:59,472 | WARNING | File already exists.
2025-08-13 13:42:00,522 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:42:00,522 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 13:42:02,905 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2341
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 13:42:02,922 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 13:42:02,939 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-13 13:42:02,939 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-13 13:42:02,956 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: cannot convert dictionary update sequence element #0 to a sequence

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 147, in handle_query
    return jsonable_encoder({
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 333, in jsonable_encoder
    return jsonable_encoder(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError('cannot convert dictionary update sequence element #0 to a sequence'), TypeError('vars() argument must have __dict__ attribute')]
2025-08-13 13:42:05,122 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 13:42:05,122 | WARNING | File already exists.
2025-08-13 13:42:05,405 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 13:42:05,405 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 17:56:49,588 | INFO | Creating Qdrant collection...
2025-08-13 17:56:50,403 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 17:56:50,800 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 17:56:50,800 | INFO | Qdrant collection created.
2025-08-13 17:58:27,825 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 17:58:27,825 | WARNING | File already exists.
2025-08-13 17:58:28,640 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 17:58:28,659 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 17:58:40,225 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 17:58:48,457 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 17:58:48,457 | WARNING | File already exists.
2025-08-13 17:58:49,258 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 17:58:49,258 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 17:58:51,191 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2380
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 17:58:51,207 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 17:58:51,207 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-13 17:58:51,207 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-13 17:58:51,224 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 138, in handle_query
    function_info = to_json_safe(function_info)
                                 ^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'function_info' where it is not associated with a value
2025-08-13 17:58:53,307 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 17:58:53,307 | WARNING | File already exists.
2025-08-13 17:58:53,574 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 17:58:53,591 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 22:23:20,954 | INFO | Creating Qdrant collection...
2025-08-13 22:23:21,817 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 22:23:22,220 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-13 22:23:22,235 | INFO | Qdrant collection created.
2025-08-13 22:24:58,297 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:24:58,297 | WARNING | File already exists.
2025-08-13 22:24:59,096 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:24:59,096 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 22:25:11,529 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 22:25:21,212 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:25:21,212 | WARNING | File already exists.
2025-08-13 22:25:22,029 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:25:22,029 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 22:25:23,663 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2378
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 22:25:23,699 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-13 22:25:23,713 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-13 22:25:23,746 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-13 22:25:28,946 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:25:28,946 | WARNING | File already exists.
2025-08-13 22:25:29,762 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:25:29,762 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 22:28:25,730 | INFO | Starting upload for file: policy details.pdf
2025-08-13 22:28:25,730 | WARNING | File already exists.
2025-08-13 22:28:26,647 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:28:26,647 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 22:28:28,815 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 22:28:39,164 | INFO | Starting upload for file: policy details.pdf
2025-08-13 22:28:39,164 | WARNING | File already exists.
2025-08-13 22:28:39,947 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:28:39,953 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 22:28:42,248 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 22:28:43,481 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 25,
        "total_token_count": 2254
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 22:28:43,481 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-08-13 22:28:43,496 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-08-13 22:28:44,214 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-13 22:28:49,447 | INFO | Starting upload for file: policy details.pdf
2025-08-13 22:28:49,447 | WARNING | File already exists.
2025-08-13 22:28:50,231 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:28:50,231 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-13 22:28:52,484 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-13 22:29:02,930 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:29:02,930 | WARNING | File already exists.
2025-08-13 22:29:03,730 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:29:03,730 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 22:29:27,431 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:29:27,431 | WARNING | File already exists.
2025-08-13 22:29:28,198 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:29:28,198 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 22:29:29,764 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ord104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2354
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 22:29:29,764 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-13 22:29:29,782 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Order ID = 'ord104'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-13 22:29:29,782 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104'
2025-08-13 22:29:31,881 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:29:31,881 | WARNING | File already exists.
2025-08-13 22:29:32,148 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:29:32,148 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 22:29:41,215 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:29:41,215 | WARNING | File already exists.
2025-08-13 22:29:41,998 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:29:41,998 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-13 22:29:43,681 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Order ID": "ORD104"
                    },
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2341
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-13 22:29:43,681 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ORD104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-13 22:29:43,681 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000028E48AC05D0>, 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-13 22:29:43,681 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-13 22:29:45,972 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-13 22:29:45,972 | WARNING | File already exists.
2025-08-13 22:29:46,239 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-13 22:29:46,239 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:17:52,408 | INFO | Creating Qdrant collection...
2025-08-14 14:17:53,328 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-14 14:17:53,898 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-14 14:17:53,898 | INFO | Qdrant collection created.
2025-08-14 14:25:43,449 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:25:43,449 | WARNING | File already exists.
2025-08-14 14:25:44,749 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:25:44,782 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-14 14:25:57,766 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-14 14:26:05,532 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:26:05,549 | WARNING | File already exists.
2025-08-14 14:26:06,432 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:26:06,432 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:26:08,914 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2400
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:26:08,932 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-14 14:26:08,949 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-14 14:26:08,966 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-14 14:26:17,204 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:26:17,204 | WARNING | File already exists.
2025-08-14 14:26:18,165 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:26:18,174 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:26:28,982 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:26:28,999 | WARNING | File already exists.
2025-08-14 14:26:30,216 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:26:30,216 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:26:56,933 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2303
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:26:56,949 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-14 14:26:56,966 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-14 14:26:56,972 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-14 14:26:59,433 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:26:59,433 | WARNING | File already exists.
2025-08-14 14:27:00,767 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:27:00,767 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:27:16,600 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:27:16,617 | WARNING | File already exists.
2025-08-14 14:27:17,833 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:27:17,850 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:27:19,518 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 42,
        "total_token_count": 2345
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:27:19,533 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-14 14:27:19,533 | INFO | Dispatching function: get_order_details with args: {'where_clause': "Order ID = 'ORD104'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-14 14:27:19,548 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104'
2025-08-14 14:27:21,700 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:27:21,700 | WARNING | File already exists.
2025-08-14 14:27:22,073 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:27:22,082 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:27:56,083 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:27:56,099 | WARNING | File already exists.
2025-08-14 14:27:57,150 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:27:57,150 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:27:59,850 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "{\"Order ID\": \"ord104\"}",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 44,
        "total_token_count": 2384
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:27:59,866 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "{\"Order ID\": \"ord104\"}"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-14 14:27:59,866 | INFO | Dispatching function: get_order_details with args: {'where_clause': '{"Order ID": "ord104"}', 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-14 14:27:59,883 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE {"Order ID": "ord104"}
2025-08-14 14:28:02,133 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:28:02,150 | WARNING | File already exists.
2025-08-14 14:28:02,535 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:28:02,535 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:28:31,133 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:28:31,149 | WARNING | File already exists.
2025-08-14 14:28:32,000 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:28:32,000 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:28:34,618 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2428
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:28:34,633 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-14 14:28:34,650 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-14 14:28:34,650 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-08-14 14:28:36,799 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:28:36,802 | WARNING | File already exists.
2025-08-14 14:28:37,169 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:28:37,169 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:28:49,083 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:28:49,099 | WARNING | File already exists.
2025-08-14 14:28:49,959 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:28:49,966 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:28:52,961 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2167,
        "candidates_token_count": 40,
        "total_token_count": 2506
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:28:52,983 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-14 14:28:53,000 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000025DF27BB9D0>}
2025-08-14 14:28:53,000 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details"
2025-08-14 14:28:55,167 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:28:55,167 | WARNING | File already exists.
2025-08-14 14:28:56,167 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:28:56,167 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:48:04,726 | INFO | Creating Qdrant collection...
2025-08-14 14:48:05,578 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-14 14:48:06,078 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-14 14:48:06,078 | INFO | Qdrant collection created.
2025-08-14 14:53:51,129 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:53:51,129 | WARNING | File already exists.
2025-08-14 14:53:52,078 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:53:52,095 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-14 14:54:05,812 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-14 14:55:02,780 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:55:02,780 | WARNING | File already exists.
2025-08-14 14:55:04,196 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:55:04,196 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:55:06,263 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2381
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:55:06,279 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-14 14:55:06,298 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-14 14:55:06,298 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-14 14:55:14,746 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:55:14,763 | WARNING | File already exists.
2025-08-14 14:55:15,763 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:55:15,763 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:55:30,779 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:55:30,796 | WARNING | File already exists.
2025-08-14 14:55:31,862 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:55:31,879 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 14:55:33,497 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ord104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2352
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 14:55:33,513 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-14 14:55:33,513 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ord104'"}
2025-08-14 14:55:33,529 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-08-14 14:55:35,679 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 14:55:35,696 | WARNING | File already exists.
2025-08-14 14:55:35,980 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 14:55:35,996 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 17:16:51,117 | INFO | Creating Qdrant collection...
2025-08-14 17:16:51,982 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-14 17:16:52,373 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-14 17:16:52,373 | INFO | Qdrant collection created.
2025-08-14 17:17:20,100 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 17:17:20,100 | WARNING | File already exists.
2025-08-14 17:17:20,917 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 17:17:20,917 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-14 17:17:33,267 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-14 17:17:50,167 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-14 17:17:50,167 | WARNING | File already exists.
2025-08-14 17:17:51,033 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-14 17:17:51,033 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-14 17:17:52,967 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = \"ord104\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2365
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-14 17:17:52,985 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \"ord104\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-14 17:17:52,985 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': 'Order ID = "ord104"'}
2025-08-14 17:17:52,985 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = "ord104" COLLATE NOCASE
2025-08-18 12:46:23,511 | INFO | Creating Qdrant collection...
2025-08-18 12:46:24,376 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 12:46:24,772 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 12:46:24,772 | INFO | Qdrant collection created.
2025-08-18 12:47:29,784 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:47:29,784 | WARNING | File already exists.
2025-08-18 12:47:31,151 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:47:31,167 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 12:47:45,201 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 12:47:55,451 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:47:55,451 | WARNING | File already exists.
2025-08-18 12:47:56,453 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:47:56,453 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 12:47:58,901 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2490
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 12:47:58,934 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 12:47:58,952 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': 'Country = "USA"'}
2025-08-18 12:47:58,952 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-18 12:48:08,435 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:48:08,435 | WARNING | File already exists.
2025-08-18 12:48:09,454 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:48:09,454 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 12:48:18,234 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:48:18,236 | WARNING | File already exists.
2025-08-18 12:48:19,085 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:48:19,085 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 12:48:21,052 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 41,
        "total_token_count": 2354
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 12:48:21,068 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 12:48:21,084 | INFO | Dispatching function: get_order_details with args: {'where_clause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-18 12:48:21,101 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 12:48:23,534 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:48:23,534 | WARNING | File already exists.
2025-08-18 12:48:23,817 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:48:23,835 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 12:50:17,419 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:50:17,419 | WARNING | File already exists.
2025-08-18 12:50:19,184 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:50:19,188 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 12:50:32,302 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:50:32,318 | WARNING | File already exists.
2025-08-18 12:50:33,319 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:50:33,319 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 12:50:35,152 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ord104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2360
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 12:50:35,168 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-18 12:50:35,185 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Order ID = 'ord104'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-18 12:50:35,185 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-08-18 12:50:37,519 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 12:50:37,519 | WARNING | File already exists.
2025-08-18 12:50:37,935 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 12:50:37,952 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:07:19,428 | INFO | Creating Qdrant collection...
2025-08-18 13:07:20,322 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 13:07:20,730 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 13:07:20,730 | INFO | Qdrant collection created.
2025-08-18 13:07:46,843 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:07:46,843 | WARNING | File already exists.
2025-08-18 13:07:47,861 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:07:47,877 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 13:08:01,943 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 13:08:21,727 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:08:21,743 | WARNING | File already exists.
2025-08-18 13:08:22,677 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:08:22,677 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:08:24,517 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2356
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 13:08:24,543 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 13:08:24,544 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-18 13:08:24,560 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 13:08:26,710 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:08:26,727 | WARNING | File already exists.
2025-08-18 13:08:27,477 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:08:27,477 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:09:57,031 | INFO | Creating Qdrant collection...
2025-08-18 13:09:58,004 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 13:09:58,409 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 13:09:58,409 | INFO | Qdrant collection created.
2025-08-18 13:10:21,228 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:10:21,228 | WARNING | File already exists.
2025-08-18 13:10:22,178 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:10:22,195 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 13:10:36,113 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 13:10:50,728 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:10:50,728 | WARNING | File already exists.
2025-08-18 13:10:51,662 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:10:51,662 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:10:53,396 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 41,
        "total_token_count": 2327,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 13:10:53,428 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 13:10:53,428 | INFO | Dispatching function: get_order_details with args: {'where_clause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-18 13:10:53,445 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 13:10:55,611 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:10:55,611 | WARNING | File already exists.
2025-08-18 13:10:55,929 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:10:55,929 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:11:04,428 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:11:04,445 | WARNING | File already exists.
2025-08-18 13:11:05,379 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:11:05,395 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:11:07,129 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2167,
        "candidates_token_count": 40,
        "total_token_count": 2342
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 13:11:07,145 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 13:11:07,145 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-18 13:11:07,145 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 13:11:09,311 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:11:09,312 | WARNING | File already exists.
2025-08-18 13:11:09,678 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:11:09,695 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:14:15,582 | INFO | Creating Qdrant collection...
2025-08-18 13:14:16,461 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 13:14:16,863 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 13:14:16,863 | INFO | Qdrant collection created.
2025-08-18 13:15:19,213 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:15:19,213 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-18 13:15:19,213 | INFO | Processing Excel with multiple sheets...
2025-08-18 13:15:22,397 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.33s
2025-08-18 13:15:22,564 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.17s
2025-08-18 13:15:22,697 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.13s
2025-08-18 13:15:22,847 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.15s
2025-08-18 13:15:23,015 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.15s
2025-08-18 13:15:32,247 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:15:32,247 | WARNING | File already exists.
2025-08-18 13:15:33,263 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:15:33,297 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 13:15:49,896 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 13:15:51,797 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2332
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 13:15:51,814 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 13:15:51,830 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-18 13:15:51,830 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 13:15:53,947 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 13:15:53,947 | WARNING | File already exists.
2025-08-18 13:15:54,333 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:15:54,333 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 13:16:07,447 | INFO | Starting upload for file: policy details.pdf
2025-08-18 13:16:07,464 | INFO | File saved at: uploads\policy details.pdf
2025-08-18 13:16:07,464 | INFO | Extracting PDF...
2025-08-18 13:16:14,348 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 13:16:27,514 | INFO | Starting upload for file: policy details.pdf
2025-08-18 13:16:27,530 | WARNING | File already exists.
2025-08-18 13:16:28,765 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:16:28,765 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 13:16:32,281 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 13:16:33,880 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2260
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 13:16:33,897 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-18 13:16:33,897 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-18 13:16:35,714 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-18 13:16:40,281 | INFO | Starting upload for file: policy details.pdf
2025-08-18 13:16:40,297 | WARNING | File already exists.
2025-08-18 13:16:41,547 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 13:16:41,564 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 13:16:43,914 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 14:08:34,876 | INFO | Creating Qdrant collection...
2025-08-18 14:08:35,783 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:08:36,202 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:08:36,210 | INFO | Qdrant collection created.
2025-08-18 14:09:16,421 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:09:16,432 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-18 14:09:16,434 | INFO | Processing Excel with multiple sheets...
2025-08-18 14:09:23,253 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.67s
2025-08-18 14:09:23,713 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.45s
2025-08-18 14:09:23,965 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.25s
2025-08-18 14:09:24,266 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.30s
2025-08-18 14:09:24,501 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.23s
2025-08-18 14:09:53,122 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:09:53,127 | WARNING | File already exists.
2025-08-18 14:09:54,014 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:09:54,067 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 14:10:09,031 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 14:10:27,009 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:10:27,013 | WARNING | File already exists.
2025-08-18 14:10:27,912 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:10:27,927 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:10:29,806 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID",
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = \"ord104\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 45,
        "total_token_count": 2336
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:10:29,847 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \"ord104\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-18 14:10:29,864 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Shipping Status'], 'table_name': 'Order_Details', 'whereClause': 'Order ID = "ord104"'}
2025-08-18 14:10:29,878 | INFO | 🧠 Final SQL Query --> SELECT "Order ID", "Shipping Status" FROM "Order_Details" WHERE "Order ID" = "ord104" COLLATE NOCASE
2025-08-18 14:10:42,688 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:10:42,695 | WARNING | File already exists.
2025-08-18 14:10:43,581 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:10:43,593 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:13:41,199 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:13:41,205 | WARNING | File already exists.
2025-08-18 14:13:42,150 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:13:42,163 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:13:53,885 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "I can retrieve the total number of orders, but I cannot filter them by country with the current tools."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 36,
        "total_token_count": 4048
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:13:53,902 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "I can retrieve the total number of orders, but I cannot filter them by country with the current tools."
    }
  }
}

2025-08-18 14:13:53,909 | INFO | Dispatching function: handle_unknown_query with args: {'message': 'I can retrieve the total number of orders, but I cannot filter them by country with the current tools.'}
2025-08-18 14:13:56,056 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:13:56,064 | WARNING | File already exists.
2025-08-18 14:13:56,971 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:13:56,982 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:18:12,841 | INFO | Creating Qdrant collection...
2025-08-18 14:18:13,723 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:18:14,111 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:18:14,125 | INFO | Qdrant collection created.
2025-08-18 14:18:59,093 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:18:59,093 | WARNING | File already exists.
2025-08-18 14:19:00,093 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:19:00,126 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 14:19:15,076 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 14:19:26,010 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:19:26,026 | WARNING | File already exists.
2025-08-18 14:19:27,026 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:19:27,026 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:19:28,761 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 41,
        "total_token_count": 2344
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:19:28,776 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-18 14:19:28,776 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-18 14:19:28,793 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104' COLLATE NOCASE
2025-08-18 14:19:30,910 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:19:30,926 | WARNING | File already exists.
2025-08-18 14:19:31,226 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:19:31,226 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:19:44,711 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:19:44,726 | WARNING | File already exists.
2025-08-18 14:19:45,660 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:19:45,675 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:19:47,660 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2376
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:19:47,676 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 14:19:47,693 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-18 14:19:47,694 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 14:19:49,810 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:19:49,827 | WARNING | File already exists.
2025-08-18 14:19:50,110 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:19:50,126 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:20:05,477 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:20:05,477 | WARNING | File already exists.
2025-08-18 14:20:06,445 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:20:06,460 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:20:08,027 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2300
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:20:08,027 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-18 14:20:08,044 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-18 14:20:08,044 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-18 14:20:16,155 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:20:16,155 | WARNING | File already exists.
2025-08-18 14:20:17,171 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:20:17,186 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:22:40,559 | INFO | Creating Qdrant collection...
2025-08-18 14:22:41,497 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:22:41,916 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:22:41,928 | INFO | Qdrant collection created.
2025-08-18 14:23:11,661 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:23:11,665 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-18 14:23:11,665 | INFO | Processing Excel with multiple sheets...
2025-08-18 14:23:14,377 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.20s
2025-08-18 14:23:14,528 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.15s
2025-08-18 14:23:14,645 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.12s
2025-08-18 14:23:14,778 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.13s
2025-08-18 14:23:14,912 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.13s
2025-08-18 14:23:27,745 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:23:27,745 | WARNING | File already exists.
2025-08-18 14:23:29,128 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:23:29,145 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 14:23:45,411 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 14:23:47,396 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT('Order ID')"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 42,
        "total_token_count": 2366
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:23:47,429 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(\'Order ID\')"
        }
      }
    }
  }
}

2025-08-18 14:23:47,429 | INFO | Dispatching function: get_order_details with args: {'columns': ["COUNT('Order ID')"], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-18 14:23:47,445 | INFO | 🧠 Final SQL Query --> SELECT COUNT("'Order ID'") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 14:23:49,578 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:23:49,595 | WARNING | File already exists.
2025-08-18 14:23:50,078 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:23:50,095 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:25:55,434 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:25:55,446 | WARNING | File already exists.
2025-08-18 14:25:56,479 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:25:56,503 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:25:58,346 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ord104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2347
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:25:58,363 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-18 14:25:58,381 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Order ID = 'ord104'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-18 14:25:58,381 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-08-18 14:26:00,516 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:26:00,529 | WARNING | File already exists.
2025-08-18 14:26:00,829 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:26:00,846 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:28:24,730 | INFO | Starting upload for file: policy details.pdf
2025-08-18 14:28:24,731 | INFO | File saved at: uploads\policy details.pdf
2025-08-18 14:28:24,731 | INFO | Extracting PDF...
2025-08-18 14:28:31,598 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 14:28:41,797 | INFO | Starting upload for file: policy details.pdf
2025-08-18 14:28:41,814 | WARNING | File already exists.
2025-08-18 14:28:42,747 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:28:42,764 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:28:44,698 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "Is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 25,
        "total_token_count": 2322
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:28:44,714 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "Is there any limitations to upload a file?"
    }
  }
}

2025-08-18 14:28:44,714 | INFO | Dispatching function: get_policy_info with args: {'query': 'Is there any limitations to upload a file?'}
2025-08-18 14:28:45,614 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-18 14:28:51,047 | INFO | Starting upload for file: policy details.pdf
2025-08-18 14:28:51,064 | WARNING | File already exists.
2025-08-18 14:28:51,931 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:28:51,931 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 14:30:58,697 | INFO | Creating Qdrant collection...
2025-08-18 14:30:59,659 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:31:00,622 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 14:31:00,622 | INFO | Qdrant collection created.
2025-08-18 14:31:50,749 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:31:50,749 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-18 14:31:50,749 | INFO | Processing Excel with multiple sheets...
2025-08-18 14:31:53,389 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.21s
2025-08-18 14:31:53,547 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-08-18 14:31:53,667 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.12s
2025-08-18 14:31:53,789 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.12s
2025-08-18 14:31:53,916 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.12s
2025-08-18 14:32:29,332 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:32:29,349 | WARNING | File already exists.
2025-08-18 14:32:30,399 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:32:30,418 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 14:32:46,566 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 14:32:48,916 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ord104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2327
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 14:32:48,935 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-18 14:32:48,950 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ord104'"}
2025-08-18 14:32:48,965 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-08-18 14:32:51,131 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 14:32:51,133 | WARNING | File already exists.
2025-08-18 14:32:51,483 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 14:32:51,483 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 16:50:00,734 | INFO | Creating Qdrant collection...
2025-08-18 16:50:04,886 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 16:50:05,305 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 16:50:05,305 | INFO | Qdrant collection created.
2025-08-18 16:56:01,191 | INFO | Creating Qdrant collection...
2025-08-18 16:56:04,091 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 16:56:04,514 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-18 16:56:04,514 | INFO | Qdrant collection created.
2025-08-18 16:56:31,206 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 16:56:31,206 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-18 16:56:31,206 | INFO | Processing Excel with multiple sheets...
2025-08-18 16:56:33,875 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.22s
2025-08-18 16:56:34,040 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.16s
2025-08-18 16:56:34,156 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.12s
2025-08-18 16:56:34,290 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.13s
2025-08-18 16:56:34,423 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.13s
2025-08-18 16:56:46,938 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 16:56:46,939 | WARNING | File already exists.
2025-08-18 16:56:48,039 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:56:48,056 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 16:57:01,289 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 16:57:03,724 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "where_clause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 41,
        "total_token_count": 2478
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 16:57:03,739 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "where_clause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-18 16:57:03,757 | INFO | Dispatching function: get_order_details with args: {'where_clause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-18 16:57:03,773 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-18 16:57:05,923 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 16:57:05,942 | WARNING | File already exists.
2025-08-18 16:57:06,241 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:57:06,262 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 16:57:21,808 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 16:57:21,823 | WARNING | File already exists.
2025-08-18 16:57:23,839 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:57:23,856 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 16:57:25,608 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ord104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2340
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 16:57:25,629 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-18 16:57:25,640 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ord104'"}
2025-08-18 16:57:25,640 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-08-18 16:57:27,756 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 16:57:27,773 | WARNING | File already exists.
2025-08-18 16:57:28,076 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:57:28,076 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 16:57:35,362 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 16:57:35,373 | WARNING | File already exists.
2025-08-18 16:57:36,273 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:57:36,273 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 16:57:37,808 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2294
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 16:57:37,823 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-18 16:57:37,841 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-18 16:57:37,841 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-18 16:57:46,168 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-18 16:57:46,184 | WARNING | File already exists.
2025-08-18 16:57:54,224 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:57:54,491 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-18 16:57:58,340 | INFO | Starting upload for file: policy details.pdf
2025-08-18 16:57:58,357 | INFO | File saved at: uploads\policy details.pdf
2025-08-18 16:57:58,357 | INFO | Extracting PDF...
2025-08-18 16:58:11,690 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 16:58:21,841 | INFO | Starting upload for file: policy details.pdf
2025-08-18 16:58:21,856 | WARNING | File already exists.
2025-08-18 16:58:22,742 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:58:22,758 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 16:58:25,343 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 16:58:26,542 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2260
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-18 16:58:26,542 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-18 16:58:26,559 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-18 16:58:27,458 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-18 16:58:32,391 | INFO | Starting upload for file: policy details.pdf
2025-08-18 16:58:32,392 | WARNING | File already exists.
2025-08-18 16:58:32,692 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:58:32,709 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 16:58:34,743 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-18 16:58:45,207 | INFO | Starting upload for file: policy details.pdf
2025-08-18 16:58:45,223 | WARNING | File already exists.
2025-08-18 16:58:46,227 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-18 16:58:46,237 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-18 16:58:48,657 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-19 17:47:39,833 | INFO | Creating Qdrant collection...
2025-08-19 17:47:40,664 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-19 17:47:41,056 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-19 17:47:41,056 | INFO | Qdrant collection created.
2025-08-19 17:49:35,329 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:49:35,346 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-19 17:49:35,367 | INFO | Processing Excel with multiple sheets...
2025-08-19 17:49:39,046 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.45s
2025-08-19 17:49:39,212 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.17s
2025-08-19 17:49:39,346 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.12s
2025-08-19 17:49:39,480 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.13s
2025-08-19 17:49:39,612 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.13s
2025-08-19 17:49:53,614 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:49:53,614 | WARNING | File already exists.
2025-08-19 17:49:54,530 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:49:54,579 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-19 17:50:09,929 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-19 17:50:12,029 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2341
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 17:50:12,063 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-19 17:50:12,063 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': 'Country = "USA"'}
2025-08-19 17:50:12,081 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-19 17:50:14,513 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:50:14,513 | WARNING | File already exists.
2025-08-19 17:50:14,796 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:50:14,816 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:50:28,213 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:50:28,213 | WARNING | File already exists.
2025-08-19 17:50:29,046 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:50:29,063 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:50:30,880 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ord104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2350
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 17:50:30,897 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ord104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-19 17:50:30,897 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001A01FA60A10>}
2025-08-19 17:50:30,913 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details"
2025-08-19 17:50:43,029 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:50:43,030 | WARNING | File already exists.
2025-08-19 17:50:43,938 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:50:43,938 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:50:56,214 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "{\"Order ID\": \"ord104\"}",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 43,
        "total_token_count": 2341
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 17:50:56,230 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "{\"Order ID\": \"ord104\"}"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-19 17:50:56,230 | INFO | Dispatching function: get_order_details with args: {'whereClause': '{"Order ID": "ord104"}', 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-19 17:50:56,247 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE {"Order ID": "ord104"} COLLATE NOCASE
2025-08-19 17:50:58,512 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:50:58,513 | WARNING | File already exists.
2025-08-19 17:50:59,446 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:50:59,446 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:51:29,013 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ord104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2337,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 17:51:29,030 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-19 17:51:29,030 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ord104'"}
2025-08-19 17:51:29,046 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-08-19 17:51:31,297 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:51:31,313 | WARNING | File already exists.
2025-08-19 17:51:33,599 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:51:33,599 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:52:42,680 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:52:42,697 | WARNING | File already exists.
2025-08-19 17:52:43,747 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:52:43,765 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:52:45,365 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2294
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 17:52:45,382 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-19 17:52:45,399 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-19 17:52:45,399 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-19 17:52:47,613 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:52:47,613 | WARNING | File already exists.
2025-08-19 17:52:47,891 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:52:47,922 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:53:17,231 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:53:17,231 | WARNING | File already exists.
2025-08-19 17:53:18,464 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:53:18,464 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 17:53:20,298 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2337
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 17:53:20,314 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-19 17:53:20,332 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-19 17:53:20,332 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-19 17:53:22,631 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-19 17:53:22,647 | WARNING | File already exists.
2025-08-19 17:53:23,031 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 17:53:23,031 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 18:03:43,092 | INFO | Creating Qdrant collection...
2025-08-19 18:03:43,980 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-19 18:03:44,376 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-19 18:03:44,379 | INFO | Qdrant collection created.
2025-08-19 18:14:17,427 | INFO | Starting upload for file: policy details.pdf
2025-08-19 18:14:17,438 | INFO | File saved at: uploads\policy details.pdf
2025-08-19 18:14:17,442 | INFO | Extracting PDF...
2025-08-19 18:14:25,075 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 404 Not Found"
2025-08-19 18:14:25,087 | ERROR | Upload error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 238, in upload_file
    embedding.index_document(text.split(". "), file.filename)
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 70, in index_document
    client.upsert(collection_name=collection_name, points=points)
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 1635, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 1911, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\points_api.py", line 987, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\points_api.py", line 512, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":0.000011604}'
2025-08-19 19:07:46,715 | INFO | Creating Qdrant collection...
2025-08-19 19:07:46,715 | ERROR | Qdrant collection init error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 39, in startup_event
    embedding.create_collection("documents")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'embedding' has no attribute 'create_collection'
2025-08-19 19:12:53,334 | INFO | Ensuring Qdrant collection exists...
2025-08-19 19:12:54,120 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-19 19:12:54,525 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-19 19:12:54,534 | INFO | Qdrant collection ready.
2025-08-19 19:13:23,701 | INFO | Starting upload for file: policy details.pdf
2025-08-19 19:13:23,701 | WARNING | File already exists.
2025-08-19 19:13:24,485 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 19:13:24,485 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-19 19:13:27,353 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-19 19:13:27,888 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-19 19:13:50,251 | INFO | Starting upload for file: policy details.pdf
2025-08-19 19:13:50,251 | INFO | File saved at: uploads\policy details.pdf
2025-08-19 19:13:50,251 | INFO | Extracting PDF...
2025-08-19 19:13:54,720 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-19 19:13:55,535 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-19 19:14:02,269 | INFO | Starting upload for file: policy details.pdf
2025-08-19 19:14:02,269 | WARNING | File already exists.
2025-08-19 19:14:03,053 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 19:14:03,068 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 19:14:04,152 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2264
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 19:14:04,169 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-19 19:14:04,169 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-19 19:14:04,936 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-19 19:14:09,668 | INFO | Starting upload for file: policy details.pdf
2025-08-19 19:14:09,668 | WARNING | File already exists.
2025-08-19 19:14:09,935 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 19:14:09,952 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 19:15:28,237 | INFO | Starting upload for file: policy details.pdf
2025-08-19 19:15:28,237 | INFO | File saved at: uploads\policy details.pdf
2025-08-19 19:15:28,237 | INFO | Extracting PDF...
2025-08-19 19:15:32,721 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-19 19:15:33,102 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-19 19:15:33,904 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-19 19:15:42,820 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "Is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 25,
        "total_token_count": 2274,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 19:15:42,820 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "Is there any limitations to upload a file?"
    }
  }
}

2025-08-19 19:15:42,820 | INFO | Dispatching function: get_policy_info with args: {'query': 'Is there any limitations to upload a file?'}
2025-08-19 19:15:44,070 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-19 19:15:49,269 | INFO | Starting upload for file: policy details.pdf
2025-08-19 19:15:49,269 | WARNING | File already exists.
2025-08-19 19:15:50,035 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 19:15:50,052 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 20:44:17,877 | INFO | Starting upload for file: policy details.pdf
2025-08-19 20:44:17,877 | WARNING | File already exists.
2025-08-19 20:44:19,195 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 20:44:19,210 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 20:44:21,393 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2346
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 20:44:21,395 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-19 20:44:21,404 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-19 20:44:21,411 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-19 20:44:23,543 | INFO | Starting upload for file: policy details.pdf
2025-08-19 20:44:23,543 | WARNING | File already exists.
2025-08-19 20:44:23,831 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-19 20:44:23,831 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-19 20:44:44,543 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": "Order ID = 'ORD104'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 41,
        "total_token_count": 2329
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-19 20:44:44,543 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-19 20:44:44,543 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': "Order ID = 'ORD104'"}
2025-08-19 20:44:44,543 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104' COLLATE NOCASE
2025-08-22 14:05:45,887 | INFO | Ensuring Qdrant collection exists...
2025-08-22 14:05:46,717 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 14:05:46,733 | INFO | Qdrant collection ready.
2025-08-22 14:14:11,911 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2265
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-22 14:14:11,927 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-22 14:14:11,944 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-22 14:14:13,560 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-22 16:56:03,386 | INFO | Ensuring Qdrant collection exists...
2025-08-22 16:56:04,217 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 16:56:04,237 | INFO | Qdrant collection ready.
2025-08-22 17:41:15,764 | INFO | Ensuring Qdrant collection exists...
2025-08-22 17:41:16,611 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:41:16,656 | INFO | Qdrant collection ready.
2025-08-22 17:44:18,971 | INFO | Ensuring Qdrant collection exists...
2025-08-22 17:44:19,836 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:44:19,870 | INFO | Qdrant collection ready.
2025-08-22 17:45:05,397 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-22 17:45:22,638 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:45:22,638 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-22 17:45:22,659 | INFO | Processing Excel with multiple sheets...
2025-08-22 17:45:25,604 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.35s
2025-08-22 17:45:25,738 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.12s
2025-08-22 17:45:25,838 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.10s
2025-08-22 17:45:25,957 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.12s
2025-08-22 17:45:26,071 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.11s
2025-08-22 17:45:56,372 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:45:56,389 | WARNING | File already exists.
2025-08-22 17:45:57,222 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-08-22 17:45:57,222 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-22 17:46:11,956 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:46:12,372 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-22 17:46:13,972 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-22 17:46:18,456 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ord104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 41,
        "total_token_count": 2334
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-22 17:46:18,491 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ord104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-22 17:46:18,491 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Order ID = 'ord104'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-22 17:46:18,506 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-08-22 17:46:20,639 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:46:20,655 | WARNING | File already exists.
2025-08-22 17:46:22,075 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:46:22,108 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-22 17:46:37,691 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:46:37,707 | WARNING | File already exists.
2025-08-22 17:46:39,323 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:46:39,323 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-22 17:46:41,558 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2164,
        "candidates_token_count": 40,
        "total_token_count": 2376
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-22 17:46:41,574 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-22 17:46:41,574 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Country = "USA"', 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-22 17:46:41,574 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-22 17:46:43,689 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:46:43,705 | WARNING | File already exists.
2025-08-22 17:46:44,009 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 502 Bad Gateway"
2025-08-22 17:46:44,012 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-22 17:46:54,790 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:46:56,422 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-22 17:47:07,276 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:47:07,291 | WARNING | File already exists.
2025-08-22 17:47:08,173 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:47:08,190 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-22 17:47:09,856 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Order_Details",
                    "columns": [
                      "Order ID",
                      "Product ID",
                      "Product Name",
                      "Quantity",
                      "Warehouse",
                      "Shipping Status",
                      "Delivery Date",
                      "Courier",
                      "Tracking ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 56,
        "total_token_count": 2300,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-22 17:47:09,874 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Product ID"
        }
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Warehouse"
        }
        values {
          string_value: "Shipping Status"
        }
        values {
          string_value: "Delivery Date"
        }
        values {
          string_value: "Courier"
        }
        values {
          string_value: "Tracking ID"
        }
      }
    }
  }
}

2025-08-22 17:47:09,889 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Order_Details', 'columns': ['Order ID', 'Product ID', 'Product Name', 'Quantity', 'Warehouse', 'Shipping Status', 'Delivery Date', 'Courier', 'Tracking ID']}
2025-08-22 17:47:09,889 | INFO | 🧠 Final SQL Query --> SELECT "Order ID", "Product ID", "Product Name", "Quantity", "Warehouse", "Shipping Status", "Delivery Date", "Courier", "Tracking ID" FROM "Order_Details"
2025-08-22 17:47:17,940 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:47:17,956 | WARNING | File already exists.
2025-08-22 17:47:18,800 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:47:18,816 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-22 17:47:34,856 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-22 17:47:34,856 | WARNING | File already exists.
2025-08-22 17:47:35,716 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:47:35,726 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-22 17:47:43,756 | INFO | Starting upload for file: policy details.pdf
2025-08-22 17:47:43,775 | WARNING | File already exists.
2025-08-22 17:47:44,623 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:47:44,623 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-22 17:47:46,756 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:47:47,323 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-22 17:48:26,857 | INFO | Starting upload for file: policy details.pdf
2025-08-22 17:48:26,857 | WARNING | File already exists.
2025-08-22 17:48:27,706 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:48:27,706 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-22 17:48:29,673 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:48:30,224 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-22 17:48:31,790 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "what are the policies mentioned here?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 23,
        "total_token_count": 2257,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-22 17:48:31,790 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "what are the policies mentioned here?"
    }
  }
}

2025-08-22 17:48:31,807 | INFO | Dispatching function: get_policy_info with args: {'query': 'what are the policies mentioned here?'}
2025-08-22 17:48:32,590 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-22 17:48:39,073 | INFO | Starting upload for file: policy details.pdf
2025-08-22 17:48:39,073 | WARNING | File already exists.
2025-08-22 17:48:39,912 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-22 17:48:39,923 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-22 17:48:41,857 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:48:42,424 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-22 17:59:06,803 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-22 17:59:08,884 | INFO | Starting upload for file: policy details.pdf
2025-08-22 17:59:08,896 | WARNING | File already exists.
2025-08-22 17:59:09,171 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-08-22 17:59:09,175 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-22 17:59:11,727 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-22 17:59:12,127 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-22 17:59:12,664 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-22 17:59:56,629 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "what are the policies mentioned here?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 23,
        "total_token_count": 2277
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-22 17:59:56,644 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "what are the policies mentioned here?"
    }
  }
}

2025-08-22 17:59:56,645 | INFO | Dispatching function: get_policy_info with args: {'query': 'what are the policies mentioned here?'}
2025-08-22 17:59:58,161 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-22 18:01:09,612 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2265,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-22 18:01:09,612 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-22 18:01:09,628 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-22 18:01:13,929 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-08-22 18:01:13,929 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 188, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 23, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 173, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":0.000017722}'
2025-08-26 18:07:54,457 | INFO | Ensuring Qdrant collection exists...
2025-08-26 18:07:55,278 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-26 18:07:55,758 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-26 18:07:55,764 | INFO | Qdrant collection ready.
2025-08-26 18:08:37,052 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 18:08:37,061 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-26 18:08:37,065 | INFO | Processing Excel with multiple sheets...
2025-08-26 18:08:41,533 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.41s
2025-08-26 18:08:41,708 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.17s
2025-08-26 18:08:41,863 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.15s
2025-08-26 18:08:42,042 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.18s
2025-08-26 18:08:42,177 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.13s
2025-08-26 18:09:07,516 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The query is unrelated to order details or policy information."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2164,
        "candidates_token_count": 26,
        "total_token_count": 2257
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-26 18:09:07,538 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The query is unrelated to order details or policy information."
    }
  }
}

2025-08-26 18:09:07,551 | INFO | Dispatching function: handle_unknown_query with args: {'message': 'The query is unrelated to order details or policy information.'}
2025-08-26 18:10:13,475 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 18:10:13,480 | WARNING | File already exists.
2025-08-26 18:10:14,550 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 18:10:14,571 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-26 18:10:20,589 | ERROR | Upload error occurred
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 220, in upload_file
    index_document(text_chunks, file.filename)
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 149, in index_document
    embeddings = [
                 ^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 150, in <listcomp>
    embed_content(content=chunk, model=EMBED_MODEL, task_type="retrieval_document")['embedding']
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\embedding.py", line 213, in embed_content
    embedding_response = client.embed_content(
                         ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 1263, in embed_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerUserPerProjectPerModel-FreeTier"
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
]
2025-08-26 18:30:42,677 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2335
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-26 18:30:42,700 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-26 18:30:42,700 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-26 18:30:42,700 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-26 22:48:10,225 | INFO | Ensuring Qdrant collection exists...
2025-08-26 22:48:11,071 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-26 22:48:11,093 | INFO | Qdrant collection ready.
2025-08-26 22:49:02,828 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 22:49:02,828 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-26 22:49:02,828 | INFO | Processing Excel with multiple sheets...
2025-08-26 22:49:03,861 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.08s
2025-08-26 22:49:03,928 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-08-26 22:49:03,978 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-08-26 22:49:04,028 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-08-26 22:49:04,113 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.07s
2025-08-26 22:49:14,011 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 22:49:14,011 | WARNING | File already exists.
2025-08-26 22:49:14,828 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 22:49:14,828 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-26 22:49:26,712 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-26 22:49:28,211 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-26 22:49:30,760 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2508
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-26 22:49:30,761 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-26 22:49:30,761 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Country = "USA"', 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-26 22:49:30,761 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-26 22:49:32,861 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 22:49:32,861 | WARNING | File already exists.
2025-08-26 22:49:33,145 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 22:49:33,162 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-26 22:50:40,562 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 22:50:40,562 | WARNING | File already exists.
2025-08-26 22:50:41,395 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 22:50:41,395 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-26 22:50:42,979 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 31,
        "total_token_count": 2296
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-26 22:50:42,979 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-08-26 22:50:42,979 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-08-26 22:50:42,979 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-08-26 22:50:47,512 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 22:50:47,512 | WARNING | File already exists.
2025-08-26 22:50:49,664 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 22:50:49,665 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-26 22:51:02,245 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 22:51:02,245 | WARNING | File already exists.
2025-08-26 22:51:03,062 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 22:51:03,062 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-26 22:51:05,297 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = 'ORD104'",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 41,
        "total_token_count": 2326,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-26 22:51:05,303 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \'ORD104\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-26 22:51:05,303 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Order ID = 'ORD104'", 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-26 22:51:05,303 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ORD104' COLLATE NOCASE
2025-08-26 22:51:07,375 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-26 22:51:07,375 | WARNING | File already exists.
2025-08-26 22:51:07,659 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 22:51:07,659 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-26 23:23:05,360 | INFO | Starting upload for file: policy details.pdf
2025-08-26 23:23:05,360 | INFO | File saved at: uploads\policy details.pdf
2025-08-26 23:23:05,360 | INFO | Extracting PDF...
2025-08-26 23:23:10,326 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-26 23:23:11,127 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-26 23:23:24,061 | INFO | Starting upload for file: policy details.pdf
2025-08-26 23:23:24,061 | WARNING | File already exists.
2025-08-26 23:23:25,011 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 23:23:25,011 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-26 23:23:26,894 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-26 23:23:27,410 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-26 23:23:28,810 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2275
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-26 23:23:28,810 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-26 23:23:28,810 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-26 23:23:29,544 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-26 23:23:34,810 | INFO | Starting upload for file: policy details.pdf
2025-08-26 23:23:34,810 | WARNING | File already exists.
2025-08-26 23:23:35,610 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-26 23:23:35,627 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-26 23:23:37,560 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-26 23:23:38,095 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-26 23:31:29,528 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-26 23:31:31,598 | INFO | Starting upload for file: policy details.pdf
2025-08-26 23:31:31,598 | WARNING | File already exists.
2025-08-26 23:31:31,882 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-08-26 23:31:31,882 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-26 23:31:34,599 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-26 23:31:34,975 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-26 23:31:35,524 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-26 23:31:55,796 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-27 12:34:16,297 | INFO | Ensuring Qdrant collection exists...
2025-08-27 12:34:20,782 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 12:34:21,331 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-27 12:34:21,331 | INFO | Qdrant collection ready.
2025-08-27 12:35:03,455 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:35:03,467 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-27 12:35:03,467 | INFO | Processing Excel with multiple sheets...
2025-08-27 12:35:06,469 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.33s
2025-08-27 12:35:06,619 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-08-27 12:35:06,704 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.08s
2025-08-27 12:35:06,837 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.12s
2025-08-27 12:35:06,954 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.12s
2025-08-27 12:35:38,338 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:35:38,338 | WARNING | File already exists.
2025-08-27 12:35:39,305 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:35:39,338 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-27 12:35:51,555 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 12:35:53,305 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-27 12:35:54,888 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 25,
        "total_token_count": 2277
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:35:54,905 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-08-27 12:35:54,922 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-08-27 12:35:55,855 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-27 12:36:00,222 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:36:00,222 | WARNING | File already exists.
2025-08-27 12:36:01,524 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:36:01,524 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 12:36:10,367 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:36:10,367 | WARNING | File already exists.
2025-08-27 12:36:11,370 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:36:11,386 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 12:36:13,055 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2332,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:36:13,071 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 12:36:13,088 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-27 12:36:13,088 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-27 12:36:15,288 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:36:15,288 | WARNING | File already exists.
2025-08-27 12:36:15,672 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:36:15,689 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 12:43:59,392 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:43:59,409 | WARNING | File already exists.
2025-08-27 12:44:02,359 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:44:02,359 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 12:44:04,609 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2371
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:44:04,625 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 12:44:04,625 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': 'Country = "USA"'}
2025-08-27 12:44:04,625 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-27 12:44:06,758 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:44:06,775 | WARNING | File already exists.
2025-08-27 12:44:07,259 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:44:07,575 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 12:44:48,225 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:44:48,242 | WARNING | File already exists.
2025-08-27 12:44:49,459 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:44:49,459 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 12:44:51,374 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Order ID = \"ord104\"",
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2171,
        "candidates_token_count": 41,
        "total_token_count": 2340,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:44:51,376 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Order ID = \"ord104\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-08-27 12:44:51,392 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Order ID = "ord104"', 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-08-27 12:44:51,392 | INFO | 🧠 Final SQL Query --> SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = "ord104" COLLATE NOCASE
2025-08-27 12:44:53,559 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 12:44:53,559 | WARNING | File already exists.
2025-08-27 12:44:54,192 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:44:54,192 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 12:45:08,959 | INFO | Starting upload for file: policy details.pdf
2025-08-27 12:45:08,976 | INFO | File saved at: uploads\policy details.pdf
2025-08-27 12:45:08,976 | INFO | Extracting PDF...
2025-08-27 12:45:13,976 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 12:45:15,326 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-27 12:45:27,526 | INFO | Starting upload for file: policy details.pdf
2025-08-27 12:45:27,526 | WARNING | File already exists.
2025-08-27 12:45:28,459 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:45:28,811 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-27 12:45:32,182 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 12:45:32,860 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-27 12:45:34,526 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 25,
        "total_token_count": 2268
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:45:34,543 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-08-27 12:45:34,543 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-08-27 12:45:37,026 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-27 12:45:41,810 | INFO | Starting upload for file: policy details.pdf
2025-08-27 12:45:41,828 | WARNING | File already exists.
2025-08-27 12:45:43,043 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 12:45:43,059 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-27 12:45:45,976 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 12:45:46,293 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-27 12:46:25,984 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-27 12:46:36,343 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2262,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:46:36,360 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-27 12:46:36,360 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-27 12:46:37,743 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-08-27 12:46:37,743 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 188, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 23, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 173, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":0.000012722}'
2025-08-27 12:47:32,194 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2289
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:47:32,210 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-27 12:47:32,227 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-27 12:47:35,744 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-08-27 12:47:35,744 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 188, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 23, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 173, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":4.312e-6}'
2025-08-27 12:50:25,111 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2265
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 12:50:25,127 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-27 12:50:25,127 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-27 12:50:26,607 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-08-27 12:50:26,623 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 188, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 23, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 173, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":4.224e-6}'
2025-08-27 17:12:28,171 | INFO | Ensuring Qdrant collection exists...
2025-08-27 17:12:30,687 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 17:12:31,123 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-27 17:12:31,139 | INFO | Qdrant collection ready.
2025-08-27 17:14:29,854 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2445
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:14:29,863 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 17:14:29,887 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-27 17:14:29,897 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-27 17:18:56,014 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "Is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 25,
        "total_token_count": 2289
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:18:56,022 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "Is there any limitations to upload a file?"
    }
  }
}

2025-08-27 17:18:56,032 | INFO | Dispatching function: get_policy_info with args: {'query': 'Is there any limitations to upload a file?'}
2025-08-27 17:18:57,765 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-27 17:19:16,973 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2350
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:19:16,982 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 17:19:16,982 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': 'Country = "USA"'}
2025-08-27 17:19:16,997 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-27 17:26:45,736 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = 'USA'"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2335
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:26:45,759 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 17:26:45,759 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': "Country = 'USA'"}
2025-08-27 17:26:45,769 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-27 17:27:17,719 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2427,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:27:17,735 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 17:27:17,743 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-27 17:27:17,743 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-27 17:29:05,316 | INFO | Ensuring Qdrant collection exists...
2025-08-27 17:29:06,241 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 17:29:06,256 | INFO | Qdrant collection ready.
2025-08-27 17:29:32,687 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2346
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:29:32,705 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 17:29:32,720 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Country = "USA"', 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-27 17:29:32,736 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-27 17:30:19,469 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2317,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:30:19,470 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-27 17:30:19,486 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-27 17:30:20,920 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-27 17:33:36,733 | INFO | Ensuring Qdrant collection exists...
2025-08-27 17:33:38,604 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 17:33:38,620 | INFO | Qdrant collection ready.
2025-08-27 17:34:20,879 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The user's query \"what is the weather today?\" is unrelated to e-commerce. Therefore, I cannot answer this question."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2165,
        "candidates_token_count": 43,
        "total_token_count": 2268
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:34:20,891 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The user\'s query \"what is the weather today?\" is unrelated to e-commerce. Therefore, I cannot answer this question."
    }
  }
}

2025-08-27 17:34:20,905 | INFO | Dispatching function: handle_unknown_query with args: {'message': 'The user\'s query "what is the weather today?" is unrelated to e-commerce. Therefore, I cannot answer this question.'}
2025-08-27 17:41:11,977 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 17:41:11,994 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-27 17:41:11,994 | INFO | Processing Excel with multiple sheets...
2025-08-27 17:41:13,793 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.18s
2025-08-27 17:41:13,861 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.07s
2025-08-27 17:41:13,909 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-08-27 17:41:13,959 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-08-27 17:41:14,026 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.07s
2025-08-27 17:41:23,726 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 17:41:23,726 | WARNING | File already exists.
2025-08-27 17:41:25,044 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 17:41:25,044 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-27 17:41:36,459 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-27 17:41:37,592 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-27 17:41:41,343 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2332
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-27 17:41:41,343 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-27 17:41:41,343 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-27 17:41:41,359 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-27 17:41:43,442 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 17:41:43,442 | WARNING | File already exists.
2025-08-27 17:41:44,259 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 17:41:44,259 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-27 17:43:17,443 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-27 17:43:17,449 | WARNING | File already exists.
2025-08-27 17:43:18,255 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-27 17:43:18,266 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-28 12:44:40,658 | INFO | Ensuring Qdrant collection exists...
2025-08-28 12:44:41,579 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-28 12:44:41,595 | INFO | Qdrant collection ready.
2025-08-28 13:23:44,372 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Customer Name = 'abbiramy'",
                    "table_name": "Customer_Info",
                    "columns": [
                      "Email"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2169,
        "candidates_token_count": 39,
        "total_token_count": 2303
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 13:23:44,389 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Customer Name = \'abbiramy\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Customer_Info"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Email"
        }
      }
    }
  }
}

2025-08-28 13:23:44,397 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Customer Name = 'abbiramy'", 'table_name': 'Customer_Info', 'columns': ['Email']}
2025-08-28 13:23:44,400 | INFO | 🧠 Final SQL Query --> SELECT "Email" FROM "Customer_Info" WHERE "Customer Name" = 'abbiramy' COLLATE NOCASE
2025-08-28 13:24:08,705 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2346
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 13:24:08,720 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-28 13:24:08,722 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': 'Country = "USA"'}
2025-08-28 13:24:08,723 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-28 13:24:21,996 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-28 13:24:28,539 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = \"USA\"",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2319,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 13:24:28,539 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-28 13:24:28,539 | INFO | Dispatching function: get_order_details with args: {'whereClause': 'Country = "USA"', 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-28 13:24:28,539 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-28 13:25:00,440 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2168,
        "candidates_token_count": 25,
        "total_token_count": 2275,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 13:25:00,456 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-08-28 13:25:00,456 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-08-28 13:25:01,857 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-08-28 13:25:01,857 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 188, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 23, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 173, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":0.000013163}'
2025-08-28 13:48:05,034 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "Is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2168,
        "candidates_token_count": 25,
        "total_token_count": 2271
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 13:48:05,051 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "Is there any limitations to upload a file?"
    }
  }
}

2025-08-28 13:48:05,051 | INFO | Dispatching function: get_policy_info with args: {'query': 'Is there any limitations to upload a file?'}
2025-08-28 13:48:06,467 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-08-28 13:48:06,467 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 188, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 23, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 173, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":5.324e-6}'
2025-08-28 14:01:35,664 | INFO | Ensuring Qdrant collection exists...
2025-08-28 14:01:37,679 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-28 14:01:39,576 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-28 14:01:39,591 | INFO | Qdrant collection ready.
2025-08-28 14:02:09,090 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2281
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 14:02:09,107 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-28 14:02:09,123 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-28 14:02:09,131 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-28 14:02:22,557 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2170,
        "candidates_token_count": 22,
        "total_token_count": 2262,
        "cached_content_token_count": 1718
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 14:02:22,574 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-08-28 14:02:22,574 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-08-28 14:02:23,990 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-08-28 14:02:45,458 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The user's query is about the weather, which is outside the scope of this e-commerce support chatbot."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2165,
        "candidates_token_count": 38,
        "total_token_count": 2244,
        "cached_content_token_count": 1717
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 14:02:45,474 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The user\'s query is about the weather, which is outside the scope of this e-commerce support chatbot."
    }
  }
}

2025-08-28 14:02:45,474 | INFO | Dispatching function: handle_unknown_query with args: {'message': "The user's query is about the weather, which is outside the scope of this e-commerce support chatbot."}
2025-08-28 14:05:58,992 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-28 14:05:59,008 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-28 14:05:59,008 | INFO | Processing Excel with multiple sheets...
2025-08-28 14:06:01,892 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.28s
2025-08-28 14:06:02,025 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-08-28 14:06:02,108 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.08s
2025-08-28 14:06:02,209 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.10s
2025-08-28 14:06:02,325 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.12s
2025-08-28 14:06:14,376 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-28 14:06:14,392 | WARNING | File already exists.
2025-08-28 14:06:15,208 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-28 14:06:15,242 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-28 14:06:28,826 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-28 14:06:31,076 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-28 14:06:32,909 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2339
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-28 14:06:32,925 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-28 14:06:32,926 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-28 14:06:32,926 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-28 14:06:35,075 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-28 14:06:35,093 | WARNING | File already exists.
2025-08-28 14:06:35,442 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-28 14:06:35,925 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-29 17:53:19,582 | INFO | Ensuring Qdrant collection exists...
2025-08-29 17:53:20,406 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-29 17:53:20,419 | INFO | Qdrant collection ready.
2025-08-29 17:54:11,721 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-29 17:54:57,189 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2168,
        "candidates_token_count": 40,
        "total_token_count": 2433
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-29 17:54:57,222 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-29 17:54:57,222 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-29 17:54:57,239 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-29 18:20:10,521 | INFO | Ensuring Qdrant collection exists...
2025-08-29 18:20:11,326 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-29 18:20:11,754 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-29 18:20:11,759 | INFO | Qdrant collection ready.
2025-08-29 18:21:57,449 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": "Country = 'USA'",
                    "table_name": "Sales_Details",
                    "columns": [
                      "COUNT(Order ID)"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2365
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-29 18:21:57,493 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \'USA\'"
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-29 18:21:57,506 | INFO | Dispatching function: get_order_details with args: {'whereClause': "Country = 'USA'", 'table_name': 'Sales_Details', 'columns': ['COUNT(Order ID)']}
2025-08-29 18:21:57,518 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-08-29 18:22:52,590 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-29 18:22:52,605 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-29 18:22:52,610 | INFO | Processing Excel with multiple sheets...
2025-08-29 18:22:57,070 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.47s
2025-08-29 18:22:57,269 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.20s
2025-08-29 18:22:57,427 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.15s
2025-08-29 18:22:57,586 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.16s
2025-08-29 18:22:57,750 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.16s
2025-08-29 18:23:07,039 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-29 18:23:07,044 | WARNING | File already exists.
2025-08-29 18:23:07,927 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-08-29 18:23:07,946 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-29 18:23:19,467 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-29 18:23:19,885 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-29 18:23:21,251 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-29 18:23:22,995 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "COUNT(Order ID)"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": "Country = \"USA\""
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 40,
        "total_token_count": 2326
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-29 18:23:23,027 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      string_value: "Country = \"USA\""
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "COUNT(Order ID)"
        }
      }
    }
  }
}

2025-08-29 18:23:23,050 | INFO | Dispatching function: get_order_details with args: {'columns': ['COUNT(Order ID)'], 'table_name': 'Sales_Details', 'whereClause': 'Country = "USA"'}
2025-08-29 18:23:23,055 | INFO | 🧠 Final SQL Query --> SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = "USA" COLLATE NOCASE
2025-08-29 18:23:25,299 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-29 18:23:25,307 | WARNING | File already exists.
2025-08-29 18:23:25,612 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-29 18:23:25,651 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-29 18:24:38,041 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-29 18:24:38,048 | WARNING | File already exists.
2025-08-29 18:24:38,931 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-29 18:24:38,949 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-29 20:27:50,853 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-29 20:28:02,136 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "what are the policies mentioned here?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2166,
        "candidates_token_count": 23,
        "total_token_count": 2280
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-29 20:28:02,159 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "what are the policies mentioned here?"
    }
  }
}

2025-08-29 20:28:02,159 | INFO | Dispatching function: get_policy_info with args: {'query': 'what are the policies mentioned here?'}
2025-08-29 20:28:03,660 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-08-29 20:28:03,661 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 188, in handle_query
    result = FUNCTION_REGISTRY[function_name](args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 23, in <lambda>
    "get_policy_info": lambda args: search_similar(args["query"]),
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 86, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":0.000013032}'
2025-08-31 22:47:10,606 | INFO | Ensuring Qdrant collection exists...
2025-08-31 22:47:12,425 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-31 22:47:13,052 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-31 22:47:13,077 | INFO | Qdrant collection ready.
2025-08-31 22:53:16,457 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2266,
        "candidates_token_count": 54,
        "total_token_count": 2464
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-31 22:53:16,490 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-08-31 22:53:16,540 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x00000200BCABBB50>, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000200BCABBAD0>], 'columns': ['Order ID']}
2025-08-31 22:53:16,557 | INFO | 🧠 Final SQL Query --> SELECT "Order ID" FROM "Sales_Details"
2025-08-31 22:53:34,925 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 22:53:34,925 | WARNING | File already exists.
2025-08-31 22:53:36,410 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 22:53:36,442 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-31 22:53:47,675 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-31 22:53:49,191 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-31 22:53:59,325 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2266,
        "candidates_token_count": 48,
        "total_token_count": 2478
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-31 22:53:59,341 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-08-31 22:53:59,358 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000200BCDC01D0>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x00000200BCDBFB50>}
2025-08-31 22:53:59,358 | INFO | 🧠 Final SQL Query --> SELECT  FROM "Sales_Details"
2025-08-31 22:54:01,491 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 22:54:01,491 | WARNING | File already exists.
2025-08-31 22:54:02,447 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 22:54:02,463 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:12:47,200 | INFO | Ensuring Qdrant collection exists...
2025-08-31 23:12:48,049 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-31 23:12:48,066 | INFO | Qdrant collection ready.
2025-08-31 23:13:04,867 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:13:04,884 | WARNING | File already exists.
2025-08-31 23:13:05,701 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:13:05,750 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:13:17,133 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-31 23:13:19,267 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:13:19,283 | WARNING | File already exists.
2025-08-31 23:13:19,567 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-08-31 23:13:19,584 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-08-31 23:13:32,415 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-31 23:13:32,818 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-08-31 23:13:34,067 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-08-31 23:14:01,234 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:14:01,234 | WARNING | File already exists.
2025-08-31 23:14:03,518 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:14:03,520 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:14:06,418 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2387,
        "candidates_token_count": 51,
        "total_token_count": 2588
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-31 23:14:06,436 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-08-31 23:14:06,452 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001FF50523CD0>, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001FF50534550>], 'columns': []}
2025-08-31 23:14:06,467 | INFO | 🧠 Final SQL Query --> SELECT  FROM "Sales_Details"
2025-08-31 23:14:08,586 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:14:08,601 | WARNING | File already exists.
2025-08-31 23:14:10,378 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:14:10,393 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:18:37,269 | INFO | Ensuring Qdrant collection exists...
2025-08-31 23:18:38,186 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-31 23:18:38,186 | INFO | Qdrant collection ready.
2025-08-31 23:19:01,036 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:19:01,036 | WARNING | File already exists.
2025-08-31 23:19:01,953 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:19:01,985 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:20:12,488 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:20:12,503 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-08-31 23:20:12,504 | INFO | Processing Excel with multiple sheets...
2025-08-31 23:20:14,087 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.23s
2025-08-31 23:20:14,137 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.05s
2025-08-31 23:20:14,190 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.05s
2025-08-31 23:20:14,239 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.05s
2025-08-31 23:20:14,288 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.05s
2025-08-31 23:20:20,672 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:20:20,672 | WARNING | File already exists.
2025-08-31 23:20:23,219 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:20:23,220 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:20:25,437 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2566
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-31 23:20:25,452 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-08-31 23:20:25,453 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000029EBF0B4090>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000029EBF0B9050>}
2025-08-31 23:20:25,453 | INFO | 🧠 Final SQL Query --> SELECT "Order ID" FROM "Sales_Details"
2025-08-31 23:20:30,104 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:20:30,104 | WARNING | File already exists.
2025-08-31 23:20:31,019 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:20:31,019 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:20:59,054 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:20:59,054 | WARNING | File already exists.
2025-08-31 23:20:59,871 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:20:59,871 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:21:11,087 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2581
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-31 23:21:11,104 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-08-31 23:21:11,121 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000029EBF0AE810>, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000029EBF15F190>], 'columns': ['Order ID']}
2025-08-31 23:21:11,129 | INFO | 🧠 Final SQL Query --> SELECT "Order ID" FROM "Sales_Details"
2025-08-31 23:21:13,219 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-08-31 23:21:13,235 | WARNING | File already exists.
2025-08-31 23:21:14,288 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-08-31 23:21:14,288 | INFO | Embeddings already exist. Skipping reprocessing.
2025-08-31 23:35:01,310 | INFO | Ensuring Qdrant collection exists...
2025-08-31 23:35:02,126 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-08-31 23:35:02,152 | INFO | Qdrant collection ready.
2025-08-31 23:35:34,376 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2691
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-08-31 23:35:34,378 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-08-31 23:35:34,400 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001A5A992B290>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001A5A992B190>}
2025-08-31 23:35:34,400 | INFO | 🧠 Final SQL Query --> SELECT  FROM "Sales_Details"
2025-09-01 00:24:06,699 | INFO | Ensuring Qdrant collection exists...
2025-09-01 00:24:07,682 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 00:24:07,702 | INFO | Qdrant collection ready.
2025-09-01 00:24:34,466 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2600
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 00:24:34,486 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 00:24:34,501 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001BE72B616D0>, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001BE701DB0D0>], 'columns': ['Order ID']}
2025-09-01 00:24:34,518 | INFO | 🧠 Final SQL Query --> SELECT "Order ID" FROM "Sales_Details"
2025-09-01 00:26:42,168 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 51,
        "total_token_count": 2723
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 00:26:42,201 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 00:26:42,217 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001BE701DB0D0>, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001BE7479B710>], 'columns': []}
2025-09-01 00:26:42,217 | INFO | 🧠 Final SQL Query --> SELECT  FROM "Sales_Details"
2025-09-01 00:27:15,717 | INFO | Ensuring Qdrant collection exists...
2025-09-01 00:27:16,750 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 00:27:16,772 | INFO | Qdrant collection ready.
2025-09-01 00:27:33,451 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2750
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 00:27:33,468 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 00:27:33,489 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000025BEC0D2ED0>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000025BEC07E450>}
2025-09-01 00:27:33,501 | INFO | 🧠 Final SQL Query --> SELECT "Order ID" FROM "Sales_Details"
2025-09-01 00:29:44,586 | INFO | Starting upload for file: policy details.pdf
2025-09-01 00:29:44,586 | INFO | File saved at: uploads\policy details.pdf
2025-09-01 00:29:44,604 | INFO | Extracting PDF...
2025-09-01 00:29:49,636 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 00:29:50,502 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-01 00:29:59,436 | INFO | Starting upload for file: policy details.pdf
2025-09-01 00:29:59,436 | WARNING | File already exists.
2025-09-01 00:30:00,236 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-01 00:30:00,269 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-01 00:30:02,386 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 00:30:02,953 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-01 00:30:04,436 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2488
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 00:30:04,453 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-01 00:30:04,453 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-01 00:30:05,236 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-01 00:30:10,655 | INFO | Starting upload for file: policy details.pdf
2025-09-01 00:30:10,655 | WARNING | File already exists.
2025-09-01 00:30:11,552 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-01 00:30:11,552 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-01 00:30:13,970 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 00:30:14,636 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-01 12:19:08,450 | INFO | Ensuring Qdrant collection exists...
2025-09-01 12:19:09,632 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 12:19:09,665 | INFO | Qdrant collection ready.
2025-09-01 12:19:49,483 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2732
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 12:19:49,517 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 12:19:49,533 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000002B1FA98CA50>, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002B1FA4E7810>], 'columns': ['Order ID']}
2025-09-01 12:19:49,552 | INFO | 🧠 Final SQL Query --> SELECT "Order ID" FROM "Sales_Details"
2025-09-01 12:20:20,536 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2392,
        "candidates_token_count": 31,
        "total_token_count": 2526
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 12:20:20,550 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-01 12:20:20,567 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-09-01 12:20:20,567 | INFO | 🧠 Final SQL Query --> SELECT "Total Price", "Sale Date" FROM "Sales_Details"
2025-09-01 12:24:23,187 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 51,
        "total_token_count": 2562
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 12:24:23,204 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 12:24:23,237 | INFO | Dispatching function: get_order_details with args: {'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000002B1FAC8BCD0>, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002B1FAC8BF50>], 'columns': []}
2025-09-01 12:24:23,237 | INFO | 🧠 Final SQL Query --> SELECT  FROM "Sales_Details"
2025-09-01 12:24:56,179 | INFO | Ensuring Qdrant collection exists...
2025-09-01 12:24:56,970 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 12:24:56,988 | INFO | Qdrant collection ready.
2025-09-01 12:25:20,142 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2642
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 12:25:20,172 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 12:25:20,186 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001DCDCCABF10>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001DCD89A7490>}
2025-09-01 12:25:20,205 | INFO | 🧠 Final SQL Query --> SELECT "Order ID" FROM "Sales_Details"
2025-09-01 14:42:23,064 | INFO | Ensuring Qdrant collection exists...
2025-09-01 14:42:24,216 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 14:42:24,231 | INFO | Qdrant collection ready.
2025-09-01 14:43:13,650 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2610
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 14:43:13,684 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 14:43:13,716 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E2E70ED390>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001E2E70EDE10>}
2025-09-01 17:28:26,211 | INFO | Ensuring Qdrant collection exists...
2025-09-01 17:28:27,027 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-01 17:28:27,053 | INFO | Qdrant collection ready.
2025-09-01 17:28:54,295 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2574
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-01 17:28:54,313 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-01 17:28:54,347 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000025944FCBDD0>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000025944FCBB90>}
2025-09-02 13:25:00,377 | INFO | Ensuring Qdrant collection exists...
2025-09-02 13:25:01,248 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-02 13:25:01,264 | INFO | Qdrant collection ready.
2025-09-02 13:25:44,111 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 51,
        "total_token_count": 2669
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-02 13:25:44,145 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-02 13:25:44,167 | INFO | Dispatching function: get_order_details with args: {'columns': [], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001BE98A92610>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001BE98A92310>}
2025-09-02 16:40:52,634 | INFO | Ensuring Qdrant collection exists...
2025-09-02 16:40:53,587 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-02 16:40:53,602 | INFO | Qdrant collection ready.
2025-09-02 16:41:18,737 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2635
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-02 16:41:18,753 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-02 16:41:18,768 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001524E384D50>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001524E385750>}
2025-09-02 17:04:10,746 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ORD104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 41,
        "total_token_count": 2601
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-02 17:04:10,763 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ORD104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-02 17:04:10,779 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000001524EB40750>}
2025-09-02 17:10:31,342 | INFO | Ensuring Qdrant collection exists...
2025-09-02 17:10:32,373 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-02 17:10:32,404 | INFO | Qdrant collection ready.
2025-09-02 17:10:57,978 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2583
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-02 17:10:57,999 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-02 17:10:58,015 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002DCB8701710>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000002DCB84FB490>}
2025-09-02 17:12:15,133 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2577,
        "cached_content_token_count": 1738
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-02 17:12:15,167 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-02 17:12:15,183 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002DCBCCD9750>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000002DCBCCD92D0>}
2025-09-04 00:24:37,904 | INFO | Ensuring Qdrant collection exists...
2025-09-04 00:24:38,719 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 00:24:38,736 | INFO | Qdrant collection ready.
2025-09-04 00:25:28,719 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 51,
        "total_token_count": 2599
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 00:25:28,769 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-04 00:25:28,785 | INFO | Dispatching function: get_order_details with args: {'columns': [], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002225F591A90>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000022263C69250>}
2025-09-04 00:30:52,788 | INFO | Ensuring Qdrant collection exists...
2025-09-04 00:30:53,705 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 00:30:53,725 | INFO | Qdrant collection ready.
2025-09-04 00:31:26,338 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2586
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 00:31:26,355 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-04 00:31:26,388 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002B33C920E50>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x000002B33C95B590>}
2025-09-04 00:43:13,394 | INFO | Ensuring Qdrant collection exists...
2025-09-04 00:43:14,277 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 00:43:14,277 | INFO | Qdrant collection ready.
2025-09-04 00:44:24,797 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2658
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 00:44:24,845 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-04 00:44:24,897 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000028A2A346150>], 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000028A2E167590>}
2025-09-04 00:44:59,014 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ORD104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 41,
        "total_token_count": 2603,
        "cached_content_token_count": 1739
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 00:44:59,043 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ORD104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-04 00:44:59,060 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': <proto.marshal.collections.maps.MapComposite object at 0x0000028A2E919410>}
2025-09-04 15:48:56,672 | INFO | Ensuring Qdrant collection exists...
2025-09-04 15:48:57,440 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 15:48:57,456 | INFO | Qdrant collection ready.
2025-09-04 15:49:50,348 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2474
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 15:49:50,379 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-04 15:49:50,398 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-04 15:49:51,847 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-04 15:50:49,931 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2488,
        "cached_content_token_count": 1739
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 15:50:49,947 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-04 15:50:49,947 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-04 15:50:51,366 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-04 16:36:55,865 | INFO | Ensuring Qdrant collection exists...
2025-09-04 16:36:57,310 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 16:36:57,341 | INFO | Qdrant collection ready.
2025-09-04 16:37:29,885 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2489
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 16:37:29,903 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-04 16:37:29,903 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-04 16:37:31,369 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-04 17:16:14,737 | INFO | Ensuring Qdrant collection exists...
2025-09-04 17:16:15,567 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 17:16:15,588 | INFO | Qdrant collection ready.
2025-09-04 17:16:41,138 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2705
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:16:41,170 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-04 17:16:41,187 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000017658BE0050>], 'whereClause': {'Country': 'USA'}}
2025-09-04 17:16:41,271 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 176, in handle_query
    llm_response = gemini_client.generate_content(format_prompt)
                   ^^^^^^^^^^^^^
NameError: name 'gemini_client' is not defined
2025-09-04 17:17:49,080 | INFO | Ensuring Qdrant collection exists...
2025-09-04 17:17:49,893 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 17:17:49,925 | INFO | Qdrant collection ready.
2025-09-04 17:18:10,738 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2587,
        "cached_content_token_count": 1738
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:18:10,757 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-04 17:18:10,788 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Country': 'USA'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000016474F4F850>], 'columns': ['Order ID']}
2025-09-04 17:18:10,822 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 176, in handle_query
    llm_response = gemini_client.generate_content(format_prompt)
                   ^^^^^^^^^^^^^
NameError: name 'gemini_client' is not defined
2025-09-04 17:21:42,104 | INFO | Ensuring Qdrant collection exists...
2025-09-04 17:21:42,956 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 17:21:42,973 | INFO | Qdrant collection ready.
2025-09-04 17:23:30,941 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 51,
        "total_token_count": 2615
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:23:30,973 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-04 17:23:30,990 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Country': 'USA'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000022048CBCC90>], 'columns': []}
2025-09-04 17:24:44,025 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2392,
        "candidates_token_count": 31,
        "total_token_count": 2578
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:24:44,043 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-04 17:24:44,043 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-09-04 17:32:03,960 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ORD104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 41,
        "total_token_count": 2636
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:32:03,978 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ORD104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-04 17:32:03,978 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ORD104'}}
2025-09-04 17:33:26,628 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2485
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:33:26,650 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-04 17:33:26,650 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-04 17:33:28,164 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-04 17:36:16,112 | INFO | Ensuring Qdrant collection exists...
2025-09-04 17:36:16,970 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 17:36:16,982 | INFO | Qdrant collection ready.
2025-09-04 17:36:40,881 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2392,
        "candidates_token_count": 31,
        "total_token_count": 2617
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:36:40,897 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-04 17:36:40,914 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-09-04 17:41:22,228 | INFO | Ensuring Qdrant collection exists...
2025-09-04 17:41:23,547 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-04 17:41:23,580 | INFO | Qdrant collection ready.
2025-09-04 17:41:48,916 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2392,
        "candidates_token_count": 31,
        "total_token_count": 2562
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:41:48,934 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-04 17:41:48,934 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-09-04 17:42:23,566 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 48,
        "total_token_count": 2583
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-04 17:42:23,599 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-04 17:42:23,632 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002893FB49450>], 'whereClause': {'Country': 'USA'}}
2025-09-10 15:49:00,198 | INFO | Ensuring Qdrant collection exists...
2025-09-10 15:49:00,983 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 15:49:00,995 | INFO | Qdrant collection ready.
2025-09-10 15:49:54,250 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Country": "USA"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 54,
        "total_token_count": 2619
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 15:49:54,271 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-10 15:49:54,285 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Country': 'USA'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000022C5523E090>], 'columns': ['Order ID']}
2025-09-10 15:50:10,415 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2392,
        "candidates_token_count": 31,
        "total_token_count": 2581
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 15:50:10,423 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-10 15:50:10,435 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Total Price', 'Sale Date']}
2025-09-10 15:50:38,638 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2488
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 15:50:38,649 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-10 15:50:38,649 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-10 15:50:39,363 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 214, in handle_query
    raw_result = FUNCTION_REGISTRY[function_name](args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 73, in <lambda>
    "get_policy_info": lambda args: search_similar(
                                    ^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 85, in search_similar
    embedding = embed_content(content=query, model=EMBED_MODEL, task_type="retrieval_query")['embedding']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\embedding.py", line 213, in embed_content
    embedding_response = client.embed_content(
                         ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 1263, in embed_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier"
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
]
2025-09-10 16:31:25,627 | INFO | Ensuring Qdrant collection exists...
2025-09-10 16:31:26,441 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 16:31:26,456 | INFO | Qdrant collection ready.
2025-09-10 16:32:23,522 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2482
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 16:32:23,555 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-10 16:32:23,555 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-10 16:32:24,256 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 214, in handle_query
    raw_result = FUNCTION_REGISTRY[function_name](args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 73, in <lambda>
    "get_policy_info": lambda args: search_similar(
                                    ^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 85, in search_similar
    embedding = embed_content(content=query, model=EMBED_MODEL, task_type="retrieval_query")['embedding']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\generativeai\embedding.py", line 213, in embed_content
    embedding_response = client.embed_content(
                         ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 1263, in embed_content
    response = rpc(
               ^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
             ^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerProjectPerModel-FreeTier"
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
]
2025-09-10 17:11:20,906 | INFO | Ensuring Qdrant collection exists...
2025-09-10 17:11:21,740 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:11:21,761 | INFO | Qdrant collection ready.
2025-09-10 17:14:01,976 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 25,
        "total_token_count": 2486
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:14:01,993 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-09-10 17:14:01,993 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-09-10 17:14:03,875 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 400 Bad Request"
2025-09-10 17:14:03,875 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 89, in handle_query
    raw_result = FUNCTION_REGISTRY[function_name](args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 73, in <lambda>
    "get_policy_info": lambda args: search_similar(
                                    ^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 86, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Wrong input: Vector dimension error: expected dim: 768, got 3072"},"time":0.00079074}'
2025-09-10 17:16:34,944 | INFO | Ensuring Qdrant collection exists...
2025-09-10 17:16:35,741 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:16:35,761 | INFO | Qdrant collection ready.
2025-09-10 17:17:29,326 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 25,
        "total_token_count": 2543
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:17:29,344 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-09-10 17:17:29,344 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-09-10 17:17:31,210 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 400 Bad Request"
2025-09-10 17:17:31,210 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 89, in handle_query
    raw_result = FUNCTION_REGISTRY[function_name](args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 73, in <lambda>
    "get_policy_info": lambda args: search_similar(
                                    ^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 86, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Wrong input: Vector dimension error: expected dim: 768, got 3072"},"time":0.001473721}'
2025-09-10 17:42:34,375 | INFO | Ensuring Qdrant collection exists...
2025-09-10 17:42:35,204 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:42:35,506 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:42:35,581 | WARNING | Dimension mismatch for 'documents': expected 3072, got 768. Recreating...
2025-09-10 17:42:35,920 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:42:36,339 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:42:36,342 | INFO | Qdrant collection ready.
2025-09-10 17:42:56,622 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 22,
        "total_token_count": 2521
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:42:56,637 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-10 17:42:56,637 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-10 17:42:58,572 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-10 17:43:20,804 | INFO | Starting upload for file: policy details.pdf
2025-09-10 17:43:20,804 | WARNING | File already exists.
2025-09-10 17:43:21,671 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:43:21,703 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-10 17:43:23,871 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:43:24,156 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:43:24,171 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-10 17:43:25,321 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-10 17:43:32,204 | INFO | Starting upload for file: policy details.pdf
2025-09-10 17:43:32,204 | WARNING | File already exists.
2025-09-10 17:43:33,054 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:43:33,071 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:43:34,738 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 25,
        "total_token_count": 2504
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:43:34,738 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-09-10 17:43:34,738 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-09-10 17:43:36,122 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-10 17:43:46,188 | INFO | Starting upload for file: policy details.pdf
2025-09-10 17:43:46,188 | WARNING | File already exists.
2025-09-10 17:43:47,021 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:43:47,021 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:46:51,801 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:47:02,773 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:47:02,773 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-09-10 17:47:02,773 | INFO | Processing Excel with multiple sheets...
2025-09-10 17:47:07,207 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.58s
2025-09-10 17:47:07,389 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.18s
2025-09-10 17:47:07,557 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.15s
2025-09-10 17:47:07,755 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.20s
2025-09-10 17:47:07,956 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.18s
2025-09-10 17:47:27,639 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:47:27,639 | WARNING | File already exists.
2025-09-10 17:47:28,506 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-09-10 17:47:28,506 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-10 17:47:41,557 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:47:41,573 | INFO | Creating collection 'documents' with dim=3072...
2025-09-10 17:47:41,973 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:47:44,540 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-10 17:47:46,873 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2387,
        "candidates_token_count": 48,
        "total_token_count": 2564
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:47:46,907 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-10 17:47:46,922 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000020ECEA5E9D0>], 'whereClause': {'Country': 'USA'}}
2025-09-10 17:47:51,057 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:47:51,057 | WARNING | File already exists.
2025-09-10 17:47:51,939 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:47:51,950 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:48:12,774 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:48:12,774 | WARNING | File already exists.
2025-09-10 17:48:13,673 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:48:13,673 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:48:48,391 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:48:48,407 | WARNING | File already exists.
2025-09-10 17:48:49,257 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:48:49,257 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:49:07,157 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Order ID",
                      "Customer Name",
                      "Product Name",
                      "Category",
                      "Quantity",
                      "Unit Price",
                      "Total Price",
                      "Sale Date",
                      "Payment Method",
                      "Country"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2388,
        "candidates_token_count": 60,
        "total_token_count": 2530
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:49:07,174 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Customer Name"
        }
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Category"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Unit Price"
        }
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
        values {
          string_value: "Payment Method"
        }
        values {
          string_value: "Country"
        }
      }
    }
  }
}

2025-09-10 17:49:07,193 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Order ID', 'Customer Name', 'Product Name', 'Category', 'Quantity', 'Unit Price', 'Total Price', 'Sale Date', 'Payment Method', 'Country']}
2025-09-10 17:49:22,977 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:49:22,977 | WARNING | File already exists.
2025-09-10 17:49:24,078 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:49:24,092 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:49:55,723 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:49:55,726 | WARNING | File already exists.
2025-09-10 17:49:56,559 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:49:56,576 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:49:58,506 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Order ID": "ord104"
                    },
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 41,
        "total_token_count": 2561
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:49:58,526 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ord104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-10 17:49:58,556 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Order ID': 'ord104'}, 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-09-10 17:50:02,143 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:50:02,143 | WARNING | File already exists.
2025-09-10 17:50:02,976 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:50:02,976 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:50:30,124 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:50:30,141 | WARNING | File already exists.
2025-09-10 17:50:31,008 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:50:31,024 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:50:33,608 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Order ID": "ORD104"
                    },
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2394,
        "candidates_token_count": 41,
        "total_token_count": 2546
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:50:33,640 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ORD104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-10 17:50:33,641 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Order ID': 'ORD104'}, 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-09-10 17:50:36,791 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 17:50:36,808 | WARNING | File already exists.
2025-09-10 17:50:37,625 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:50:37,625 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 17:54:14,143 | INFO | Starting upload for file: policy details.pdf
2025-09-10 17:54:14,143 | INFO | File saved at: uploads\policy details.pdf
2025-09-10 17:54:14,143 | INFO | Extracting PDF...
2025-09-10 17:54:20,076 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:54:20,643 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:54:20,643 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-10 17:54:22,327 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-10 17:54:38,861 | INFO | Starting upload for file: policy details.pdf
2025-09-10 17:54:38,877 | WARNING | File already exists.
2025-09-10 17:54:39,743 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:54:39,761 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-10 17:54:42,043 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:54:42,345 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:54:42,345 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-10 17:54:43,543 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-10 17:54:45,328 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "what are the policies mentioned here?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 23,
        "total_token_count": 2479
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 17:54:45,345 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "what are the policies mentioned here?"
    }
  }
}

2025-09-10 17:54:45,345 | INFO | Dispatching function: get_policy_info with args: {'query': 'what are the policies mentioned here?'}
2025-09-10 17:54:46,410 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-10 17:54:53,859 | INFO | Starting upload for file: policy details.pdf
2025-09-10 17:54:53,859 | WARNING | File already exists.
2025-09-10 17:54:54,696 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 17:54:54,711 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-10 17:54:56,945 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 17:54:57,243 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 17:54:57,243 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-10 17:54:58,434 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-10 18:01:35,088 | INFO | Ensuring Qdrant collection exists...
2025-09-10 18:01:35,913 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 18:01:36,218 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 18:01:36,277 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-10 18:01:36,279 | INFO | Qdrant collection ready.
2025-09-10 18:02:06,093 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 18:02:22,638 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:02:22,651 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-09-10 18:02:22,653 | INFO | Processing Excel with multiple sheets...
2025-09-10 18:02:28,407 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.53s
2025-09-10 18:02:28,667 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.26s
2025-09-10 18:02:28,891 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.22s
2025-09-10 18:02:29,089 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.20s
2025-09-10 18:02:29,268 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.18s
2025-09-10 18:06:02,628 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:06:02,636 | WARNING | File already exists.
2025-09-10 18:06:03,493 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-09-10 18:06:03,509 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-10 18:06:18,226 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-10 18:06:18,236 | INFO | Creating collection 'documents' with dim=3072...
2025-09-10 18:06:18,654 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-10 18:06:22,003 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-10 18:06:24,307 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ORD104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 41,
        "total_token_count": 2580
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 18:06:24,347 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ORD104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-10 18:06:24,358 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ORD104'}}
2025-09-10 18:06:28,724 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:06:28,729 | WARNING | File already exists.
2025-09-10 18:06:29,618 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:06:29,653 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 18:07:11,740 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:07:11,745 | WARNING | File already exists.
2025-09-10 18:07:12,812 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:07:12,821 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 18:08:27,203 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:08:27,212 | WARNING | File already exists.
2025-09-10 18:08:28,066 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:08:28,089 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 18:08:41,040 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2023-08-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 70,
        "total_token_count": 4402
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 18:08:41,095 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2023-08-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-10 18:08:41,122 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002520C4AB510>], 'whereClause': {'Category': 'Electronics', 'Sale Date': '2023-08-04'}}
2025-09-10 18:08:44,982 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:08:44,987 | WARNING | File already exists.
2025-09-10 18:08:45,851 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:08:45,860 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 18:09:45,032 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:09:45,041 | WARNING | File already exists.
2025-09-10 18:09:45,898 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:09:45,909 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 18:10:02,397 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2023-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2393,
        "candidates_token_count": 63,
        "total_token_count": 4914
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 18:10:02,418 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2023-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-10 18:10:02,429 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002520BDE20D0>], 'whereClause': {'Category': 'Electronics', 'Sale Date': '2023-07-04'}}
2025-09-10 18:10:07,475 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:10:07,481 | WARNING | File already exists.
2025-09-10 18:10:10,173 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:10:10,182 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 18:11:23,711 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:11:23,715 | WARNING | File already exists.
2025-09-10 18:11:24,598 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:11:24,611 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 18:11:27,597 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2025-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Product Name"
                      }
                    ],
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 70,
        "total_token_count": 2794
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 18:11:27,625 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Product Name"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-10 18:11:27,643 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Category': 'Electronics', 'Sale Date': '2025-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002520C42CC50>], 'columns': ['Product Name']}
2025-09-10 18:11:30,988 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-10 18:11:30,993 | WARNING | File already exists.
2025-09-10 18:11:31,845 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-10 18:11:31,862 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-10 20:10:18,712 | INFO | 🔁 Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Product Name"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2401,
        "candidates_token_count": 64,
        "total_token_count": 2673
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-10 20:10:18,733 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Product Name"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-10 20:10:18,750 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002520C42CF10>], 'whereClause': {'Category': 'Electronics', 'Sale Date': '2025-07-04'}}
2025-09-11 13:53:20,416 | INFO | Ensuring Qdrant collection exists...
2025-09-11 13:53:21,434 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-11 13:53:21,777 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-11 13:53:21,841 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-11 13:53:21,851 | INFO | Qdrant collection ready.
2025-09-11 13:54:53,399 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 64,
        "total_token_count": 2688
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-11 13:54:53,434 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-11 13:54:53,452 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000024502DF01D0>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-11 13:58:53,431 | INFO | Ensuring Qdrant collection exists...
2025-09-11 13:58:54,585 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-11 13:58:55,085 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-11 13:58:55,135 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-11 13:58:55,135 | INFO | Qdrant collection ready.
2025-09-11 14:01:10,336 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Category": "Electric Appliances"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      }
                    ],
                    "columns": [
                      "Quantity"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2389,
        "candidates_token_count": 53,
        "total_token_count": 2732
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-11 14:01:10,354 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electric Appliances"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Quantity"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-11 14:01:10,387 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Category': 'Electric Appliances'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001B739C4BE10>], 'columns': ['Quantity']}
2025-09-11 14:07:42,673 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 58,
        "total_token_count": 2658
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-11 14:07:42,690 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-11 14:07:42,706 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001B73B4FA5D0>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-11 14:39:16,436 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 61,
        "total_token_count": 2677
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-11 14:39:16,457 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-11 14:39:16,476 | INFO | Dispatching function: get_order_details with args: {'columns': [], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001B73B508AD0>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-11 14:41:31,071 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 58,
        "total_token_count": 2627
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-11 14:41:31,071 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-11 14:41:31,089 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001B73B509A90>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-11 14:44:39,827 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 64,
        "total_token_count": 2652
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-11 14:44:39,842 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-11 14:44:39,856 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001B73B50B6D0>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-11 14:46:43,820 | INFO | Ensuring Qdrant collection exists...
2025-09-11 14:46:44,775 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-11 14:46:45,072 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-11 14:46:45,122 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-11 14:46:45,125 | INFO | Qdrant collection ready.
2025-09-11 14:49:38,326 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 58,
        "total_token_count": 2551
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-11 14:49:38,352 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-11 14:49:38,358 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001F38DAF5B90>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-11 14:49:38,458 | INFO | get selected column is called
2025-09-11 14:49:38,541 | INFO | Execute sql query is executed
2025-09-11 14:49:38,558 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-12 13:36:46,252 | INFO | Ensuring Qdrant collection exists...
2025-09-12 13:36:47,117 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-12 13:36:47,399 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-12 13:36:47,477 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-12 13:36:47,477 | INFO | Qdrant collection ready.
2025-09-12 13:38:09,459 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 58,
        "total_token_count": 2593
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-12 13:38:09,491 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-12 13:38:09,506 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000021CC0CDD490>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-12 13:38:09,522 | INFO | get selected column is called
2025-09-12 13:38:09,554 | INFO | Execute sql query is executed
2025-09-12 13:38:09,554 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-12 13:38:09,616 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-12 14:02:53,324 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 58,
        "total_token_count": 2657
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-12 14:02:53,356 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-12 14:02:53,356 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000021CC0D6E5D0>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-12 14:02:53,371 | INFO | get selected column is called
2025-09-12 14:02:53,387 | INFO | Execute sql query is executed
2025-09-12 14:02:53,387 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-12 14:02:53,402 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-12 14:03:44,078 | INFO | Ensuring Qdrant collection exists...
2025-09-12 14:03:45,095 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-12 14:03:45,579 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-12 14:03:45,643 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-12 14:03:45,649 | INFO | Qdrant collection ready.
2025-09-12 14:11:24,144 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 61,
        "total_token_count": 2581
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-12 14:11:24,176 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-12 14:11:24,200 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '2025-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000016255A2EE90>], 'columns': []}
2025-09-12 14:11:24,210 | INFO | get selected column is called
2025-09-12 14:11:24,210 | INFO | Execute sql query is executed
2025-09-12 14:11:24,210 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-12 14:11:24,244 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-12 14:11:24,244 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 11:56:31,825 | INFO | Ensuring Qdrant collection exists...
2025-09-15 11:56:32,721 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 11:56:33,049 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 11:56:33,176 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 11:56:33,176 | INFO | Qdrant collection ready.
2025-09-15 12:05:34,514 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2387,
        "candidates_token_count": 48,
        "total_token_count": 2561
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 12:05:34,547 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 12:05:34,573 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000021CF3E1B8D0>], 'whereClause': {'Country': 'USA'}}
2025-09-15 12:05:34,581 | INFO | get selected column is called
2025-09-15 12:05:34,607 | INFO | Execute sql query is executed
2025-09-15 12:05:34,615 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-09-15 12:05:34,672 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 5}]
2025-09-15 12:05:34,672 | INFO | it is the raw result :[{'COUNT("Order ID")': 5}]
2025-09-15 15:28:37,671 | INFO | Ensuring Qdrant collection exists...
2025-09-15 15:28:38,522 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 15:28:38,824 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 15:28:38,868 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 15:28:38,872 | INFO | Qdrant collection ready.
2025-09-15 15:29:53,940 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 58,
        "total_token_count": 2571
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 15:29:53,957 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 15:29:53,973 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E70793A950>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-15 15:29:53,973 | INFO | get selected column is called
2025-09-15 15:29:53,990 | INFO | Execute sql query is executed
2025-09-15 15:29:53,990 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-15 15:29:53,990 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 15:29:54,006 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 15:32:59,144 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-15 15:32:59,158 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-09-15 15:32:59,158 | INFO | Processing Excel with multiple sheets...
2025-09-15 15:33:00,974 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.18s
2025-09-15 15:33:01,076 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.10s
2025-09-15 15:33:01,160 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.07s
2025-09-15 15:33:01,238 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.08s
2025-09-15 15:33:01,313 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.07s
2025-09-15 15:33:09,312 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 58,
        "total_token_count": 2578
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 15:33:09,312 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 15:33:09,324 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E70C8BA790>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-15 15:33:09,324 | INFO | get selected column is called
2025-09-15 15:33:09,333 | INFO | Execute sql query is executed
2025-09-15 15:33:09,335 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-15 15:33:09,343 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 3}]
2025-09-15 15:33:09,346 | INFO | it is the raw result :[{'COUNT("Order ID")': 3}]
2025-09-15 15:33:13,975 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-15 15:33:13,991 | WARNING | File already exists.
2025-09-15 15:33:14,876 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-15 15:33:14,900 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-15 17:53:45,554 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-15 17:53:45,561 | WARNING | File already exists.
2025-09-15 17:53:46,495 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-15 17:53:46,501 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-15 17:53:48,911 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2024-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2394,
        "candidates_token_count": 58,
        "total_token_count": 2549
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 17:53:48,917 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2024-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 17:53:48,928 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E70C8A4CD0>], 'whereClause': {'Sale Date': '2024-07-04'}}
2025-09-15 17:53:48,928 | INFO | get selected column is called
2025-09-15 17:53:48,938 | INFO | Execute sql query is executed
2025-09-15 17:53:48,942 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2024-07-04'
2025-09-15 17:53:48,949 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 17:53:48,949 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 17:54:10,017 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-15 17:54:10,027 | WARNING | File already exists.
2025-09-15 17:54:10,848 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-15 17:54:10,848 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-15 18:08:34,840 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-15 18:08:34,842 | WARNING | File already exists.
2025-09-15 18:08:35,821 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-15 18:08:35,826 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-15 18:08:38,894 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 2399,
        "candidates_token_count": 64,
        "total_token_count": 2601
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 18:08:38,906 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 18:08:38,917 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '2025-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E70CBB0390>], 'columns': ['Order ID']}
2025-09-15 18:08:38,920 | INFO | get selected column is called
2025-09-15 18:08:38,925 | INFO | Execute sql query is executed
2025-09-15 18:08:38,929 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-15 18:08:38,938 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 3}]
2025-09-15 18:08:38,939 | INFO | it is the raw result :[{'COUNT("Order ID")': 3}]
2025-09-15 18:08:43,116 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-15 18:08:43,121 | WARNING | File already exists.
2025-09-15 18:08:43,931 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-15 18:08:43,949 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-15 20:00:15,394 | INFO | Ensuring Qdrant collection exists...
2025-09-15 20:00:16,178 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 20:00:16,464 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 20:00:16,520 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 20:00:16,522 | INFO | Qdrant collection ready.
2025-09-15 20:01:33,979 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 3858,
        "candidates_token_count": 61,
        "total_token_count": 4033
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:01:34,009 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:01:34,013 | INFO | Dispatching function: get_order_details with args: {'columns': [], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000014619CCB610>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-15 20:01:34,013 | INFO | get selected column is called
2025-09-15 20:01:34,029 | INFO | Execute sql query is executed
2025-09-15 20:01:34,029 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04'
2025-09-15 20:01:34,029 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 3}]
2025-09-15 20:01:34,046 | INFO | it is the raw result :[{'COUNT("Order ID")': 3}]
2025-09-15 20:03:34,763 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "2022-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 3853,
        "candidates_token_count": 61,
        "total_token_count": 4059
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:03:34,780 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2022-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:03:34,799 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '2022-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000014619FFEB10>], 'columns': []}
2025-09-15 20:03:34,801 | INFO | get selected column is called
2025-09-15 20:03:34,801 | INFO | Execute sql query is executed
2025-09-15 20:03:34,801 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2022-07-04'
2025-09-15 20:03:34,813 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 20:03:34,813 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 20:07:20,926 | INFO | Ensuring Qdrant collection exists...
2025-09-15 20:07:21,878 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 20:07:22,234 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 20:07:22,309 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 20:07:22,310 | INFO | Qdrant collection ready.
2025-09-15 20:09:47,816 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "2024-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 3871,
        "candidates_token_count": 61,
        "total_token_count": 4004
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:09:47,833 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2024-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:09:47,833 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '2024-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001F7CC9B4950>], 'columns': []}
2025-09-15 20:09:47,852 | INFO | get selected column is called
2025-09-15 20:09:47,852 | INFO | Execute sql query is executed
2025-09-15 20:09:47,852 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2024-07-04'
2025-09-15 20:09:47,869 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 20:09:47,869 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 20:11:35,353 | INFO | Ensuring Qdrant collection exists...
2025-09-15 20:11:36,143 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 20:11:36,417 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 20:11:36,459 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 20:11:36,459 | INFO | Qdrant collection ready.
2025-09-15 20:12:03,418 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "%-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4014,
        "candidates_token_count": 54,
        "total_token_count": 4314
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:12:03,434 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:12:03,451 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002302808DD90>], 'whereClause': {'Sale Date': '%-07-04'}}
2025-09-15 20:12:03,451 | INFO | get selected column is called
2025-09-15 20:12:03,462 | INFO | Execute sql query is executed
2025-09-15 20:12:03,462 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '%-07-04'
2025-09-15 20:12:03,468 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 20:12:03,468 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 20:22:20,873 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ord104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 41,
        "total_token_count": 4209
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:22:20,890 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ord104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-15 20:22:20,890 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ord104'}}
2025-09-15 20:22:20,890 | INFO | get selected column is called
2025-09-15 20:22:20,908 | INFO | Execute sql query is executed
2025-09-15 20:22:20,908 | INFO | This is the input of execute_sql_query:SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104'
2025-09-15 20:22:20,922 | INFO | this is the raw result after execution:[]
2025-09-15 20:22:20,925 | INFO | it is the raw result :[]
2025-09-15 20:23:23,680 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Order ID": "104"
                    },
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4015,
        "candidates_token_count": 40,
        "total_token_count": 4144
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:23:23,694 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-15 20:23:23,709 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Order ID': '104'}, 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-09-15 20:23:23,709 | INFO | get selected column is called
2025-09-15 20:23:23,709 | INFO | Execute sql query is executed
2025-09-15 20:23:23,709 | INFO | This is the input of execute_sql_query:SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = '104'
2025-09-15 20:23:23,729 | INFO | this is the raw result after execution:[]
2025-09-15 20:23:23,729 | INFO | it is the raw result :[]
2025-09-15 20:30:17,842 | INFO | Ensuring Qdrant collection exists...
2025-09-15 20:30:18,659 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 20:30:18,941 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 20:30:18,966 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 20:30:18,966 | INFO | Qdrant collection ready.
2025-09-15 20:32:02,310 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "%-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 54,
        "total_token_count": 4257
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:32:02,327 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:32:02,327 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000253C9156D10>], 'whereClause': {'Sale Date': '%-07-04'}}
2025-09-15 20:32:02,344 | INFO | get selected column is called
2025-09-15 20:32:02,344 | INFO | Execute sql query is executed
2025-09-15 20:32:02,344 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '%-07-04'
2025-09-15 20:32:02,344 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 20:32:02,363 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 20:33:40,631 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "%-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 54,
        "total_token_count": 4307
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:33:40,645 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:33:40,662 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000253C91D5710>], 'whereClause': {'Sale Date': '%-07-04'}}
2025-09-15 20:33:40,662 | INFO | get selected column is called
2025-09-15 20:33:40,662 | INFO | Execute sql query is executed
2025-09-15 20:33:40,662 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '%-07-04'
2025-09-15 20:33:40,678 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 20:33:40,678 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 20:38:26,913 | INFO | Ensuring Qdrant collection exists...
2025-09-15 20:38:27,729 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 20:38:28,029 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 20:38:28,074 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 20:38:28,074 | INFO | Qdrant collection ready.
2025-09-15 20:38:57,281 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "%-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4045,
        "candidates_token_count": 60,
        "total_token_count": 4241
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:38:57,298 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:38:57,313 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '%-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000212287B5BD0>], 'columns': ['Order ID']}
2025-09-15 20:38:57,313 | INFO | get selected column is called
2025-09-15 20:38:57,330 | INFO | Execute sql query is executed
2025-09-15 20:38:57,330 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '%-07-04'
2025-09-15 20:38:57,330 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 20:38:57,347 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 20:42:16,379 | INFO | Ensuring Qdrant collection exists...
2025-09-15 20:42:17,198 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 20:42:17,485 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 20:42:17,543 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 20:42:17,543 | INFO | Qdrant collection ready.
2025-09-15 20:42:46,900 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "%-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4443,
        "candidates_token_count": 54,
        "total_token_count": 4629
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 20:42:46,917 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 20:42:46,940 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000221AC30BA50>], 'whereClause': {'Sale Date': '%-07-04'}}
2025-09-15 20:42:46,940 | INFO | get selected column is called
2025-09-15 20:42:46,940 | INFO | Execute sql query is executed
2025-09-15 20:42:46,940 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '%-07-04'
2025-09-15 20:42:46,954 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 20:42:46,956 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 22:04:22,919 | INFO | Ensuring Qdrant collection exists...
2025-09-15 22:04:23,902 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 22:04:24,258 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 22:04:24,298 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 22:04:24,302 | INFO | Qdrant collection ready.
2025-09-15 22:05:13,536 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "%-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4443,
        "candidates_token_count": 57,
        "total_token_count": 4638
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 22:05:13,553 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 22:05:13,570 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '%-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001C131703E50>], 'columns': []}
2025-09-15 22:05:13,590 | INFO | get selected column is called
2025-09-15 22:05:13,590 | INFO | Execute sql query is executed
2025-09-15 22:05:13,604 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '%-07-04'
2025-09-15 22:05:13,620 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-15 22:05:13,620 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-15 22:17:59,409 | INFO | Ensuring Qdrant collection exists...
2025-09-15 22:18:00,238 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-15 22:18:00,531 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-15 22:18:00,568 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-15 22:18:00,575 | INFO | Qdrant collection ready.
2025-09-15 22:18:57,228 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "%-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4014,
        "candidates_token_count": 60,
        "total_token_count": 4202
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-15 22:18:57,245 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-15 22:18:57,275 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '%-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001EFFE548650>], 'columns': ['Order ID']}
2025-09-15 22:18:57,284 | INFO | get selected column is called
2025-09-15 22:18:57,292 | INFO | Execute sql query is executed
2025-09-15 22:18:57,292 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" LIKE '%-07-04'
2025-09-15 22:18:57,327 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 3}]
2025-09-15 22:18:57,327 | INFO | it is the raw result :[{'COUNT("Order ID")': 3}]
2025-09-16 16:34:50,848 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "%-07-09"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4014,
        "candidates_token_count": 54,
        "total_token_count": 4306
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 16:34:50,981 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-09"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-16 16:34:50,997 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001EFFEA61750>], 'whereClause': {'Sale Date': '%-07-09'}}
2025-09-16 16:34:51,015 | INFO | get selected column is called
2025-09-16 16:34:51,056 | INFO | Execute sql query is executed
2025-09-16 16:34:51,056 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" LIKE '%-07-09'
2025-09-16 16:34:51,098 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 3}]
2025-09-16 16:34:51,113 | INFO | it is the raw result :[{'COUNT("Order ID")': 3}]
2025-09-16 16:36:14,300 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Order ID": "ord104"
                    },
                    "table_name": "Order_Details",
                    "columns": [
                      "Shipping Status"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 41,
        "total_token_count": 4175,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 16:36:14,318 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ord104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-16 16:36:14,333 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Order ID': 'ord104'}, 'table_name': 'Order_Details', 'columns': ['Shipping Status']}
2025-09-16 16:36:14,333 | INFO | get selected column is called
2025-09-16 16:36:14,365 | INFO | Execute sql query is executed
2025-09-16 16:36:14,365 | INFO | This is the input of execute_sql_query:SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104'
2025-09-16 16:36:14,365 | INFO | this is the raw result after execution:[]
2025-09-16 16:36:14,365 | INFO | it is the raw result :[]
2025-09-16 16:40:11,368 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4009,
        "candidates_token_count": 48,
        "total_token_count": 4299,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 16:40:11,384 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-16 16:40:11,384 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001EFFEA69AD0>], 'whereClause': {'Country': 'USA'}}
2025-09-16 16:40:11,401 | INFO | get selected column is called
2025-09-16 16:40:11,401 | INFO | Execute sql query is executed
2025-09-16 16:40:11,401 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA'
2025-09-16 16:40:11,418 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 5}]
2025-09-16 16:40:11,418 | INFO | it is the raw result :[{'COUNT("Order ID")': 5}]
2025-09-16 16:49:49,305 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "priya sharma",
                      "Sale Date": "%-07-04"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 53,
        "total_token_count": 4308
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 16:49:49,323 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-16 16:49:49,339 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'priya sharma', 'Sale Date': '%-07-04'}, 'table_name': 'Sales_Details', 'columns': ['Product Name']}
2025-09-16 16:49:49,339 | INFO | get selected column is called
2025-09-16 16:49:49,358 | INFO | Execute sql query is executed
2025-09-16 16:49:49,358 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' AND "Sale Date" LIKE '%-07-04'
2025-09-16 16:49:49,358 | INFO | this is the raw result after execution:[]
2025-09-16 16:49:49,372 | INFO | it is the raw result :[]
2025-09-16 16:51:48,923 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Product Name"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Customer Name": "Priya Sharma",
                      "Sale Date": "%-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4016,
        "candidates_token_count": 52,
        "total_token_count": 4262
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 16:51:48,939 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-16 16:51:48,941 | INFO | Dispatching function: get_order_details with args: {'columns': ['Product Name'], 'table_name': 'Sales_Details', 'whereClause': {'Customer Name': 'Priya Sharma', 'Sale Date': '%-07-04'}}
2025-09-16 16:51:48,941 | INFO | get selected column is called
2025-09-16 16:51:48,941 | INFO | Execute sql query is executed
2025-09-16 16:51:48,941 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' AND "Sale Date" LIKE '%-07-04'
2025-09-16 16:51:48,957 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse'}]
2025-09-16 16:51:48,957 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse'}]
2025-09-16 17:36:28,505 | INFO | Ensuring Qdrant collection exists...
2025-09-16 17:36:29,327 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-16 17:36:29,642 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:36:29,706 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-16 17:36:29,706 | INFO | Qdrant collection ready.
2025-09-16 17:37:26,461 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Product Name"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Customer Name": "priya sharma",
                      "Sale Date": "%-07-04%"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 54,
        "total_token_count": 4234
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:37:26,477 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04%"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-16 17:37:26,494 | INFO | Dispatching function: get_order_details with args: {'columns': ['Product Name'], 'table_name': 'Sales_Details', 'whereClause': {'Customer Name': 'priya sharma', 'Sale Date': '%-07-04%'}}
2025-09-16 17:37:26,494 | INFO | get selected column is called
2025-09-16 17:37:26,511 | INFO | Execute sql query is executed
2025-09-16 17:37:26,511 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" COLLATE NOCASE WHERE "Customer Name" = 'priya sharma' AND "Sale Date" LIKE '%-07-04%'
2025-09-16 17:37:26,527 | INFO | it is the raw result :[]
2025-09-16 17:40:05,681 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Product Name"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Customer Name": "Priya Sharma",
                      "Sale Date": "%-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 52,
        "total_token_count": 4218,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:40:05,697 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-16 17:40:05,697 | INFO | Dispatching function: get_order_details with args: {'columns': ['Product Name'], 'table_name': 'Sales_Details', 'whereClause': {'Customer Name': 'Priya Sharma', 'Sale Date': '%-07-04'}}
2025-09-16 17:40:05,697 | INFO | get selected column is called
2025-09-16 17:40:05,707 | INFO | Execute sql query is executed
2025-09-16 17:40:05,707 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" COLLATE NOCASE WHERE "Customer Name" = 'Priya Sharma' AND "Sale Date" LIKE '%-07-04'
2025-09-16 17:40:05,713 | INFO | it is the raw result :[]
2025-09-16 17:40:46,941 | INFO | Ensuring Qdrant collection exists...
2025-09-16 17:40:47,748 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-16 17:40:48,028 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:40:48,067 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-16 17:40:48,069 | INFO | Qdrant collection ready.
2025-09-16 17:41:20,563 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "Priya Sharma",
                      "Sale Date": "%-07-04"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 52,
        "total_token_count": 4206
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:41:20,580 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-16 17:41:20,580 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'Priya Sharma', 'Sale Date': '%-07-04'}, 'table_name': 'Sales_Details', 'columns': ['Product Name']}
2025-09-16 17:41:20,580 | INFO | get selected column is called
2025-09-16 17:41:20,596 | INFO | Execute sql query is executed
2025-09-16 17:41:20,596 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' AND "Sale Date" LIKE '%-07-04' COLLATE NOCASE
2025-09-16 17:41:20,615 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse'}]
2025-09-16 17:41:20,615 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse'}]
2025-09-16 17:41:48,413 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ord104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 41,
        "total_token_count": 4182,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:41:48,430 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ord104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-16 17:41:48,430 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ord104'}}
2025-09-16 17:41:48,430 | INFO | get selected column is called
2025-09-16 17:41:48,446 | INFO | Execute sql query is executed
2025-09-16 17:41:48,446 | INFO | This is the input of execute_sql_query:SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-09-16 17:41:48,463 | INFO | this is the raw result after execution:[{'Shipping Status': 'Delivered'}]
2025-09-16 17:41:48,465 | INFO | it is the raw result :[{'Shipping Status': 'Delivered'}]
2025-09-16 17:42:30,497 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "columns": [
                      "Order ID",
                      "Customer Name",
                      "Product Name",
                      "Category",
                      "Quantity",
                      "Unit Price",
                      "Total Price",
                      "Sale Date",
                      "Payment Method",
                      "Country"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4010,
        "candidates_token_count": 60,
        "total_token_count": 4176,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:42:30,497 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Customer Name"
        }
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Category"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Unit Price"
        }
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
        values {
          string_value: "Payment Method"
        }
        values {
          string_value: "Country"
        }
      }
    }
  }
}

2025-09-16 17:42:30,514 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'columns': ['Order ID', 'Customer Name', 'Product Name', 'Category', 'Quantity', 'Unit Price', 'Total Price', 'Sale Date', 'Payment Method', 'Country']}
2025-09-16 17:42:30,514 | INFO | get selected column is called
2025-09-16 17:42:30,531 | INFO | Execute sql query is executed
2025-09-16 17:42:30,535 | INFO | This is the input of execute_sql_query:SELECT "Order ID", "Customer Name", "Product Name", "Category", "Quantity", "Unit Price", "Total Price", "Sale Date", "Payment Method", "Country" FROM "Sales_Details"
2025-09-16 17:42:30,538 | INFO | this is the raw result after execution:[{'Order ID': 'ORD100', 'Customer Name': 'Priya Sharma', 'Product Name': 'Wireless Mouse', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 500, 'Total Price': 1000, 'Sale Date': '2025-07-04', 'Payment Method': 'Debit Card', 'Country': 'USA'}, {'Order ID': 'ORD101', 'Customer Name': 'John Miller', 'Product Name': 'Sports Shoes', 'Category': 'Footwear', 'Quantity': 2, 'Unit Price': 2200, 'Total Price': 4400, 'Sale Date': '2025-07-04', 'Payment Method': 'Credit Card', 'Country': 'Australia'}, {'Order ID': 'ORD102', 'Customer Name': 'Aditi Rao', 'Product Name': 'LED Monitor', 'Category': 'Electronics', 'Quantity': 4, 'Unit Price': 8500, 'Total Price': 34000, 'Sale Date': '2025-07-03', 'Payment Method': 'PayPal', 'Country': 'USA'}, {'Order ID': 'ORD103', 'Customer Name': 'Ravi Kumar', 'Product Name': 'Denim Jacket', 'Category': 'Clothing', 'Quantity': 4, 'Unit Price': 1500, 'Total Price': 6000, 'Sale Date': '2025-07-06', 'Payment Method': 'UPI', 'Country': 'India'}, {'Order ID': 'ORD104', 'Customer Name': 'Sarah Lee', 'Product Name': 'Sunglasses', 'Category': 'Accessories', 'Quantity': 4, 'Unit Price': 800, 'Total Price': 3200, 'Sale Date': '2025-07-04', 'Payment Method': 'Credit Card', 'Country': 'Australia'}, {'Order ID': 'ORD105', 'Customer Name': 'Aarav Mehta', 'Product Name': 'Smartphone', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 25000, 'Total Price': 50000, 'Sale Date': '2025-07-03', 'Payment Method': 'PayPal', 'Country': 'USA'}, {'Order ID': 'ORD106', 'Customer Name': 'Emily Davis', 'Product Name': 'Yoga Mat', 'Category': 'Fitness', 'Quantity': 2, 'Unit Price': 900, 'Total Price': 1800, 'Sale Date': '2025-07-11', 'Payment Method': 'Debit Card', 'Country': 'Australia'}, {'Order ID': 'ORD107', 'Customer Name': 'Mohit Verma', 'Product Name': 'Bluetooth Speaker', 'Category': 'Electronics', 'Quantity': 1, 'Unit Price': 1800, 'Total Price': 1800, 'Sale Date': '2025-07-05', 'Payment Method': 'UPI', 'Country': 'Australia'}, {'Order ID': 'ORD108', 'Customer Name': 'Liam Brown', 'Product Name': 'Backpack', 'Category': 'Accessories', 'Quantity': 3, 'Unit Price': 1200, 'Total Price': 3600, 'Sale Date': '2025-07-09', 'Payment Method': 'Net Banking', 'Country': 'UK'}, {'Order ID': 'ORD109', 'Customer Name': 'Sneha Patil', 'Product Name': 'Casual Shirt', 'Category': 'Clothing', 'Quantity': 4, 'Unit Price': 1000, 'Total Price': 4000, 'Sale Date': '2025-07-10', 'Payment Method': 'Net Banking', 'Country': 'Australia'}, {'Order ID': 'ORD110', 'Customer Name': 'Nikhil Joshi', 'Product Name': 'Headphones', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 1500, 'Total Price': 3000, 'Sale Date': '2025-07-09', 'Payment Method': 'Credit Card', 'Country': 'USA'}, {'Order ID': 'ORD111', 'Customer Name': 'Olivia Smith', 'Product Name': 'Wrist Watch', 'Category': 'Accessories', 'Quantity': 5, 'Unit Price': 3000, 'Total Price': 15000, 'Sale Date': '2025-07-08', 'Payment Method': 'Credit Card', 'Country': 'Canada'}, {'Order ID': 'ORD112', 'Customer Name': 'Karan Singh', 'Product Name': 'Trekking Shoes', 'Category': 'Footwear', 'Quantity': 5, 'Unit Price': 3500, 'Total Price': 17500, 'Sale Date': '2025-07-01', 'Payment Method': 'UPI', 'Country': 'Canada'}, {'Order ID': 'ORD113', 'Customer Name': 'Zara Khan', 'Product Name': 'Tablet', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 15000, 'Total Price': 30000, 'Sale Date': '2025-07-06', 'Payment Method': 'Debit Card', 'Country': 'UK'}, {'Order ID': 'ORD114', 'Customer Name': 'Ethan Wilson', 'Product Name': 'Leather Wallet', 'Category': 'Accessories', 'Quantity': 3, 'Unit Price': 700, 'Total Price': 2100, 'Sale Date': '2025-07-11', 'Payment Method': 'UPI', 'Country': 'India'}, {'Order ID': 'ORD115', 'Customer Name': 'Meera Iyer', 'Product Name': 'Winter Coat', 'Category': 'Clothing', 'Quantity': 3, 'Unit Price': 4000, 'Total Price': 12000, 'Sale Date': '2025-07-07', 'Payment Method': 'Credit Card', 'Country': 'UK'}, {'Order ID': 'ORD116', 'Customer Name': 'Noah Johnson', 'Product Name': 'Gaming Keyboard', 'Category': 'Electronics', 'Quantity': 4, 'Unit Price': 3500, 'Total Price': 14000, 'Sale Date': '2025-07-06', 'Payment Method': 'Debit Card', 'Country': 'USA'}, {'Order ID': 'ORD117', 'Customer Name': 'Ananya Gupta', 'Product Name': 'Fitness Band', 'Category': 'Fitness', 'Quantity': 2, 'Unit Price': 2500, 'Total Price': 5000, 'Sale Date': '2025-07-02', 'Payment Method': 'PayPal', 'Country': 'Australia'}, {'Order ID': 'ORD118', 'Customer Name': 'James White', 'Product Name': 'Formal Trousers', 'Category': 'Clothing', 'Quantity': 1, 'Unit Price': 2000, 'Total Price': 2000, 'Sale Date': '2025-07-09', 'Payment Method': 'Credit Card', 'Country': 'India'}, {'Order ID': 'ORD119', 'Customer Name': 'Tara Nair', 'Product Name': 'Power Bank', 'Category': 'Electronics', 'Quantity': 3, 'Unit Price': 1200, 'Total Price': 3600, 'Sale Date': '2025-07-02', 'Payment Method': 'Credit Card', 'Country': 'India'}]
2025-09-16 17:42:30,546 | INFO | it is the raw result :[{'Order ID': 'ORD100', 'Customer Name': 'Priya Sharma', 'Product Name': 'Wireless Mouse', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 500, 'Total Price': 1000, 'Sale Date': '2025-07-04', 'Payment Method': 'Debit Card', 'Country': 'USA'}, {'Order ID': 'ORD101', 'Customer Name': 'John Miller', 'Product Name': 'Sports Shoes', 'Category': 'Footwear', 'Quantity': 2, 'Unit Price': 2200, 'Total Price': 4400, 'Sale Date': '2025-07-04', 'Payment Method': 'Credit Card', 'Country': 'Australia'}, {'Order ID': 'ORD102', 'Customer Name': 'Aditi Rao', 'Product Name': 'LED Monitor', 'Category': 'Electronics', 'Quantity': 4, 'Unit Price': 8500, 'Total Price': 34000, 'Sale Date': '2025-07-03', 'Payment Method': 'PayPal', 'Country': 'USA'}, {'Order ID': 'ORD103', 'Customer Name': 'Ravi Kumar', 'Product Name': 'Denim Jacket', 'Category': 'Clothing', 'Quantity': 4, 'Unit Price': 1500, 'Total Price': 6000, 'Sale Date': '2025-07-06', 'Payment Method': 'UPI', 'Country': 'India'}, {'Order ID': 'ORD104', 'Customer Name': 'Sarah Lee', 'Product Name': 'Sunglasses', 'Category': 'Accessories', 'Quantity': 4, 'Unit Price': 800, 'Total Price': 3200, 'Sale Date': '2025-07-04', 'Payment Method': 'Credit Card', 'Country': 'Australia'}, {'Order ID': 'ORD105', 'Customer Name': 'Aarav Mehta', 'Product Name': 'Smartphone', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 25000, 'Total Price': 50000, 'Sale Date': '2025-07-03', 'Payment Method': 'PayPal', 'Country': 'USA'}, {'Order ID': 'ORD106', 'Customer Name': 'Emily Davis', 'Product Name': 'Yoga Mat', 'Category': 'Fitness', 'Quantity': 2, 'Unit Price': 900, 'Total Price': 1800, 'Sale Date': '2025-07-11', 'Payment Method': 'Debit Card', 'Country': 'Australia'}, {'Order ID': 'ORD107', 'Customer Name': 'Mohit Verma', 'Product Name': 'Bluetooth Speaker', 'Category': 'Electronics', 'Quantity': 1, 'Unit Price': 1800, 'Total Price': 1800, 'Sale Date': '2025-07-05', 'Payment Method': 'UPI', 'Country': 'Australia'}, {'Order ID': 'ORD108', 'Customer Name': 'Liam Brown', 'Product Name': 'Backpack', 'Category': 'Accessories', 'Quantity': 3, 'Unit Price': 1200, 'Total Price': 3600, 'Sale Date': '2025-07-09', 'Payment Method': 'Net Banking', 'Country': 'UK'}, {'Order ID': 'ORD109', 'Customer Name': 'Sneha Patil', 'Product Name': 'Casual Shirt', 'Category': 'Clothing', 'Quantity': 4, 'Unit Price': 1000, 'Total Price': 4000, 'Sale Date': '2025-07-10', 'Payment Method': 'Net Banking', 'Country': 'Australia'}, {'Order ID': 'ORD110', 'Customer Name': 'Nikhil Joshi', 'Product Name': 'Headphones', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 1500, 'Total Price': 3000, 'Sale Date': '2025-07-09', 'Payment Method': 'Credit Card', 'Country': 'USA'}, {'Order ID': 'ORD111', 'Customer Name': 'Olivia Smith', 'Product Name': 'Wrist Watch', 'Category': 'Accessories', 'Quantity': 5, 'Unit Price': 3000, 'Total Price': 15000, 'Sale Date': '2025-07-08', 'Payment Method': 'Credit Card', 'Country': 'Canada'}, {'Order ID': 'ORD112', 'Customer Name': 'Karan Singh', 'Product Name': 'Trekking Shoes', 'Category': 'Footwear', 'Quantity': 5, 'Unit Price': 3500, 'Total Price': 17500, 'Sale Date': '2025-07-01', 'Payment Method': 'UPI', 'Country': 'Canada'}, {'Order ID': 'ORD113', 'Customer Name': 'Zara Khan', 'Product Name': 'Tablet', 'Category': 'Electronics', 'Quantity': 2, 'Unit Price': 15000, 'Total Price': 30000, 'Sale Date': '2025-07-06', 'Payment Method': 'Debit Card', 'Country': 'UK'}, {'Order ID': 'ORD114', 'Customer Name': 'Ethan Wilson', 'Product Name': 'Leather Wallet', 'Category': 'Accessories', 'Quantity': 3, 'Unit Price': 700, 'Total Price': 2100, 'Sale Date': '2025-07-11', 'Payment Method': 'UPI', 'Country': 'India'}, {'Order ID': 'ORD115', 'Customer Name': 'Meera Iyer', 'Product Name': 'Winter Coat', 'Category': 'Clothing', 'Quantity': 3, 'Unit Price': 4000, 'Total Price': 12000, 'Sale Date': '2025-07-07', 'Payment Method': 'Credit Card', 'Country': 'UK'}, {'Order ID': 'ORD116', 'Customer Name': 'Noah Johnson', 'Product Name': 'Gaming Keyboard', 'Category': 'Electronics', 'Quantity': 4, 'Unit Price': 3500, 'Total Price': 14000, 'Sale Date': '2025-07-06', 'Payment Method': 'Debit Card', 'Country': 'USA'}, {'Order ID': 'ORD117', 'Customer Name': 'Ananya Gupta', 'Product Name': 'Fitness Band', 'Category': 'Fitness', 'Quantity': 2, 'Unit Price': 2500, 'Total Price': 5000, 'Sale Date': '2025-07-02', 'Payment Method': 'PayPal', 'Country': 'Australia'}, {'Order ID': 'ORD118', 'Customer Name': 'James White', 'Product Name': 'Formal Trousers', 'Category': 'Clothing', 'Quantity': 1, 'Unit Price': 2000, 'Total Price': 2000, 'Sale Date': '2025-07-09', 'Payment Method': 'Credit Card', 'Country': 'India'}, {'Order ID': 'ORD119', 'Customer Name': 'Tara Nair', 'Product Name': 'Power Bank', 'Category': 'Electronics', 'Quantity': 3, 'Unit Price': 1200, 'Total Price': 3600, 'Sale Date': '2025-07-02', 'Payment Method': 'Credit Card', 'Country': 'India'}]
2025-09-16 17:43:12,768 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Category": "Electronics"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Product Name"
                      }
                    ],
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4009,
        "candidates_token_count": 54,
        "total_token_count": 4253,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:43:12,784 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Product Name"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-16 17:43:12,799 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Category': 'Electronics'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000024620AF9B50>], 'columns': ['Product Name']}
2025-09-16 17:43:12,799 | INFO | get selected column is called
2025-09-16 17:43:12,814 | INFO | Execute sql query is executed
2025-09-16 17:43:12,818 | INFO | This is the input of execute_sql_query:SELECT COUNT("Product Name") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE
2025-09-16 17:43:12,824 | INFO | this is the raw result after execution:[{'COUNT("Product Name")': 8}]
2025-09-16 17:43:12,824 | INFO | it is the raw result :[{'COUNT("Product Name")': 8}]
2025-09-16 17:43:34,797 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 22,
        "total_token_count": 4120,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:43:34,797 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-16 17:43:34,815 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-16 17:43:36,801 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-16 17:43:39,030 | INFO | it is the raw result :The provided document content does not contain any information about limitations to upload a file.
2025-09-16 17:43:51,918 | INFO | Starting upload for file: policy details.pdf
2025-09-16 17:43:51,930 | INFO | File saved at: uploads\policy details.pdf
2025-09-16 17:43:51,932 | INFO | Extracting PDF...
2025-09-16 17:43:56,664 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-16 17:43:56,964 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:43:56,964 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-16 17:43:58,415 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-16 17:44:06,148 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 25,
        "total_token_count": 4110,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:44:06,148 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-09-16 17:44:06,148 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-09-16 17:44:07,964 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-16 17:44:13,481 | INFO | it is the raw result :Yes, there are limitations.
The maximum upload size is 15 MB.
Accepted formats are PDF, DOCX, XLSX, and CSV. Unsupported formats include image files (JPG, PNG) and executable files (EXE).
2025-09-16 17:44:18,952 | INFO | Starting upload for file: policy details.pdf
2025-09-16 17:44:18,952 | WARNING | File already exists.
2025-09-16 17:44:19,764 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 17:44:19,781 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-16 17:44:21,891 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-16 17:44:22,159 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:44:22,180 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-16 17:44:23,230 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-16 17:45:42,246 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:45:42,262 | ERROR | Reset error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 54, in reset_data
    os.remove(db_path)
PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'data.db'
2025-09-16 17:45:44,450 | INFO | Starting upload for file: policy details.pdf
2025-09-16 17:45:44,466 | WARNING | File already exists.
2025-09-16 17:45:44,733 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-09-16 17:45:44,733 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-16 17:45:46,740 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-16 17:45:46,743 | INFO | Creating collection 'documents' with dim=3072...
2025-09-16 17:45:47,107 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:45:48,175 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-16 17:45:53,568 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 25,
        "total_token_count": 4108,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:45:53,582 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-09-16 17:45:53,582 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-09-16 17:45:55,465 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-16 17:46:04,150 | INFO | it is the raw result :Yes, there are limitations.
*   The maximum upload size is 15 MB.
*   Only PDF, DOCX, XLSX, and CSV file formats are accepted. Image files (JPG, PNG) and executable files (EXE) are not supported.
2025-09-16 17:46:16,784 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:46:16,800 | ERROR | Reset error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 54, in reset_data
    os.remove(db_path)
PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'data.db'
2025-09-16 17:46:22,932 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "limitations to upload a file"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 22,
        "total_token_count": 4108,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:46:22,949 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "limitations to upload a file"
    }
  }
}

2025-09-16 17:46:22,951 | INFO | Dispatching function: get_policy_info with args: {'query': 'limitations to upload a file'}
2025-09-16 17:46:24,752 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 404 Not Found"
2025-09-16 17:46:24,752 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 89, in handle_query
    raw_result = FUNCTION_REGISTRY[function_name](args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\dispatcher.py", line 84, in <lambda>
    "get_policy_info": lambda args: search_similar(
                                    ^^^^^^^^^^^^^^^
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\embedding.py", line 99, in search_similar
    hits = client.search(collection_name, query_vector=embedding, limit=5)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_client.py", line 377, in search
    return self._client.search(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\qdrant_remote.py", line 523, in search
    search_result = self.http.search_api.search_points(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 936, in search_points
    return self._build_for_search_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api\search_api.py", line 487, in _build_for_search_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 90, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abbir\AppData\Local\Programs\Python\Python311\Lib\site-packages\qdrant_client\http\api_client.py", line 125, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 404 (Not Found)
Raw response content:
b'{"status":{"error":"Not found: Collection `documents` doesn\'t exist!"},"time":3.796e-6}'
2025-09-16 17:48:01,166 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The query is outside the scope of the available tools. I can only provide information about orders, products, and policies."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4008,
        "candidates_token_count": 39,
        "total_token_count": 4112,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 17:48:01,166 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The query is outside the scope of the available tools. I can only provide information about orders, products, and policies."
    }
  }
}

2025-09-16 17:48:01,182 | INFO | Dispatching function: handle_unknown_query with args: {'message': 'The query is outside the scope of the available tools. I can only provide information about orders, products, and policies.'}
2025-09-16 17:48:01,183 | INFO | it is the raw result :The query is outside the scope of the available tools. I can only provide information about orders, products, and policies.
2025-09-16 17:58:11,334 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:58:11,345 | ERROR | Reset error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 54, in reset_data
    os.remove(db_path)
PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'data.db'
2025-09-16 17:58:35,595 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:59:31,249 | INFO | Ensuring Qdrant collection exists...
2025-09-16 17:59:32,087 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-16 17:59:32,097 | INFO | Creating collection 'documents' with dim=3072...
2025-09-16 17:59:32,494 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 17:59:32,500 | INFO | Qdrant collection ready.
2025-09-16 17:59:58,579 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 17:59:58,584 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-09-16 17:59:58,586 | INFO | Processing Excel with multiple sheets...
2025-09-16 18:00:01,999 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.32s
2025-09-16 18:00:02,130 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.13s
2025-09-16 18:00:02,230 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.10s
2025-09-16 18:00:02,349 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.12s
2025-09-16 18:00:02,536 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.18s
2025-09-16 18:00:47,902 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 18:00:47,908 | WARNING | File already exists.
2025-09-16 18:00:48,723 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 18:00:48,761 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-16 18:01:01,613 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-16 18:01:01,901 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-16 18:01:01,948 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-16 18:01:03,779 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-16 18:01:48,380 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 18:01:48,382 | WARNING | File already exists.
2025-09-16 18:01:49,164 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 18:01:49,172 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-16 18:01:52,798 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Customer Name": "priya sharma"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4014,
        "candidates_token_count": 58,
        "total_token_count": 4231
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 18:01:52,813 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-16 18:01:52,822 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002662B49D610>], 'whereClause': {'Customer Name': 'priya sharma'}}
2025-09-16 18:01:52,826 | INFO | get selected column is called
2025-09-16 18:01:52,843 | INFO | Execute sql query is executed
2025-09-16 18:01:52,845 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' COLLATE NOCASE
2025-09-16 18:01:52,859 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 1}]
2025-09-16 18:01:52,861 | INFO | it is the raw result :[{'COUNT("Order ID")': 1}]
2025-09-16 18:01:57,303 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 18:01:57,308 | WARNING | File already exists.
2025-09-16 18:01:58,190 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 18:01:58,195 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-16 18:03:18,198 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 18:03:18,199 | WARNING | File already exists.
2025-09-16 18:03:19,478 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 18:03:19,484 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-16 18:03:21,877 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Total Price"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Total Price"
                      }
                    ],
                    "whereClause": {
                      "Customer Name": "Priya Sharma"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 57,
        "total_token_count": 4226,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 18:03:21,889 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Total Price"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Total Price"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-16 18:03:21,897 | INFO | Dispatching function: get_order_details with args: {'columns': ['Total Price'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000002662B52DA90>], 'whereClause': {'Customer Name': 'Priya Sharma'}}
2025-09-16 18:03:21,899 | INFO | get selected column is called
2025-09-16 18:03:21,903 | INFO | Execute sql query is executed
2025-09-16 18:03:21,906 | INFO | This is the input of execute_sql_query:SELECT SUM("Total Price") FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' COLLATE NOCASE
2025-09-16 18:03:21,920 | INFO | this is the raw result after execution:[{'SUM("Total Price")': 1000}]
2025-09-16 18:03:21,922 | INFO | it is the raw result :[{'SUM("Total Price")': 1000}]
2025-09-16 18:03:26,435 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 18:03:26,445 | WARNING | File already exists.
2025-09-16 18:03:27,461 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 18:03:27,470 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-16 18:04:47,587 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 18:04:47,591 | WARNING | File already exists.
2025-09-16 18:04:48,428 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 18:04:48,433 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-16 18:04:50,938 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "priya sharma"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Order ID",
                      "Product Name",
                      "Quantity",
                      "Total Price",
                      "Sale Date"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 56,
        "total_token_count": 4265,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-16 18:04:50,954 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-16 18:04:50,970 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'priya sharma'}, 'table_name': 'Sales_Details', 'columns': ['Order ID', 'Product Name', 'Quantity', 'Total Price', 'Sale Date']}
2025-09-16 18:04:50,974 | INFO | get selected column is called
2025-09-16 18:04:50,983 | INFO | Execute sql query is executed
2025-09-16 18:04:50,984 | INFO | This is the input of execute_sql_query:SELECT "Order ID", "Product Name", "Quantity", "Total Price", "Sale Date" FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' COLLATE NOCASE
2025-09-16 18:04:50,995 | INFO | this is the raw result after execution:[{'Order ID': 'ORD100', 'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000, 'Sale Date': '2025-07-04 00:00:00'}]
2025-09-16 18:04:50,996 | INFO | it is the raw result :[{'Order ID': 'ORD100', 'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000, 'Sale Date': '2025-07-04 00:00:00'}]
2025-09-16 18:04:56,820 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-16 18:04:56,824 | WARNING | File already exists.
2025-09-16 18:04:57,677 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-16 18:04:57,684 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 12:26:34,951 | INFO | Ensuring Qdrant collection exists...
2025-09-17 12:26:35,817 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 12:26:36,113 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 12:26:36,172 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 12:26:36,172 | INFO | Qdrant collection ready.
2025-09-17 12:36:11,604 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Total Price"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4011,
        "candidates_token_count": 48,
        "total_token_count": 4548
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 12:36:11,637 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Total Price"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 12:36:11,653 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001A2EDDA4550>], 'whereClause': {'Category': 'Electronics'}}
2025-09-17 12:36:11,653 | INFO | get selected column is called
2025-09-17 12:36:11,687 | INFO | Execute sql query is executed
2025-09-17 12:36:11,687 | INFO | This is the input of execute_sql_query:SELECT SUM("Total Price") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE
2025-09-17 12:36:11,753 | INFO | this is the raw result after execution:[{'SUM("Total Price")': 137400}]
2025-09-17 12:36:11,753 | INFO | it is the raw result :[{'SUM("Total Price")': 137400}]
2025-09-17 12:36:11,753 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 95, in handle_query
    format_prompt = f"""
                    ^^^^
ValueError: Invalid format specifier ' 'ORD100', 'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000, 'Sale Date': '2025-07-04 00:00:00'' for object of type 'str'
2025-09-17 12:37:55,569 | INFO | Ensuring Qdrant collection exists...
2025-09-17 12:37:56,470 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 12:37:56,803 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 12:37:56,847 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 12:37:56,850 | INFO | Qdrant collection ready.
2025-09-17 12:38:46,909 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Total Price"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4011,
        "candidates_token_count": 48,
        "total_token_count": 4956,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 12:38:46,938 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Total Price"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 12:38:46,955 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E23D5BA190>], 'whereClause': {'Category': 'Electronics'}}
2025-09-17 12:38:46,973 | INFO | get selected column is called
2025-09-17 12:38:46,973 | INFO | Execute sql query is executed
2025-09-17 12:38:46,973 | INFO | This is the input of execute_sql_query:SELECT SUM("Total Price") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE
2025-09-17 12:38:47,004 | INFO | this is the raw result after execution:[{'SUM("Total Price")': 137400}]
2025-09-17 12:38:47,004 | INFO | it is the raw result :[{'SUM("Total Price")': 137400}]
2025-09-17 12:38:47,009 | ERROR | Query error
Traceback (most recent call last):
  File "C:\Users\abbir\Downloads\capstone_ai_chatbot\backend\main.py", line 95, in handle_query
    format_prompt = f"""
                    ^^^^
ValueError: Invalid format specifier ' 'ORD100', 'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000, 'Sale Date': '2025-07-04 00:00:00'' for object of type 'str'
2025-09-17 12:40:38,446 | INFO | Ensuring Qdrant collection exists...
2025-09-17 12:40:39,339 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 12:40:39,660 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 12:40:39,727 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 12:40:39,727 | INFO | Qdrant collection ready.
2025-09-17 12:41:11,822 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Total Price"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4011,
        "candidates_token_count": 48,
        "total_token_count": 4762,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 12:41:11,839 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Total Price"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 12:41:11,856 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001BF43AEF650>], 'whereClause': {'Category': 'Electronics'}}
2025-09-17 12:41:11,856 | INFO | get selected column is called
2025-09-17 12:41:11,862 | INFO | Execute sql query is executed
2025-09-17 12:41:11,862 | INFO | This is the input of execute_sql_query:SELECT SUM("Total Price") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE
2025-09-17 12:41:11,873 | INFO | this is the raw result after execution:[{'SUM("Total Price")': 137400}]
2025-09-17 12:41:11,873 | INFO | it is the raw result :[{'SUM("Total Price")': 137400}]
2025-09-17 12:41:45,940 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "group_by": [
                      "Category"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Total Price"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4011,
        "candidates_token_count": 55,
        "total_token_count": 4208,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 12:41:45,973 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "group_by"
    value {
      list_value {
        values {
          string_value: "Category"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Total Price"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 12:41:45,989 | INFO | Dispatching function: get_order_details with args: {'group_by': ['Category'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001BF43BA9DD0>], 'whereClause': {'Category': 'Electronics'}}
2025-09-17 12:41:45,989 | INFO | get selected column is called
2025-09-17 12:41:45,989 | INFO | Execute sql query is executed
2025-09-17 12:41:45,989 | INFO | This is the input of execute_sql_query:SELECT SUM("Total Price") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE GROUP BY "Category"
2025-09-17 12:41:46,022 | INFO | this is the raw result after execution:[{'SUM("Total Price")': 137400}]
2025-09-17 12:41:46,022 | INFO | it is the raw result :[{'SUM("Total Price")': 137400}]
2025-09-17 12:43:42,056 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "priya sharma"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name",
                      "Quantity",
                      "Total Price"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 48,
        "total_token_count": 4262,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 12:43:42,074 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Total Price"
        }
      }
    }
  }
}

2025-09-17 12:43:42,074 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'priya sharma'}, 'table_name': 'Sales_Details', 'columns': ['Product Name', 'Quantity', 'Total Price']}
2025-09-17 12:43:42,074 | INFO | get selected column is called
2025-09-17 12:43:42,090 | INFO | Execute sql query is executed
2025-09-17 12:43:42,090 | INFO | This is the input of execute_sql_query:SELECT "Product Name", "Quantity", "Total Price" FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' COLLATE NOCASE
2025-09-17 12:43:42,106 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000}]
2025-09-17 12:43:42,107 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000}]
2025-09-17 13:45:24,108 | INFO | Ensuring Qdrant collection exists...
2025-09-17 13:45:25,031 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 13:45:25,347 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 13:45:25,416 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 13:45:25,416 | INFO | Qdrant collection ready.
2025-09-17 13:46:47,316 | INFO | HTTP Request: DELETE https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 13:47:04,932 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:47:04,932 | INFO | File saved at: uploads\Ecommerce_Data_Complete.xlsx
2025-09-17 13:47:04,932 | INFO | Processing Excel with multiple sheets...
2025-09-17 13:47:08,131 | INFO | Inserted sheet 'Sales_Details' as table 'sales_details' in 0.35s
2025-09-17 13:47:08,281 | INFO | Inserted sheet 'Order_Details' as table 'order_details' in 0.15s
2025-09-17 13:47:08,417 | INFO | Inserted sheet 'Product_Catalog' as table 'product_catalog' in 0.14s
2025-09-17 13:47:08,547 | INFO | Inserted sheet 'Customer_Info' as table 'customer_info' in 0.13s
2025-09-17 13:47:08,664 | INFO | Inserted sheet 'Payment_Transactions' as table 'payment_transactions' in 0.12s
2025-09-17 13:47:34,806 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:47:34,806 | WARNING | File already exists.
2025-09-17 13:47:35,985 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 404 Not Found"
2025-09-17 13:47:35,997 | INFO | Embeddings not found in Qdrant. Reprocessing the file...
2025-09-17 13:47:49,644 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 13:47:49,660 | INFO | Creating collection 'documents' with dim=3072...
2025-09-17 13:47:50,154 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 13:47:53,106 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-17 13:47:59,369 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 63,
        "total_token_count": 4325
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 13:47:59,416 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 13:47:59,431 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A6AE3390>], 'whereClause': {'Category': 'Electronics', 'Sale Date': '2025-07-04'}}
2025-09-17 13:47:59,447 | INFO | get selected column is called
2025-09-17 13:47:59,447 | INFO | Execute sql query is executed
2025-09-17 13:47:59,462 | INFO | This is the input of execute_sql_query:SELECT SUM("Quantity") FROM "Sales_Details" WHERE "Category" = 'Electronics' AND "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 13:47:59,478 | INFO | this is the raw result after execution:[{'SUM("Quantity")': None}]
2025-09-17 13:47:59,478 | INFO | it is the raw result :[{'SUM("Quantity")': None}]
2025-09-17 13:48:04,499 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:48:04,515 | WARNING | File already exists.
2025-09-17 13:48:05,431 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:48:05,465 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:51:56,118 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:51:56,118 | WARNING | File already exists.
2025-09-17 13:51:57,426 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:51:57,442 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:51:59,899 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4007,
        "candidates_token_count": 48,
        "total_token_count": 4199,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 13:51:59,915 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 13:51:59,930 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A7252990>], 'whereClause': {'Country': 'USA'}}
2025-09-17 13:51:59,930 | INFO | get selected column is called
2025-09-17 13:51:59,946 | INFO | Execute sql query is executed
2025-09-17 13:51:59,946 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-09-17 13:51:59,946 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 5}]
2025-09-17 13:51:59,946 | INFO | it is the raw result :[{'COUNT("Order ID")': 5}]
2025-09-17 13:52:04,202 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:52:04,202 | WARNING | File already exists.
2025-09-17 13:52:05,299 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:52:05,315 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:52:41,199 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:52:41,200 | WARNING | File already exists.
2025-09-17 13:52:42,367 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:52:42,367 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:53:28,900 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:53:28,900 | WARNING | File already exists.
2025-09-17 13:53:29,951 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:53:29,967 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:53:34,250 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Product Name",
                      "Quantity",
                      "Total Price",
                      "Sale Date"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Customer Name": "Aditi Rao"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 51,
        "total_token_count": 4240,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 13:53:34,267 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "Aditi Rao"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-17 13:53:34,267 | INFO | Dispatching function: get_order_details with args: {'columns': ['Product Name', 'Quantity', 'Total Price', 'Sale Date'], 'table_name': 'Sales_Details', 'whereClause': {'Customer Name': 'Aditi Rao'}}
2025-09-17 13:53:34,284 | INFO | get selected column is called
2025-09-17 13:53:34,284 | INFO | Execute sql query is executed
2025-09-17 13:53:34,300 | INFO | This is the input of execute_sql_query:SELECT "Product Name", "Quantity", "Total Price", "Sale Date" FROM "Sales_Details" WHERE "Customer Name" = 'Aditi Rao' COLLATE NOCASE
2025-09-17 13:53:34,316 | INFO | this is the raw result after execution:[{'Product Name': 'LED Monitor', 'Quantity': 4, 'Total Price': 34000, 'Sale Date': '2025-07-03 00:00:00'}]
2025-09-17 13:53:34,317 | INFO | it is the raw result :[{'Product Name': 'LED Monitor', 'Quantity': 4, 'Total Price': 34000, 'Sale Date': '2025-07-03 00:00:00'}]
2025-09-17 13:53:49,283 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:53:49,283 | WARNING | File already exists.
2025-09-17 13:53:50,203 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:53:50,221 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:54:26,134 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:54:26,151 | WARNING | File already exists.
2025-09-17 13:54:27,084 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:54:27,101 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:54:29,354 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "Priya Sharm",
                      "Sale Date": "%-07-04"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Order ID",
                      "Product Name",
                      "Quantity",
                      "Total Price",
                      "Sale Date",
                      "Payment Method"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 71,
        "total_token_count": 4173,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 13:54:29,386 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharm"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
        values {
          string_value: "Payment Method"
        }
      }
    }
  }
}

2025-09-17 13:54:29,404 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'Priya Sharm', 'Sale Date': '%-07-04'}, 'table_name': 'Sales_Details', 'columns': ['Order ID', 'Product Name', 'Quantity', 'Total Price', 'Sale Date', 'Payment Method']}
2025-09-17 13:54:29,404 | INFO | get selected column is called
2025-09-17 13:54:29,417 | INFO | Execute sql query is executed
2025-09-17 13:54:29,417 | INFO | This is the input of execute_sql_query:SELECT "Order ID", "Product Name", "Quantity", "Total Price", "Sale Date", "Payment Method" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharm' AND "Sale Date" LIKE '%-07-04' COLLATE NOCASE
2025-09-17 13:54:29,433 | INFO | this is the raw result after execution:[]
2025-09-17 13:54:29,433 | INFO | it is the raw result :[]
2025-09-17 13:54:33,861 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:54:33,861 | WARNING | File already exists.
2025-09-17 13:54:34,910 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:54:34,926 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:54:37,568 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:54:37,569 | WARNING | File already exists.
2025-09-17 13:54:37,884 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:54:37,902 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:54:42,270 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "Priya Sharma",
                      "Sale Date": "%-07-04"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Order ID",
                      "Product Name",
                      "Quantity",
                      "Total Price",
                      "Sale Date",
                      "Customer Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 71,
        "total_token_count": 4302,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 13:54:42,301 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
        values {
          string_value: "Customer Name"
        }
      }
    }
  }
}

2025-09-17 13:54:42,318 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'Priya Sharma', 'Sale Date': '%-07-04'}, 'table_name': 'Sales_Details', 'columns': ['Order ID', 'Product Name', 'Quantity', 'Total Price', 'Sale Date', 'Customer Name']}
2025-09-17 13:54:42,318 | INFO | get selected column is called
2025-09-17 13:54:42,318 | INFO | Execute sql query is executed
2025-09-17 13:54:42,334 | INFO | This is the input of execute_sql_query:SELECT "Order ID", "Product Name", "Quantity", "Total Price", "Sale Date", "Customer Name" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' AND "Sale Date" LIKE '%-07-04' COLLATE NOCASE
2025-09-17 13:54:42,350 | INFO | this is the raw result after execution:[]
2025-09-17 13:54:42,352 | INFO | it is the raw result :[]
2025-09-17 13:54:47,284 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:54:47,284 | WARNING | File already exists.
2025-09-17 13:54:48,268 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:54:48,283 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:58:07,936 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:58:07,936 | WARNING | File already exists.
2025-09-17 13:58:09,286 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:58:09,303 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 13:58:14,487 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "priya sharma"
                    },
                    "group_by": [
                      "Product Name"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      },
                      {
                        "operation": "SUM",
                        "column": "Total Price"
                      }
                    ],
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 78,
        "total_token_count": 4471,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 13:58:14,503 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "group_by"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Total Price"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 13:58:14,520 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'priya sharma'}, 'group_by': ['Product Name'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A71B9290>, <proto.marshal.collections.maps.MapComposite object at 0x000001E3A71BA010>], 'columns': ['Product Name']}
2025-09-17 13:58:14,537 | INFO | get selected column is called
2025-09-17 13:58:14,537 | INFO | Execute sql query is executed
2025-09-17 13:58:14,537 | INFO | This is the input of execute_sql_query:SELECT SUM("Quantity"), SUM("Total Price") FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' COLLATE NOCASE GROUP BY "Product Name"
2025-09-17 13:58:14,571 | INFO | this is the raw result after execution:[{'SUM("Quantity")': 2, 'SUM("Total Price")': 1000}]
2025-09-17 13:58:14,571 | INFO | it is the raw result :[{'SUM("Quantity")': 2, 'SUM("Total Price")': 1000}]
2025-09-17 13:58:18,837 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 13:58:18,854 | WARNING | File already exists.
2025-09-17 13:58:19,770 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 13:58:19,770 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:00:15,371 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:00:15,387 | WARNING | File already exists.
2025-09-17 14:00:16,287 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:00:16,304 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:00:19,678 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Shipping Status"
                    ],
                    "table_name": "Order_Details",
                    "whereClause": {
                      "Order ID": "ord104"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4015,
        "candidates_token_count": 41,
        "total_token_count": 4145,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 14:00:19,724 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Order ID"
          value {
            string_value: "ord104"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Order_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Shipping Status"
        }
      }
    }
  }
}

2025-09-17 14:00:19,724 | INFO | Dispatching function: get_order_details with args: {'columns': ['Shipping Status'], 'table_name': 'Order_Details', 'whereClause': {'Order ID': 'ord104'}}
2025-09-17 14:00:19,740 | INFO | get selected column is called
2025-09-17 14:00:19,740 | INFO | Execute sql query is executed
2025-09-17 14:00:19,757 | INFO | This is the input of execute_sql_query:SELECT "Shipping Status" FROM "Order_Details" WHERE "Order ID" = 'ord104' COLLATE NOCASE
2025-09-17 14:00:19,771 | INFO | this is the raw result after execution:[{'Shipping Status': 'Delivered'}]
2025-09-17 14:00:19,775 | INFO | it is the raw result :[{'Shipping Status': 'Delivered'}]
2025-09-17 14:00:25,376 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:00:25,376 | WARNING | File already exists.
2025-09-17 14:00:26,394 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:00:26,394 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:01:32,190 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:01:32,207 | WARNING | File already exists.
2025-09-17 14:01:33,123 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:01:33,123 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:01:37,504 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "Priya Sharma"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name",
                      "Quantity",
                      "Total Price"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 47,
        "total_token_count": 4238,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 14:01:37,521 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Total Price"
        }
      }
    }
  }
}

2025-09-17 14:01:37,521 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'Priya Sharma'}, 'table_name': 'Sales_Details', 'columns': ['Product Name', 'Quantity', 'Total Price']}
2025-09-17 14:01:37,521 | INFO | get selected column is called
2025-09-17 14:01:37,538 | INFO | Execute sql query is executed
2025-09-17 14:01:37,538 | INFO | This is the input of execute_sql_query:SELECT "Product Name", "Quantity", "Total Price" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' COLLATE NOCASE
2025-09-17 14:01:37,553 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000}]
2025-09-17 14:01:37,557 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000}]
2025-09-17 14:01:45,805 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:01:45,807 | WARNING | File already exists.
2025-09-17 14:01:46,723 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:01:46,740 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:11:50,476 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:11:50,477 | WARNING | File already exists.
2025-09-17 14:11:51,611 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:11:51,611 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:11:56,643 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Country": "USA"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4007,
        "candidates_token_count": 48,
        "total_token_count": 4238
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 14:11:56,660 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Country"
          value {
            string_value: "USA"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 14:11:56,676 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A6D89D50>], 'whereClause': {'Country': 'USA'}}
2025-09-17 14:11:56,676 | INFO | get selected column is called
2025-09-17 14:11:56,676 | INFO | Execute sql query is executed
2025-09-17 14:11:56,692 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Country" = 'USA' COLLATE NOCASE
2025-09-17 14:11:56,692 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 5}]
2025-09-17 14:11:56,692 | INFO | it is the raw result :[{'COUNT("Order ID")': 5}]
2025-09-17 14:12:01,542 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:12:01,542 | WARNING | File already exists.
2025-09-17 14:12:02,642 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:12:02,660 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:25:07,731 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:25:07,732 | WARNING | File already exists.
2025-09-17 14:25:10,600 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:25:10,600 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:25:39,615 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Order ID",
                      "Product Name",
                      "Quantity",
                      "Unit Price",
                      "Total Price",
                      "Sale Date",
                      "Payment Method"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Customer Name": "Priya Sharma"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 63,
        "total_token_count": 6069
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 14:25:39,632 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Unit Price"
        }
        values {
          string_value: "Total Price"
        }
        values {
          string_value: "Sale Date"
        }
        values {
          string_value: "Payment Method"
        }
      }
    }
  }
}

2025-09-17 14:25:39,648 | INFO | Dispatching function: get_order_details with args: {'columns': ['Order ID', 'Product Name', 'Quantity', 'Unit Price', 'Total Price', 'Sale Date', 'Payment Method'], 'table_name': 'Sales_Details', 'whereClause': {'Customer Name': 'Priya Sharma'}}
2025-09-17 14:25:39,648 | INFO | get selected column is called
2025-09-17 14:25:39,666 | INFO | Execute sql query is executed
2025-09-17 14:25:39,666 | INFO | This is the input of execute_sql_query:SELECT "Order ID", "Product Name", "Quantity", "Unit Price", "Total Price", "Sale Date", "Payment Method" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' COLLATE NOCASE
2025-09-17 14:25:39,681 | INFO | this is the raw result after execution:[{'Order ID': 'ORD100', 'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Unit Price': 500, 'Total Price': 1000, 'Sale Date': '2025-07-04 00:00:00', 'Payment Method': 'Debit Card'}]
2025-09-17 14:25:39,681 | INFO | it is the raw result :[{'Order ID': 'ORD100', 'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Unit Price': 500, 'Total Price': 1000, 'Sale Date': '2025-07-04 00:00:00', 'Payment Method': 'Debit Card'}]
2025-09-17 14:25:54,699 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:25:54,717 | WARNING | File already exists.
2025-09-17 14:25:55,852 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:25:55,852 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:26:17,848 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:26:17,852 | WARNING | File already exists.
2025-09-17 14:26:18,833 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:26:18,852 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:26:22,128 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2025-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 70,
        "total_token_count": 4270,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 14:26:22,148 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 14:26:22,149 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Category': 'Electronics', 'Sale Date': '2025-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A71F9050>], 'columns': ['Order ID']}
2025-09-17 14:26:22,165 | INFO | get selected column is called
2025-09-17 14:26:22,166 | INFO | Execute sql query is executed
2025-09-17 14:26:22,166 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Category" = 'Electronics' AND "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 14:26:22,182 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 14:26:22,182 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 14:26:26,266 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:26:26,282 | WARNING | File already exists.
2025-09-17 14:26:27,383 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:26:27,400 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:26:39,500 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:26:39,500 | WARNING | File already exists.
2025-09-17 14:26:40,621 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:26:40,638 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 14:26:46,299 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "%-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4014,
        "candidates_token_count": 60,
        "total_token_count": 4381,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 14:26:46,315 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 14:26:46,337 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A71A9250>], 'whereClause': {'Category': 'Electronics', 'Sale Date': '%-07-04'}}
2025-09-17 14:26:46,337 | INFO | get selected column is called
2025-09-17 14:26:46,344 | INFO | Execute sql query is executed
2025-09-17 14:26:46,344 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Category" = 'Electronics' AND "Sale Date" LIKE '%-07-04' COLLATE NOCASE
2025-09-17 14:26:46,359 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 14:26:46,359 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 14:26:51,533 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 14:26:51,533 | WARNING | File already exists.
2025-09-17 14:26:52,766 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 14:26:52,766 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:39:12,476 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:39:12,491 | WARNING | File already exists.
2025-09-17 15:39:13,541 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:39:13,557 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:39:22,909 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Category"
                    ],
                    "group_by": [
                      "Category"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Total Price"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4010,
        "candidates_token_count": 60,
        "total_token_count": 4272
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:39:22,924 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "group_by"
    value {
      list_value {
        values {
          string_value: "Category"
        }
      }
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Category"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Total Price"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 15:39:22,940 | INFO | Dispatching function: get_order_details with args: {'columns': ['Category'], 'group_by': ['Category'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A71A0B50>], 'whereClause': {'Category': 'Electronics'}}
2025-09-17 15:39:22,940 | INFO | get selected column is called
2025-09-17 15:39:22,955 | INFO | Execute sql query is executed
2025-09-17 15:39:22,955 | INFO | This is the input of execute_sql_query:SELECT SUM("Total Price") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE GROUP BY "Category"
2025-09-17 15:39:22,971 | INFO | this is the raw result after execution:[{'SUM("Total Price")': 137400}]
2025-09-17 15:39:22,971 | INFO | it is the raw result :[{'SUM("Total Price")': 137400}]
2025-09-17 15:39:27,804 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:39:27,804 | WARNING | File already exists.
2025-09-17 15:39:31,627 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:39:34,180 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:39:40,750 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:39:40,766 | WARNING | File already exists.
2025-09-17 15:39:41,766 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:39:41,766 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:39:46,966 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2025-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": [
                      "Order ID"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 70,
        "total_token_count": 4337
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:39:46,983 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Order ID"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 15:39:46,999 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Category': 'Electronics', 'Sale Date': '2025-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A71A92D0>], 'columns': ['Order ID']}
2025-09-17 15:39:46,999 | INFO | get selected column is called
2025-09-17 15:39:46,999 | INFO | Execute sql query is executed
2025-09-17 15:39:47,016 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Category" = 'Electronics' AND "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 15:39:47,016 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 15:39:47,016 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 15:39:52,216 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:39:52,217 | WARNING | File already exists.
2025-09-17 15:39:53,427 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:39:53,943 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:40:59,130 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:40:59,130 | WARNING | File already exists.
2025-09-17 15:41:03,076 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:41:03,092 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:41:06,533 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "Priya Sharma",
                      "Sale Date": "%-07-04%"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4018,
        "candidates_token_count": 53,
        "total_token_count": 4254,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:41:06,548 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04%"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-17 15:41:06,565 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'Priya Sharma', 'Sale Date': '%-07-04%'}, 'table_name': 'Sales_Details', 'columns': ['Product Name']}
2025-09-17 15:41:06,565 | INFO | get selected column is called
2025-09-17 15:41:06,580 | INFO | Execute sql query is executed
2025-09-17 15:41:06,580 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' AND "Sale Date" LIKE '%-07-04%' COLLATE NOCASE
2025-09-17 15:41:06,596 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse'}]
2025-09-17 15:41:06,596 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse'}]
2025-09-17 15:41:11,749 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:41:11,752 | WARNING | File already exists.
2025-09-17 15:41:16,182 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:41:16,584 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:41:23,873 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:41:23,873 | WARNING | File already exists.
2025-09-17 15:41:25,127 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:41:25,127 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:41:27,179 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "Priya Sharma"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 40,
        "total_token_count": 4165,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:41:27,195 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "Priya Sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-17 15:41:27,211 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'Priya Sharma'}, 'table_name': 'Sales_Details', 'columns': ['Product Name']}
2025-09-17 15:41:27,211 | INFO | get selected column is called
2025-09-17 15:41:27,211 | INFO | Execute sql query is executed
2025-09-17 15:41:27,226 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" WHERE "Customer Name" = 'Priya Sharma' COLLATE NOCASE
2025-09-17 15:41:27,226 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse'}]
2025-09-17 15:41:27,226 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse'}]
2025-09-17 15:41:31,320 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:41:31,335 | WARNING | File already exists.
2025-09-17 15:41:33,466 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:41:33,466 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:41:42,451 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:41:42,451 | WARNING | File already exists.
2025-09-17 15:41:43,737 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:41:43,751 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:41:46,919 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Product Name"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Customer Name": "Aditi Rao"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 40,
        "total_token_count": 4160,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:41:46,936 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "Aditi Rao"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-17 15:41:46,950 | INFO | Dispatching function: get_order_details with args: {'columns': ['Product Name'], 'table_name': 'Sales_Details', 'whereClause': {'Customer Name': 'Aditi Rao'}}
2025-09-17 15:41:46,950 | INFO | get selected column is called
2025-09-17 15:41:46,950 | INFO | Execute sql query is executed
2025-09-17 15:41:46,950 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" WHERE "Customer Name" = 'Aditi Rao' COLLATE NOCASE
2025-09-17 15:41:46,967 | INFO | this is the raw result after execution:[{'Product Name': 'LED Monitor'}]
2025-09-17 15:41:46,967 | INFO | it is the raw result :[{'Product Name': 'LED Monitor'}]
2025-09-17 15:41:52,452 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:41:52,468 | WARNING | File already exists.
2025-09-17 15:41:55,190 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:41:55,204 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:42:18,812 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:42:18,812 | WARNING | File already exists.
2025-09-17 15:42:22,462 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:42:22,462 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:42:27,113 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 64,
        "total_token_count": 4287
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:42:27,145 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 15:42:27,160 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A719B610>], 'whereClause': {'Category': 'Electronics', 'Sale Date': '2025-07-04'}}
2025-09-17 15:42:27,176 | INFO | get selected column is called
2025-09-17 15:42:27,176 | INFO | Execute sql query is executed
2025-09-17 15:42:27,176 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Category" = 'Electronics' AND "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 15:42:27,192 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 15:42:27,192 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 15:42:31,618 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:42:31,634 | WARNING | File already exists.
2025-09-17 15:42:32,901 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:42:32,901 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:43:53,120 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:43:53,135 | WARNING | File already exists.
2025-09-17 15:43:54,218 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:43:54,235 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:44:00,135 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Quantity"
                    ],
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 62,
        "total_token_count": 4289,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:44:00,151 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Quantity"
        }
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 15:44:00,168 | INFO | Dispatching function: get_order_details with args: {'columns': ['Quantity'], 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E3A71A8390>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-17 15:44:00,168 | INFO | get selected column is called
2025-09-17 15:44:00,168 | INFO | Execute sql query is executed
2025-09-17 15:44:00,168 | INFO | This is the input of execute_sql_query:SELECT SUM("Quantity") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 15:44:00,185 | INFO | this is the raw result after execution:[{'SUM("Quantity")': None}]
2025-09-17 15:44:00,185 | INFO | it is the raw result :[{'SUM("Quantity")': None}]
2025-09-17 15:44:05,091 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:44:05,102 | WARNING | File already exists.
2025-09-17 15:44:06,067 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:44:06,083 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:44:40,902 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:44:40,918 | WARNING | File already exists.
2025-09-17 15:44:43,736 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:44:43,753 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:44:47,022 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "columns": [
                      "Sale Date"
                    ],
                    "table_name": "Sales_Details",
                    "whereClause": {
                      "Customer Name": "priya sharma",
                      "Product Name": "wireless mouse"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4012,
        "candidates_token_count": 49,
        "total_token_count": 4190,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 15:44:47,036 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Product Name"
          value {
            string_value: "wireless mouse"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Sale Date"
        }
      }
    }
  }
}

2025-09-17 15:44:47,052 | INFO | Dispatching function: get_order_details with args: {'columns': ['Sale Date'], 'table_name': 'Sales_Details', 'whereClause': {'Customer Name': 'priya sharma', 'Product Name': 'wireless mouse'}}
2025-09-17 15:44:47,052 | INFO | get selected column is called
2025-09-17 15:44:47,068 | INFO | Execute sql query is executed
2025-09-17 15:44:47,068 | INFO | This is the input of execute_sql_query:SELECT "Sale Date" FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' AND "Product Name" = 'wireless mouse' COLLATE NOCASE
2025-09-17 15:44:47,068 | INFO | this is the raw result after execution:[]
2025-09-17 15:44:47,086 | INFO | it is the raw result :[]
2025-09-17 15:44:53,836 | INFO | Starting upload for file: Ecommerce_Data_Complete.xlsx
2025-09-17 15:44:53,853 | WARNING | File already exists.
2025-09-17 15:44:54,986 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 15:44:55,005 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 15:57:33,008 | INFO | Ensuring Qdrant collection exists...
2025-09-17 15:57:33,918 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 15:57:34,372 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 15:57:34,427 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 15:57:34,427 | INFO | Qdrant collection ready.
2025-09-17 16:02:01,094 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 58,
        "total_token_count": 4248
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:02:01,127 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 16:02:01,160 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000276695C7050>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-17 16:02:01,160 | INFO | get selected column is called
2025-09-17 16:02:01,176 | INFO | Execute sql query is executed
2025-09-17 16:02:01,176 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 16:02:01,260 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 16:02:01,310 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 16:03:41,344 | INFO | Starting upload for file: policy details.pdf
2025-09-17 16:03:41,361 | INFO | File saved at: uploads\policy details.pdf
2025-09-17 16:03:41,361 | INFO | Extracting PDF...
2025-09-17 16:03:48,094 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 16:03:48,413 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 16:03:48,428 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 16:03:50,728 | INFO | HTTP Request: PUT https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points?wait=true "HTTP/1.1 200 OK"
2025-09-17 16:04:01,326 | INFO | Starting upload for file: policy details.pdf
2025-09-17 16:04:01,328 | WARNING | File already exists.
2025-09-17 16:04:02,328 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 16:04:02,361 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 16:04:04,661 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_policy_info",
                  "args": {
                    "query": "is there any limitations to upload a file?"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4013,
        "candidates_token_count": 25,
        "total_token_count": 4114,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:04:04,677 | INFO | ✅ Structured tool call: name: "get_policy_info"
args {
  fields {
    key: "query"
    value {
      string_value: "is there any limitations to upload a file?"
    }
  }
}

2025-09-17 16:04:04,677 | INFO | Dispatching function: get_policy_info with args: {'query': 'is there any limitations to upload a file?'}
2025-09-17 16:04:06,610 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/search "HTTP/1.1 200 OK"
2025-09-17 16:04:10,215 | INFO | it is the raw result :Yes, there are limitations.
*   **Maximum size:** 15 MB
*   **Accepted formats:** PDF, DOCX, XLSX, CSV
*   **Unsupported formats:** Image files (JPG, PNG) and executable files (EXE)
2025-09-17 16:04:15,645 | INFO | Starting upload for file: policy details.pdf
2025-09-17 16:04:15,645 | WARNING | File already exists.
2025-09-17 16:04:17,861 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 16:04:17,878 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 16:04:55,078 | INFO | Starting upload for file: policy details.pdf
2025-09-17 16:04:55,094 | WARNING | File already exists.
2025-09-17 16:04:58,045 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 16:04:58,061 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 16:05:00,378 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "handle_unknown_query",
                  "args": {
                    "message": "The query is outside the scope of the available tools. I can provide information about orders, policies, or products."
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4008,
        "candidates_token_count": 38,
        "total_token_count": 4109,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:05:00,396 | INFO | ✅ Structured tool call: name: "handle_unknown_query"
args {
  fields {
    key: "message"
    value {
      string_value: "The query is outside the scope of the available tools. I can provide information about orders, policies, or products."
    }
  }
}

2025-09-17 16:05:00,396 | INFO | Dispatching function: handle_unknown_query with args: {'message': 'The query is outside the scope of the available tools. I can provide information about orders, policies, or products.'}
2025-09-17 16:05:00,411 | INFO | it is the raw result :The query is outside the scope of the available tools. I can provide information about orders, policies, or products.
2025-09-17 16:05:04,540 | INFO | Starting upload for file: policy details.pdf
2025-09-17 16:05:04,540 | WARNING | File already exists.
2025-09-17 16:05:05,699 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 16:05:05,714 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 16:05:32,477 | INFO | Starting upload for file: policy details.pdf
2025-09-17 16:05:32,477 | WARNING | File already exists.
2025-09-17 16:05:33,696 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 16:05:33,696 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 16:05:38,377 | INFO | Starting upload for file: policy details.pdf
2025-09-17 16:05:38,379 | WARNING | File already exists.
2025-09-17 16:05:38,778 | INFO | HTTP Request: POST https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents/points/scroll "HTTP/1.1 200 OK"
2025-09-17 16:05:38,795 | INFO | Embeddings already exist. Skipping reprocessing.
2025-09-17 16:05:45,610 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 58,
        "total_token_count": 4275,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:05:45,628 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 16:05:45,628 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000276698F7450>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-17 16:05:45,628 | INFO | get selected column is called
2025-09-17 16:05:45,648 | INFO | Execute sql query is executed
2025-09-17 16:05:45,648 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 16:05:45,660 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 16:05:45,661 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 16:30:45,440 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    },
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "columns": []
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 61,
        "total_token_count": 4195
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:30:45,475 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
      }
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 16:30:45,490 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Sale Date': '2025-07-04'}, 'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x00000276699011D0>], 'columns': []}
2025-09-17 16:30:45,491 | INFO | get selected column is called
2025-09-17 16:30:45,507 | INFO | Execute sql query is executed
2025-09-17 16:30:45,507 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04' COLLATE NOCASE
2025-09-17 16:30:45,522 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 16:30:45,523 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 16:39:44,652 | INFO | Ensuring Qdrant collection exists...
2025-09-17 16:39:47,320 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 16:39:47,720 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 16:39:47,786 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 16:39:47,786 | INFO | Qdrant collection ready.
2025-09-17 16:40:49,188 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4020,
        "candidates_token_count": 58,
        "total_token_count": 4195
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:40:49,221 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 16:40:49,238 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x000001E89DCC4F90>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-17 16:40:49,238 | INFO | get selected column is called
2025-09-17 16:40:49,271 | INFO | Execute sql query is executed
2025-09-17 16:40:49,271 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04' COLLATE NOCASE COLLATE NOCASE
2025-09-17 16:40:49,321 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 16:40:49,338 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 16:41:32,038 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "priya sharma"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name",
                      "Quantity",
                      "Total Price"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4014,
        "candidates_token_count": 48,
        "total_token_count": 4164,
        "cached_content_token_count": 3703
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:41:32,054 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
        values {
          string_value: "Quantity"
        }
        values {
          string_value: "Total Price"
        }
      }
    }
  }
}

2025-09-17 16:41:32,088 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'priya sharma'}, 'table_name': 'Sales_Details', 'columns': ['Product Name', 'Quantity', 'Total Price']}
2025-09-17 16:41:32,088 | INFO | get selected column is called
2025-09-17 16:41:32,121 | INFO | Execute sql query is executed
2025-09-17 16:41:32,121 | INFO | This is the input of execute_sql_query:SELECT "Product Name", "Quantity", "Total Price" FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' COLLATE NOCASE COLLATE NOCASE
2025-09-17 16:41:32,138 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000}]
2025-09-17 16:41:32,138 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse', 'Quantity': 2, 'Total Price': 1000}]
2025-09-17 16:42:09,138 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "whereClause": {
                      "Customer Name": "priya sharma",
                      "Sale Date": "%-07-04%"
                    },
                    "table_name": "Sales_Details",
                    "columns": [
                      "Product Name"
                    ]
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4019,
        "candidates_token_count": 54,
        "total_token_count": 4210,
        "cached_content_token_count": 3704
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:42:09,155 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "%-07-04%"
          }
        }
        fields {
          key: "Customer Name"
          value {
            string_value: "priya sharma"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "columns"
    value {
      list_value {
        values {
          string_value: "Product Name"
        }
      }
    }
  }
}

2025-09-17 16:42:09,171 | INFO | Dispatching function: get_order_details with args: {'whereClause': {'Customer Name': 'priya sharma', 'Sale Date': '%-07-04%'}, 'table_name': 'Sales_Details', 'columns': ['Product Name']}
2025-09-17 16:42:09,171 | INFO | get selected column is called
2025-09-17 16:42:09,190 | INFO | Execute sql query is executed
2025-09-17 16:42:09,190 | INFO | This is the input of execute_sql_query:SELECT "Product Name" FROM "Sales_Details" WHERE "Customer Name" = 'priya sharma' COLLATE NOCASE AND "Sale Date" LIKE '%-07-04%' COLLATE NOCASE COLLATE NOCASE
2025-09-17 16:42:09,205 | INFO | this is the raw result after execution:[{'Product Name': 'Wireless Mouse'}]
2025-09-17 16:42:09,205 | INFO | it is the raw result :[{'Product Name': 'Wireless Mouse'}]
2025-09-17 16:53:39,967 | INFO | Ensuring Qdrant collection exists...
2025-09-17 16:53:40,923 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 16:53:41,255 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 16:53:41,328 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 16:53:41,328 | INFO | Qdrant collection ready.
2025-09-17 16:54:07,594 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4278,
        "candidates_token_count": 58,
        "total_token_count": 4448
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:54:07,644 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 16:54:07,677 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000029FE56ADED0>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-17 16:54:07,677 | INFO | get selected column is called
2025-09-17 16:54:07,710 | INFO | Execute sql query is executed
2025-09-17 16:54:07,710 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE "Sale Date" = '2025-07-04' COLLATE NOCASE COLLATE NOCASE
2025-09-17 16:54:07,760 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 0}]
2025-09-17 16:54:07,760 | INFO | it is the raw result :[{'COUNT("Order ID")': 0}]
2025-09-17 16:58:29,197 | INFO | Ensuring Qdrant collection exists...
2025-09-17 16:58:31,829 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections "HTTP/1.1 200 OK"
2025-09-17 16:58:32,263 | INFO | HTTP Request: GET https://0a3d7e2e-8a67-4b76-aaa6-e53fd0c32dba.us-east4-0.gcp.cloud.qdrant.io:6333/collections/documents "HTTP/1.1 200 OK"
2025-09-17 16:58:32,317 | INFO | Collection 'documents' already exists with correct dim=3072.
2025-09-17 16:58:32,317 | INFO | Qdrant collection ready.
2025-09-17 16:59:02,330 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "COUNT",
                        "column": "Order ID"
                      }
                    ],
                    "whereClause": {
                      "Sale Date": "2025-07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4278,
        "candidates_token_count": 58,
        "total_token_count": 4581,
        "cached_content_token_count": 3725
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 16:59:02,346 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "2025-07-04"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "COUNT"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Order ID"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 16:59:02,363 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000022FB1C28650>], 'whereClause': {'Sale Date': '2025-07-04'}}
2025-09-17 16:59:02,363 | INFO | get selected column is called
2025-09-17 16:59:02,371 | INFO | Execute sql query is executed
2025-09-17 16:59:02,371 | INFO | This is the input of execute_sql_query:SELECT COUNT("Order ID") FROM "Sales_Details" WHERE DATE("Sale Date") = '2025-07-04' COLLATE NOCASE
2025-09-17 16:59:02,387 | INFO | this is the raw result after execution:[{'COUNT("Order ID")': 3}]
2025-09-17 16:59:02,387 | INFO | it is the raw result :[{'COUNT("Order ID")': 3}]
2025-09-17 17:01:01,064 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electric Appliances"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4268,
        "candidates_token_count": 48,
        "total_token_count": 4558,
        "cached_content_token_count": 3725
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 17:01:01,087 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Category"
          value {
            string_value: "Electric Appliances"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 17:01:01,087 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000022FB5FC6390>], 'whereClause': {'Category': 'Electric Appliances'}}
2025-09-17 17:01:01,097 | INFO | get selected column is called
2025-09-17 17:01:01,097 | INFO | Execute sql query is executed
2025-09-17 17:01:01,105 | INFO | This is the input of execute_sql_query:SELECT SUM("Quantity") FROM "Sales_Details" WHERE "Category" = 'Electric Appliances' COLLATE NOCASE COLLATE NOCASE
2025-09-17 17:01:01,114 | INFO | this is the raw result after execution:[{'SUM("Quantity")': None}]
2025-09-17 17:01:01,114 | INFO | it is the raw result :[{'SUM("Quantity")': None}]
2025-09-17 17:01:35,683 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "07-04"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4273,
        "candidates_token_count": 58,
        "total_token_count": 5086,
        "cached_content_token_count": 3725
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 17:01:35,699 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "07-04"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 17:01:35,713 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000022FB5FC7B90>], 'whereClause': {'Category': 'Electronics', 'Sale Date': '07-04'}}
2025-09-17 17:01:35,716 | INFO | get selected column is called
2025-09-17 17:01:35,724 | INFO | Execute sql query is executed
2025-09-17 17:01:35,724 | INFO | This is the input of execute_sql_query:SELECT SUM("Quantity") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE AND "Sale Date" = '07-04' COLLATE NOCASE COLLATE NOCASE
2025-09-17 17:01:35,734 | INFO | this is the raw result after execution:[{'SUM("Quantity")': None}]
2025-09-17 17:01:35,734 | INFO | it is the raw result :[{'SUM("Quantity")': None}]
2025-09-17 17:02:15,764 | INFO | Gemini raw response: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "get_order_details",
                  "args": {
                    "table_name": "Sales_Details",
                    "aggregations": [
                      {
                        "operation": "SUM",
                        "column": "Quantity"
                      }
                    ],
                    "whereClause": {
                      "Category": "Electronics",
                      "Sale Date": "strftime('%m-%d', \"Sale Date\") = '07-04'"
                    }
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 4272,
        "candidates_token_count": 73,
        "total_token_count": 4820
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-09-17 17:02:15,764 | INFO | ✅ Structured tool call: name: "get_order_details"
args {
  fields {
    key: "whereClause"
    value {
      struct_value {
        fields {
          key: "Sale Date"
          value {
            string_value: "strftime(\'%m-%d\', \"Sale Date\") = \'07-04\'"
          }
        }
        fields {
          key: "Category"
          value {
            string_value: "Electronics"
          }
        }
      }
    }
  }
  fields {
    key: "table_name"
    value {
      string_value: "Sales_Details"
    }
  }
  fields {
    key: "aggregations"
    value {
      list_value {
        values {
          struct_value {
            fields {
              key: "operation"
              value {
                string_value: "SUM"
              }
            }
            fields {
              key: "column"
              value {
                string_value: "Quantity"
              }
            }
          }
        }
      }
    }
  }
}

2025-09-17 17:02:15,781 | INFO | Dispatching function: get_order_details with args: {'table_name': 'Sales_Details', 'aggregations': [<proto.marshal.collections.maps.MapComposite object at 0x0000022FB5FC9210>], 'whereClause': {'Category': 'Electronics', 'Sale Date': 'strftime(\'%m-%d\', "Sale Date") = \'07-04\''}}
2025-09-17 17:02:15,781 | INFO | get selected column is called
2025-09-17 17:02:15,797 | INFO | Execute sql query is executed
2025-09-17 17:02:15,797 | INFO | This is the input of execute_sql_query:SELECT SUM("Quantity") FROM "Sales_Details" WHERE "Category" = 'Electronics' COLLATE NOCASE AND "Sale Date" LIKE 'strftime('%m-%d', "Sale Date") = '07-04'' COLLATE NOCASE COLLATE NOCASE
2025-09-17 17:02:15,808 | INFO | it is the raw result :[]
